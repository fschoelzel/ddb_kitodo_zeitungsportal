/*! jQuery UI - v1.12.1 - 2017-11-09
* http://jqueryui.com
* Includes: widget.js, position.js, disable-selection.js, keycode.js, unique-id.js, widgets/resizable.js, widgets/autocomplete.js, widgets/menu.js, widgets/mouse.js, widgets/slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})((function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{n=t._data(s,"events"),n&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,r,a={},h=e.split(".")[0];e=e.split(".")[1];var l=h+"-"+e;return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[h]=t[h]||{},s=t[h][e],o=t[h][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,(function(e,n){return t.isFunction(n)?(a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(a[e]=n,void 0)})),o.prototype=t.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||e:e},a,{constructor:o,namespace:h,widgetName:e,widgetFullName:l}),s?(t.each(s._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)})),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,s,o=i.call(arguments,1),r=0,a=o.length;a>r;r++)for(n in o[r])s=o[r][n],o[r].hasOwnProperty(n)&&void 0!==s&&(e[n]=t.isPlainObject(s)?t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=i.call(arguments,1),h=this;return r?this.length||"instance"!==o?this.each((function(){var i,n=t.data(this,s);return"instance"===o?(h=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,a),i!==n&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")})):h=void 0:(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each((function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new n(o,this))}))),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(s=r[e]=t.widget.extend({},this.options[e]),o=0;n.length-1>o;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,s;for(i in e)s=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&s&&s.length&&(n=t(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var r,a;for(a=0;i.length>a;a++)r=s.classesElementLookup[i[a]]||t(),r=e.add?t(t.unique(r.get().concat(e.element.get()))):t(r.not(e.element).get()),s.classesElementLookup[i[a]]=r,n.push(i[a]),o&&e.classes[i[a]]&&n.push(e.classes[i[a]])}var n=[],s=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,s){-1!==t.inArray(e.target,s)&&(i.classesElementLookup[n]=t(s.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,o={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,(function(n,r){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var h=n.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+o.eventNamespace,u=h[2];u?s.on(l,u,a):i.on(l,a)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue((function(i){t(this)[e](),o&&o.call(n[0]),i()}))}})),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var s,o=Math.max,r=Math.abs,a=/left|center|right/,h=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),e=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),s=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType,o=!n&&!s;return{element:i,isWindow:n,isDocument:s,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(s){if(!s||!s.of)return f.apply(this,arguments);s=t.extend({},s);var c,d,p,v,g,m,b=t(s.of),y=t.position.getWithinInfo(s.within),x=t.position.getScrollInfo(y),w=(s.collision||"flip").split(" "),_={};return m=n(b),b[0].preventDefault&&(s.at="left top"),d=m.width,p=m.height,v=m.offset,g=t.extend({},v),t.each(["my","at"],(function(){var t,e,i=(s[this]||"").split(" ");1===i.length&&(i=a.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=a.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=l.exec(i[0]),e=l.exec(i[1]),_[this]=[t?t[0]:0,e?e[0]:0],s[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===s.at[0]?g.left+=d:"center"===s.at[0]&&(g.left+=d/2),"bottom"===s.at[1]?g.top+=p:"center"===s.at[1]&&(g.top+=p/2),c=e(_.at,d,p),g.left+=c[0],g.top+=c[1],this.each((function(){var n,a,h=t(this),l=h.outerWidth(),u=h.outerHeight(),f=i(this,"marginLeft"),m=i(this,"marginTop"),M=l+f+i(this,"marginRight")+x.width,S=u+m+i(this,"marginBottom")+x.height,E=t.extend({},g),T=e(_.my,h.outerWidth(),h.outerHeight());"right"===s.my[0]?E.left-=l:"center"===s.my[0]&&(E.left-=l/2),"bottom"===s.my[1]?E.top-=u:"center"===s.my[1]&&(E.top-=u/2),E.left+=T[0],E.top+=T[1],n={marginLeft:f,marginTop:m},t.each(["left","top"],(function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](E,{targetWidth:d,targetHeight:p,elemWidth:l,elemHeight:u,collisionPosition:n,collisionWidth:M,collisionHeight:S,offset:[c[0]+T[0],c[1]+T[1]],my:s.my,at:s.at,within:y,elem:h})})),s.using&&(a=function(t){var e=v.left-E.left,i=e+d-l,n=v.top-E.top,a=n+p-u,c={target:{element:b,left:v.left,top:v.top,width:d,height:p},element:{element:h,left:E.left,top:E.top,width:l,height:u},horizontal:0>i?"left":e>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};l>d&&d>r(e+i)&&(c.horizontal="center"),u>p&&p>r(n+a)&&(c.vertical="middle"),c.important=o(r(e),r(i))>o(r(n),r(a))?"horizontal":"vertical",s.using.call(this,t,c)}),h.offset(t.extend(E,{using:a}))}))},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=t.left-e.collisionPosition.marginLeft,h=s-a,l=a+e.collisionWidth-r-s;e.collisionWidth>r?h>0&&0>=l?(i=t.left+h+e.collisionWidth-r-s,t.left+=h-i):t.left=l>0&&0>=h?s:h>l?s+r-e.collisionWidth:s:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,h=s-a,l=a+e.collisionHeight-r-s;e.collisionHeight>r?h>0&&0>=l?(i=t.top+h+e.collisionHeight-r-s,t.top+=h-i):t.top=l>0&&0>=h?s:h>l?s+r-e.collisionHeight:s:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,h=s.isWindow?s.scrollLeft:s.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-h,c=l+e.collisionWidth-a-h,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];0>u?(i=t.left+f+d+p+e.collisionWidth-a-o,(0>i||r(u)>i)&&(t.left+=f+d+p)):c>0&&(n=t.left-e.collisionPosition.marginLeft+f+d+p-h,(n>0||c>r(n))&&(t.left+=f+d+p))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,h=s.isWindow?s.scrollTop:s.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-h,c=l+e.collisionHeight-a-h,f="top"===e.my[1],d=f?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,v=-2*e.offset[1];0>u?(n=t.top+d+p+v+e.collisionHeight-a-o,(0>n||r(u)>n)&&(t.top+=d+p+v)):c>0&&(i=t.top-e.collisionPosition.marginTop+d+p+v-h,(i>0||c>r(i))&&(t.top+=d+p+v))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",(function(t){t.preventDefault()}))}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++t)}))}}(),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var n=!1;t(document).on("mouseup",(function(){n=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;o.length>s;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}},t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,n,s,o,r=this.options,a=this;if(this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;n.length>i;i++)e=t.trim(n[i]),s="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,h=this._change[o];return this._updatePrevProperties(),h?(i=h.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,r,a,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,r={width:u.helper.width()-o,height:u.helper.height()-s},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,h=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(t.extend(r,{top:h,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>s&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&l&&(t.left=a-e.minWidth),n&&l&&(t.left=a-e.maxWidth),r&&u&&(t.top=h-e.minHeight),s&&u&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(s[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,h={width:i.size.width-a,height:i.size.height-r},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,u&&l?{top:u,left:l}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,o,r,a,h=t(this).resizable("instance"),l=h.options,u=h.element,c=l.containment,f=c instanceof t?c.get(0):/parent/.test(c)?u.parent().get(0):c;f&&(h.containerElement=t(f),/document/.test(c)||c===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,n){i[t]=h._num(e.css("padding"+n))})),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=h.containerOffset,s=h.containerSize.height,o=h.containerSize.width,r=h._hasScroll(f,"left")?f.scrollWidth:o,a=h._hasScroll(f)?f.scrollHeight:s,h.parentData={element:f,left:n.left,top:n.top,width:r,height:a}))},resize:function(e){var i,n,s,o,r=t(this).resizable("instance"),a=r.options,h=r.containerOffset,l=r.position,u=r._aspectRatio||e.shiftKey,c={top:0,left:0},f=r.containerElement,d=!0;f[0]!==document&&/static/.test(f.css("position"))&&(c=h),l.left<(r._helper?h.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-h.left:r.position.left-c.left),u&&(r.size.height=r.size.width/r.aspectRatio,d=!1),r.position.left=a.helper?h.left:0),l.top<(r._helper?h.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-h.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,d=!1),r.position.top=r._helper?h.top:0),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-c.left:r.offset.left-h.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-c.top:r.offset.top-h.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio,d=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio,d=!1)),d||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),h=r.outerWidth()-e.sizeDiff.width,l=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};t(s.alsoResize).each((function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,(function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)})),e.css(s)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,o=i.originalSize,r=i.originalPosition,a=i.axis,h="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=h[0]||1,u=h[1]||1,c=Math.round((s.width-o.width)/l)*l,f=Math.round((s.height-o.height)/u)*u,d=o.width+c,p=o.height+f,v=n.maxWidth&&d>n.maxWidth,g=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>d,b=n.minHeight&&n.minHeight>p;n.grid=h,m&&(d+=l),b&&(p+=u),v&&(d-=l),g&&(p-=u),/^(se|s|e)$/.test(a)?(i.size.width=d,i.size.height=p):/^(ne)$/.test(a)?(i.size.width=d,i.size.height=p,i.position.top=r.top-f):/^(sw)$/.test(a)?(i.size.width=d,i.size.height=p,i.position.left=r.left-c):((0>=p-u||0>=d-l)&&(e=i._getPaddingPlusBorderDimensions(this)),p-u>0?(i.size.height=p,i.position.top=r.top-f):(p=u-e.height,i.size.height=p,i.position.top=r.top+o.height-p),d-l>0?(i.size.width=d,i.position.left=r.left-c):(d=l-e.width,i.size.width=d,i.position.left=r.left+o.width-d))}}),t.ui.resizable,t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay((function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,n,s,o,r=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=!1,n=this.previousFilter||"",o=!1,s=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===n?o=!0:s=n+s,i=this._filterMenuItems(s),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,s,o,r=this,a=this.options.icons.submenu,h=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=h.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+a),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),e=h.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each((function(){var e=t(this);r._isDivider(e)&&r._addClass(e,"ui-menu-divider","ui-widget-content")})),s=i.not(".ui-menu-item, .ui-menu-divider"),o=s.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=e.outerHeight(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return i=t(this),0>i.offset().top-n-s})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,n,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return i=t(this),i.offset().top-n+s>0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,i=!0,void 0;e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault(),void 0;if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,i){var n,s;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)})),void 0):(s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),n=i.item.attr("aria-label")||s.value,n&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion)),void 0)},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay((function(){this.previous=s,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!n)&&(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,(function(t,i){n._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return n.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete,t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)r.push(o);this.handles=s.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,r,a,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var i=Math.abs(n-u.values(e));(s>i||s===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(s=i,o=t(this),r=e)})),a=this._start(e,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,s,o=this.value(),r=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(s,i):Math.max(s,i)),r[e]=i),i!==o&&(n=this._trigger("slide",t,this._uiHash(e,i,r)),n!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=s-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.round((t-e)/i)*i;t=n+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,s,o,r=this.options.range,a=this.options,h=this,l=this._animateOff?!1:a.animate,u={};this._hasMultipleValues()?this.handles.each((function(n){i=100*((h.values(n)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](u,a.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===n&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i})):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},a.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,s,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,r),i===!1))return}switch(o=this.options.step,n=s=this._hasMultipleValues()?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-o)}this._slide(e,r,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})}));
/*!
 * WebGL image filter library
 * https://github.com/slub/webgl-image-filter/
 *
 * Released under the MIT license (https://github.com/slub/webgl-image-filter/blob/master/LICENSE)
 *
 * Date: 2015-11-04
	*/
(function(){var t=this;function e(e,i){var n=e.split("."),s=t;n[0]in s||!s.execScript||s.execScript("var "+n[0]);for(var o;n.length&&(o=n.shift());)n.length||void 0===i?s[o]?s=s[o]:s=s[o]={}:s[o]=i}var i={a:{},compile:function(t,e,i){e=t.createShader(e);t.shaderSource(e,i);t.compileShader(e);return t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.log(t.getShaderInfoLog(e)),null)},f:function(t,e){function n(t,e,i){t.replace(new RegExp("\\b"+e+" \\w+ (\\w+)","ig"),(function(t,e){i[e]=0}))}var s=t.createProgram(),o=i.compile(t,t.VERTEX_SHADER,i.VERTEX_IDENTITY),r=i.compile(t,t.FRAGMENT_SHADER,e);s.uniform={};s.attribute={};t.attachShader(s,o);t.attachShader(s,r);t.linkProgram(s);t.getProgramParameter(s,t.LINK_STATUS)||console.log(t.getProgramInfoLog(s));n(i.VERTEX_IDENTITY,"attribute",s.attribute);for(var a in s.attribute)s.attribute[a]=t.getAttribLocation(s,a);n(i.VERTEX_IDENTITY,"uniform",s.uniform);n(e,"uniform",s.uniform);for(var h in s.uniform)s.uniform[h]=t.getUniformLocation(s,h);return s},BLUR:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform vec2 px;\nvoid main(void) {\ngl_FragColor = vec4(0.0);\ngl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;\ngl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;\ngl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;\ngl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;\ngl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;\ngl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;\ngl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;\ngl_FragColor += texture2D(texture, vUv                             )*0.159576912161;\ngl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;\ngl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;\ngl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;\ngl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;\ngl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;\ngl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;\ngl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;\n}",COLOR_WITH_ALPHA:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform float m[20];\nvoid main(void) {\nvec4 c = texture2D(texture, vUv);\ngl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];\ngl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];\ngl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];\ngl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];\n}",COLOR_WITHOUT_ALPHA:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform float m[20];\nvoid main(void) {\nvec4 c = texture2D(texture, vUv);\ngl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];\ngl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];\ngl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];\ngl_FragColor.a = c.a;\n}",CONVOLUTION:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform vec2 px;\nuniform float m[9];\nvoid main(void) {\nvec4 c11 = texture2D(texture, vUv - px);\nvec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y));\nvec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y));\nvec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) );\nvec4 c22 = texture2D(texture, vUv);\nvec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) );\nvec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) );\nvec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) );\nvec4 c33 = texture2D(texture, vUv + px );\ngl_FragColor = \nc11 * m[0] + c12 * m[1] + c22 * m[2] +\nc21 * m[3] + c22 * m[4] + c23 * m[5] +\nc31 * m[6] + c32 * m[7] + c33 * m[8];\ngl_FragColor.a = c22.a;\nif (c22.r == 255.0 && c22.g == 255.0 && c22.b == 255.0){\ngl_FragColor.rgb = vec3(255,255,255);\n}\n}",COPY:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\nvoid main(void) {\ngl_FragColor = texture2D(texture, vUv);\n}",INVERT:"precision highp float;\nvarying vec2 vUv;\nuniform sampler2D texture;\n\nvoid main(void) {\nvec4 c = texture2D(texture, vUv);\ngl_FragColor = vec4(1.0 - c.r, 1.0 - c.g, 1.0 - c.b, c.a);\n}",VERTEX_IDENTITY:"precision highp float;\nattribute vec2 pos;\nattribute vec2 uv;\nvarying vec2 vUv;\nuniform float flipY;\nvoid main(void) {\nvUv = uv;\ngl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);\n}"};var n={blur:function(t,e,i,n){var s=void 0!==n?n:1;n=s/7/e.width;var s=s/7/e.height,o=f(t,"BLUR");p(t,o);t.uniform2f(o.uniform.px,0,s);u(t,e,o,!1,!0);t.uniform2f(o.uniform.px,n,0);u(t,e,o,i)},brightness:function(t,e,i,s){s=void 0!==s?s:1;n.colorMatrix.call(this,[s,0,0,0,0,0,s,0,0,0,0,0,s,0,0,0,0,0,1,0],t,e,i)},brownie:function(t,e,i){n.colorMatrix.call(this,[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t,e,i)},colorMatrix:function(t,e,i,n){t=new Float32Array(t);t[4]/=255;t[9]/=255;t[14]/=255;t[19]/=255;var s=f(e,1==t[18]&&0==t[3]&&0==t[8]&&0==t[13]&&0==t[15]&&0==t[16]&&0==t[17]&&0==t[19]?"COLOR_WITHOUT_ALPHA":"COLOR_WITH_ALPHA");p(e,s);e.uniform1fv(s.uniform.m,t);u(e,i,s,n)},contrast:function(t,e,i,s){s=void 0!==s?s:1;var o=-128*(s-1);n.colorMatrix.call(this,[s,0,0,0,o,0,s,0,0,o,0,0,s,0,o,0,0,0,1,0],t,e,i)},convolution:function(t,e,i,n){t=new Float32Array(t);var s=1/i.width,o=1/i.height,r=f(e,"CONVOLUTION");p(e,r);e.uniform1fv(r.uniform.m,t);e.uniform2f(r.uniform.px,s,o);u(e,i,r,n)},desaturateLuminance:function(t,e,i){n.colorMatrix.call(this,[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t,e,i)},detectEdges:function(t,e,i){n.convolution.call(this,[0,1,0,-3,1,0,1,0],t,e,i)},emboss:function(t,e,i,s){s=void 0!==s?s:1;n.convolution.call(this,[-2*s,-1*s,0,-1*s,1,1*s,0,1*s,2*s],t,e,i)},hue:function(t,e,i,s){var o=(void 0!==s?s:0)/180*Math.PI;s=Math.cos(o);o=Math.sin(o);n.colorMatrix.call(this,[.213+.787*s+-.213*o,.715+-.715*s+-.715*o,.072+-.072*s+.928*o,0,0,.213+-.213*s+.143*o,.715+s*(1-.715)+.14*o,.072+-.072*s+-.283*o,0,0,.213+-.213*s+-.787*o,.715+-.715*s+.715*o,.072+.928*s+.072*o,0,0,0,0,0,1,0],t,e,i)},invert:function(t,e,i){var n=f(t,"INVERT");p(t,n);u(t,e,n,i)},kodachrome:function(t,e,i){n.colorMatrix.call(this,[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t,e,i)},negative:function(t,e,i){n.contrast(t,e,i,-2)},polaroid:function(t,e,i){n.colorMatrix.call(this,[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t,e,i)},saturation:function(t,e,i,s){s=2*(void 0!==s?s:0)/3+1;var o=-.5*(s-1);n.colorMatrix.call(this,[s,o,o,0,0,o,s,o,0,0,o,o,s,0,0,0,0,0,1,0],t,e,i)},sepia:function(t,e,i){n.colorMatrix.call(this,[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t,e,i)},sharpen:function(t,e,i,s){s=void 0!==s?s:1;n.convolution.call(this,[0,-1*s,0,-1*s,1+4*s,-1*s,0,-1*s,0],t,e,i)},shiftToBGR:function(t,e,i){n.colorMatrix.call(this,[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t,e,i)},sobelX:function(t,e,i){n.convolution.call(this,[-1,0,1,-2,0,2,-1,0,1],t,e,i)},sobelY:function(t,e,i){n.convolution.call(this,[-1,-2,-1,0,0,0,1,2,1],t,e,i)},technicolor:function(t,e,i){n.colorMatrix.call(this,[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t,e,i)},vintagePinhole:function(t,e,i){n.colorMatrix.call(this,[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t,e,i)}};var s=[],o=0,r=0,a=[null,null];e("glif.addFilter",(function(t){s.push({g:n[t],c:Array.prototype.slice.call(arguments,1)})}));e("glif.apply",(function(t,e,i){o=0;if(0!=s.length){a=[null,null];h(t);t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);t.viewport(0,0,e.width,e.height);for(var n=0;n<s.length;n++){var r=s[n];r.g.apply(this,[t,e,n===s.length-1].concat(r.c||[]))}void 0!==i&&!0===i&&(i=d(t,e),n=l(t,e),r=f(t,"COPY"),h(t),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.viewport(0,0,e.width,e.height),p(t,r),t.bindTexture(t.TEXTURE_2D,i),t.bindFramebuffer(t.FRAMEBUFFER,n.b),t.uniform1f(r.uniform.flipY,-1),t.drawArrays(t.TRIANGLES,0,6))}}));function h(t){var e=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}function l(t,e){var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i);t.bindRenderbuffer(t.RENDERBUFFER,t.createRenderbuffer());var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);t.bindTexture(t.TEXTURE_2D,null);t.bindFramebuffer(t.FRAMEBUFFER,null);return{b:i,h:n}}function u(t,e,i,n,s){var a=null,h=null,l=null,a=0==o?d(t,e):c(t,e).h;o++;!n||s&1?(r=(r+1)%2,h=c(t,e).b):(h=null,l=0==o%2);t.bindTexture(t.TEXTURE_2D,a);t.bindFramebuffer(t.FRAMEBUFFER,h);t.uniform1f(i.uniform.flipY,l?-1:1);t.drawArrays(t.TRIANGLES,0,6)}function c(t,e){var i=r;a[i]=a[i]||l(t,e);return a[i]}function f(t,e){var n=e.toUpperCase(),s=void 0!==i.a[n]?i.a[n]:i.f(t,i[n]);i.a.hasOwnProperty(n)||(i.a[n]=s);return s}function d(t,e){var i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);return i}e("glif.reset",(function(){s=[];for(var t in i.a)delete i.a[t]}));function p(t,e){t.useProgram(e);var i=Float32Array.BYTES_PER_ELEMENT,n=4*i;t.enableVertexAttribArray(e.attribute.pos);t.vertexAttribPointer(e.attribute.pos,2,t.FLOAT,!1,n,0*i);t.enableVertexAttribArray(e.attribute.uv);t.vertexAttribPointer(e.attribute.uv,2,t.FLOAT,!1,n,2*i)}}).call(window);(function(){var t,e=this;function i(t){t.za=function(){return t.mc?t.mc:t.mc=new t}}function n(t){var e=typeof t;if("object"==e)if(t){if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function s(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function o(t){return"string"==typeof t}function r(t){return"number"==typeof t}function a(t){return"function"==n(t)}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t){return t[u]||(t[u]=++c)}var u="closure_uid_"+(1e9*Math.random()>>>0),c=0;function f(t,e,i){return t.call.apply(t.bind,arguments)}function d(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(i,n);return t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function p(t,e,i){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:d;return p.apply(null,arguments)}function v(t,i){var n=t.split("."),s=e;n[0]in s||!s.execScript||s.execScript("var "+n[0]);for(var o;n.length&&(o=n.shift());)n.length||void 0===i?s[o]?s=s[o]:s=s[o]={}:s[o]=i}function g(t,e){function i(){}i.prototype=e.prototype;t.R=e.prototype;t.prototype=new i;t.prototype.constructor=t;t.Ae=function(t,i,n){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return e.prototype[i].apply(t,s)}}var m;function b(){}var y=Function("return this")();var x;var w=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function _(t){if(!A.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(M,"&amp;"));-1!=t.indexOf("<")&&(t=t.replace(S,"&lt;"));-1!=t.indexOf(">")&&(t=t.replace(E,"&gt;"));-1!=t.indexOf('"')&&(t=t.replace(T,"&quot;"));-1!=t.indexOf("'")&&(t=t.replace(C,"&#39;"));-1!=t.indexOf("\0")&&(t=t.replace(I,"&#0;"));return t}var M=/&/g,S=/</g,E=/>/g,T=/"/g,C=/'/g,I=/\x00/g,A=/[\x00&<>"']/;function P(t,e){return t<e?-1:t>e?1:0}function F(t,e,i){return Math.min(Math.max(t,e),i)}var D=function(){var t;"cosh"in Math?t=Math.cosh:t=function(t){t=Math.exp(t);return(t+1/t)/2};return t}();function k(t,e){var i=t%e;return 0>i*e?i+e:i}function R(t){return function(e){if(e)return[F(e[0],t[0],t[2]),F(e[1],t[1],t[3])]}}function L(t){return t}function z(t,e,i){this.center=t;this.resolution=e;this.rotation=i}var U="function"===typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,s=arguments.length;n<s;++n){var o=arguments[n];if(void 0!==o&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(i[r]=o[r])}return i};function O(t){for(var e in t)delete t[e]}function N(t){var e=[],i;for(i in t)e.push(t[i]);return e}function j(t){for(var e in t)return!1;return!e}var V="olm_"+(1e4*Math.random()|0);function W(t){function e(e){var i=t.listener,n=t.Vb||t.target;t.Xb&&Z(t);return i.call(n,e)}return t.Wb=e}function B(t,e,i,n){for(var s,o=0,r=t.length;o<r;++o)if(s=t[o],s.listener===e&&s.Vb===i)return n&&(s.deleteIndex=o),s}function $(t,e){var i=t[V];return i?i[e]:void 0}function H(t){var e=t[V];e||(e=t[V]={});return e}function X(t,e){var i=$(t,e);if(i){for(var n=0,s=i.length;n<s;++n)t.removeEventListener(e,i[n].Wb),O(i[n]);i.length=0;if(i=t[V])delete i[e],0===Object.keys(i).length&&delete t[V]}}function G(t,e,i,n,s){var o=H(t),r=o[e];r||(r=o[e]=[]);(o=B(r,i,n,!1))?s||(o.Xb=!1):(o={Vb:n,Xb:!!s,listener:i,target:t,type:e},t.addEventListener(e,W(o)),r.push(o));return o}function Y(t,e,i,n){return G(t,e,i,n,!0)}function q(t,e,i,n){(t=$(t,e))&&(i=B(t,i,n,!0))&&Z(i)}function Z(t){if(t&&t.target){t.target.removeEventListener(t.type,t.Wb);var e=$(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1);0===e.length&&X(t.target,t.type)}O(t)}}function J(t){var e=H(t),i;for(i in e)X(t,i)}function K(){}K.prototype.ja=!1;function Q(t){t.ja||(t.ja=!0,t.L())}K.prototype.L=b;function tt(t,e){this.type=t;this.target=e||null}tt.prototype.preventDefault=tt.prototype.stopPropagation=function(){this.Zd=!0};function et(t){t.stopPropagation()}function it(){this.W={};this.H={};this.A={}}g(it,K);it.prototype.addEventListener=function(t,e){var i=this.A[t];i||(i=this.A[t]=[]);-1===i.indexOf(e)&&i.push(e)};function nt(t,e){var i="string"===typeof e?new tt(e):e,n=i.type;i.target=t;var s=t.A[n],o;if(s){n in t.H||(t.H[n]=0,t.W[n]=0);++t.H[n];for(var r=0,a=s.length;r<a;++r)if(!1===s[r].call(t,i)||i.Zd){o=!1;break}--t.H[n];if(0===t.H[n]){i=t.W[n];for(delete t.W[n];i--;)t.removeEventListener(n,b);delete t.H[n]}return o}}it.prototype.L=function(){J(this)};function st(t,e){return e?e in t.A:0<Object.keys(t.A).length}it.prototype.removeEventListener=function(t,e){var i=this.A[t];if(i){var n=i.indexOf(e);t in this.W?(i[n]=b,++this.W[t]):(i.splice(n,1),0===i.length&&delete this.A[t])}};function ot(){it.call(this);this.g=0}g(ot,it);ot.prototype.f=function(){++this.g;nt(this,"change")};ot.prototype.$=function(t,e,i){if(Array.isArray(t)){for(var n=t.length,s=Array(n),o=0;o<n;++o)s[o]=G(this,t[o],e,i);return s}return G(this,t,e,i)};ot.prototype.da=function(t,e,i){if(Array.isArray(t))for(var n=0,s=t.length;n<s;++n)q(this,t[n],e,i);else q(this,t,e,i)};function rt(t,e,i){tt.call(this,t);this.key=e;this.oldValue=i}g(rt,tt);function at(t){ot.call(this);l(this);this.K={};void 0!==t&&this.F(t)}g(at,ot);var ht={};function lt(t){return ht.hasOwnProperty(t)?ht[t]:ht[t]="change:"+t}at.prototype.get=function(t){var e;this.K.hasOwnProperty(t)&&(e=this.K[t]);return e};at.prototype.set=function(t,e,i){i?this.K[t]=e:(i=this.K[t],this.K[t]=e,i!==e&&(e=lt(t),nt(this,new rt(e,t,i)),nt(this,new rt("propertychange",t,i))))};at.prototype.F=function(t,e){for(var i in t)this.set(i,t[i],e)};function ut(t,e){return t>e?1:t<e?-1:0}function ct(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(!(e<=t[n-1]))if(0<i)for(i=1;i<n;++i){if(t[i]<e)return i-1}else if(0>i)for(i=1;i<n;++i){if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function ft(t,e){var i,n=s(e)?e:[e],o=n.length;for(i=0;i<o;i++)t[t.length]=n[i]}function dt(t,e){var i=t.indexOf(e),n=-1<i;n&&t.splice(i,1);return n}function pt(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function vt(t){var e=Oo,i=t.length,n=Array(t.length),s;for(s=0;s<i;s++)n[s]={index:s,value:t[s]};n.sort((function(t,i){return e(t.value,i.value)||t.index-i.index}));for(s=0;s<t.length;s++)t[s]=n[s].value}function gt(t){return function(e,i,n){if(void 0!==e)return e=ct(t,e,n),e=F(e+i,0,t.length-1),t[e]}}function mt(t,e,i){return function(n,s,o){if(void 0!==n)return n=Math.max(Math.floor(Math.log(e/n)/Math.log(t)+(0<o?0:0>o?1:.5))+s,0),void 0!==i&&(n=Math.min(n,i)),e/Math.pow(t,n)}}function bt(t){if(void 0!==t)return 0}function yt(t,e){if(void 0!==t)return t+e}function xt(t){var e=2*Math.PI/t;return function(t,i){if(void 0!==t)return t=Math.floor((t+i)/e+.5)*e}}function wt(){var t=5*Math.PI/180;return function(e,i){if(void 0!==e)return Math.abs(e+i)<=t?0:e+i}}function _t(t,e){t[0]+=e[0];t[1]+=e[1]}function Mt(t,e){var i=Math.cos(e),n=Math.sin(e),s=t[1]*i+t[0]*n;t[0]=t[0]*i-t[1]*n;t[1]=s}function St(t){for(var e=It(),i=0,n=t.length;i<n;++i)Dt(e,t[i]);return e}function Et(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Tt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ct(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function It(){return[Infinity,Infinity,-Infinity,-Infinity]}function At(t,e,i,n,s){return s?(s[0]=t,s[1]=e,s[2]=i,s[3]=n,s):[t,e,i,n]}function Pt(t,e){var i=t[0],n=t[1];return At(i,n,i,n,e)}function Ft(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Dt(t,e){e[0]<t[0]&&(t[0]=e[0]);e[0]>t[2]&&(t[2]=e[0]);e[1]<t[1]&&(t[1]=e[1]);e[1]>t[3]&&(t[3]=e[1])}function kt(t,e,i,n,s){for(;i<n;i+=s){var o=t,r=e[i],a=e[i+1];o[0]=Math.min(o[0],r);o[1]=Math.min(o[1],a);o[2]=Math.max(o[2],r);o[3]=Math.max(o[3],a)}return t}function Rt(t){var e=0;Bt(t)||(e=Vt(t)*Ot(t));return e}function Lt(t){return[t[0],t[1]]}function zt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Ut(t,e,i,n,s){var o=e*n[0]/2;n=e*n[1]/2;e=Math.cos(i);var r=Math.sin(i);i=o*e;o*=r;e*=n;var a=n*r,h=t[0],l=t[1];t=h-i+a;n=h-i-a;r=h+i-a;i=h+i+a;var a=l-o-e,h=l-o+e,u=l+o+e,o=l+o-e;return At(Math.min(t,n,r,i),Math.min(a,h,u,o),Math.max(t,n,r,i),Math.max(a,h,u,o),s)}function Ot(t){return t[3]-t[1]}function Nt(t,e,i){i=i?i:It();Wt(t,e)&&(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]);return i}function jt(t){return[t[0],t[3]]}function Vt(t){return t[2]-t[0]}function Wt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Bt(t){return t[2]<t[0]||t[3]<t[1]}function $t(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i;t[2]+=i;t[1]-=n;t[3]+=n}function Ht(){return!0}function Xt(){return!1}function Gt(t){this.radius=t}function Yt(t,e){var i=t[1]*Math.PI/180,n=e[1]*Math.PI/180,s=(n-i)/2,o=(e[0]-t[0])*Math.PI/180/2,i=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(n);return 2*qt.radius*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}Gt.prototype.offset=function(t,e,i){var n=t[1]*Math.PI/180;e/=this.radius;var s=Math.asin(Math.sin(n)*Math.cos(e)+Math.cos(n)*Math.sin(e)*Math.cos(i));return[180*(t[0]*Math.PI/180+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(n),Math.cos(e)-Math.sin(n)*Math.sin(s)))/Math.PI,180*s/Math.PI]};var qt=new Gt(6370997);var Zt={};Zt.degrees=2*Math.PI*qt.radius/360;Zt.ft=.3048;Zt.m=1;Zt["us-ft"]=1200/3937;function Jt(t){this.a=t.code;this.g=t.units;this.h=void 0!==t.extent?t.extent:null;this.f=void 0!==t.global?t.global:!1;this.b=!(!this.f||!this.h);this.i=void 0!==t.getPointResolution?t.getPointResolution:this.j;this.c=null;this.l=t.metersPerUnit}Jt.prototype.B=function(){return this.h};function Kt(t){return t.l||Zt[t.g]}Jt.prototype.j=function(t,e){if("degrees"==this.g)return t;var i=le(this,re("EPSG:4326")),n=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2],n=i(n,n,2),i=(Yt(n.slice(0,2),n.slice(2,4))+Yt(n.slice(4,6),n.slice(6,8)))/2,n=Kt(this);void 0!==n&&(i/=n);return i};Jt.prototype.getPointResolution=function(t,e){return this.i(t,e)};var Qt={},te={};function ee(t){ne(t);t.forEach((function(e){t.forEach((function(t){e!==t&&oe(e,t,ce)}))}))}function ie(t){Qt[t.a]=t;oe(t,t,ce)}function ne(t){var e=[];t.forEach((function(t){e.push(ie(t))}))}function se(t){return t?"string"===typeof t?re(t):t:re("EPSG:3857")}function oe(t,e,i){t=t.a;e=e.a;t in te||(te[t]={});te[t][e]=i}function re(t){var e;t instanceof Jt?e=t:"string"===typeof t?e=Qt[t]:e=null;return e}function ae(t,e){if(t===e)return!0;var i=t.g===e.g;return t.a===e.a?i:le(t,e)===ce&&i}function he(t,e){var i=re(t),n=re(e);return le(i,n)}function le(t,e){var i=t.a,n=e.a,s;i in te&&n in te[i]&&(s=te[i][n]);void 0===s&&(s=ue);return s}function ue(t,e){if(void 0!==e&&t!==e){for(var i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function ce(t,e){var i;if(void 0!==e){i=0;for(var n=t.length;i<n;++i)e[i]=t[i];i=e}else i=t.slice();return i}function fe(){at.call(this);this.o=It();this.s=-1;this.j={};this.D=this.l=0}g(fe,at);fe.prototype.B=function(t){this.s!=this.g&&(this.o=this.Db(this.o),this.s=this.g);var e=this.o;t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t=e;return t};function de(t){this.length=t.length||t;for(var e=0;e<this.length;e++)this[e]=t[e]||0}de.prototype.BYTES_PER_ELEMENT=4;de.prototype.set=function(t,e){e=e||0;for(var i=0;i<t.length&&e+i<this.length;i++)this[e+i]=t[i]};de.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(de.BYTES_PER_ELEMENT=4,de.prototype.BYTES_PER_ELEMENT=de.prototype.BYTES_PER_ELEMENT,de.prototype.set=de.prototype.set,de.prototype.toString=de.prototype.toString,v("Float32Array",de));function pe(t){this.length=t.length||t;for(var e=0;e<this.length;e++)this[e]=t[e]||0}pe.prototype.BYTES_PER_ELEMENT=8;pe.prototype.set=function(t,e){e=e||0;for(var i=0;i<t.length&&e+i<this.length;i++)this[e+i]=t[i]};pe.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{pe.BYTES_PER_ELEMENT=8}catch(t){}pe.prototype.BYTES_PER_ELEMENT=pe.prototype.BYTES_PER_ELEMENT;pe.prototype.set=pe.prototype.set;pe.prototype.toString=pe.prototype.toString;v("Float64Array",pe)}function ve(t,e,i,n,s){t[0]=e;t[1]=i;t[2]=n;t[3]=s}function ge(){var t=Array(16);be(t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t}function me(){var t=Array(16);be(t,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t}function be(t,e,i,n,s,o,r,a,h,l,u,c,f,d,p,v,g){t[0]=e;t[1]=i;t[2]=n;t[3]=s;t[4]=o;t[5]=r;t[6]=a;t[7]=h;t[8]=l;t[9]=u;t[10]=c;t[11]=f;t[12]=d;t[13]=p;t[14]=v;t[15]=g}function ye(t){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1}function xe(t,e){var i=t[0],n=t[1],s=t[2],o=t[3],r=t[4],a=t[5],h=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],b=i*a-n*r,y=i*h-s*r,x=i*l-o*r,w=n*h-s*a,_=n*l-o*a,M=s*l-o*h,S=u*v-c*p,E=u*g-f*p,T=u*m-d*p,C=c*g-f*v,I=c*m-d*v,A=f*m-d*g,P=b*A-y*I+x*C+w*T-_*E+M*S;0!=P&&(P=1/P,e[0]=(a*A-h*I+l*C)*P,e[1]=(-n*A+s*I-o*C)*P,e[2]=(v*M-g*_+m*w)*P,e[3]=(-c*M+f*_-d*w)*P,e[4]=(-r*A+h*T-l*E)*P,e[5]=(i*A-s*T+o*E)*P,e[6]=(-p*M+g*x-m*y)*P,e[7]=(u*M-f*x+d*y)*P,e[8]=(r*I-a*T+l*S)*P,e[9]=(-i*I+n*T-o*S)*P,e[10]=(p*_-v*x+m*b)*P,e[11]=(-u*_+c*x-d*b)*P,e[12]=(-r*C+a*E-h*S)*P,e[13]=(i*C-n*E+s*S)*P,e[14]=(-p*w+v*y-g*b)*P,e[15]=(u*w-c*y+f*b)*P)}function we(t,e,i){var n=t[1]*e+t[5]*i+0*t[9]+t[13],s=t[2]*e+t[6]*i+0*t[10]+t[14],o=t[3]*e+t[7]*i+0*t[11]+t[15];t[12]=t[0]*e+t[4]*i+0*t[8]+t[12];t[13]=n;t[14]=s;t[15]=o}function _e(t,e,i){be(t,t[0]*e,t[1]*e,t[2]*e,t[3]*e,t[4]*i,t[5]*i,t[6]*i,t[7]*i,1*t[8],1*t[9],1*t[10],1*t[11],t[12],t[13],t[14],t[15])}function Me(t,e){var i=t[0],n=t[1],s=t[2],o=t[3],r=t[4],a=t[5],h=t[6],l=t[7],u=Math.cos(e),c=Math.sin(e);t[0]=i*u+r*c;t[1]=n*u+a*c;t[2]=s*u+h*c;t[3]=o*u+l*c;t[4]=i*-c+r*u;t[5]=n*-c+a*u;t[6]=s*-c+h*u;t[7]=o*-c+l*u}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Se(t,e,i,n,s,o){var r=s[0],a=s[1],h=s[4],l=s[5],u=s[12];s=s[13];for(var c=o?o:[],f=0;e<i;e+=n){var d=t[e],p=t[e+1];c[f++]=r*d+h*p+u;c[f++]=a*d+l*p+s}o&&c.length!=f&&(c.length=f);return c}function Ee(){fe.call(this);this.h="XY";this.b=2;this.a=null}g(Ee,fe);function Te(t){if("XY"==t)return 2;if("XYZ"==t||"XYM"==t)return 3;if("XYZM"==t)return 4}Ee.prototype.Db=function(t){var e=this.a,i=this.a.length,n=this.b;t=At(Infinity,Infinity,-Infinity,-Infinity,t);return kt(t,e,0,i,n)};function Ce(t,e){t.D!=t.g&&(O(t.j),t.l=0,t.D=t.g);if(0>e||0!==t.l&&e<=t.l)return t;var i=e.toString();if(t.j.hasOwnProperty(i))return t.j[i];var n=t.Ma(e);if(n.a.length<t.a.length)return t.j[i]=n;t.l=e;return t}Ee.prototype.Ma=function(){return this};function Ie(t,e,i){t.b=Te(e);t.h=e;t.a=i}function Ae(t,e,i,n){if(e)i=Te(e);else{for(e=0;e<n;++e){if(0===i.length){t.h="XY";t.b=2;return}i=i[0]}i=i.length;e=2==i?"XY":3==i?"XYZ":4==i?"XYZM":void 0}t.h=e;t.b=i}Ee.prototype.rotate=function(t,e){var i=this.a;if(i){for(var n=i.length,s=this.b,o=i?i:[],r=Math.cos(t),a=Math.sin(t),h=e[0],l=e[1],u=0,c=0;c<n;c+=s){var f=i[c]-h,d=i[c+1]-l;o[u++]=h+f*r-d*a;o[u++]=l+f*a+d*r;for(f=c+2;f<c+s;++f)o[u++]=i[f]}i&&o.length!=u&&(o.length=u);this.f()}};function Pe(t,e){var i=0,n,s;n=0;for(s=e.length;n<s;++n)t[i++]=e[n];return i}function Fe(t,e,i,n){var s,o;s=0;for(o=i.length;s<o;++s){var r=i[s],a;for(a=0;a<n;++a)t[e++]=r[a]}return e}function De(t,e,i,n,s){s=s?s:[];var o=0,r,a;r=0;for(a=i.length;r<a;++r)e=Fe(t,e,i[r],n),s[o++]=e;s.length=o;return s}function ke(t,e,i,n,s){s=void 0!==s?s:[];for(var o=0;e<i;e+=n)s[o++]=t.slice(e,e+n);s.length=o;return s}function Re(t,e,i,n,s){s=void 0!==s?s:[];var o=0,r,a;r=0;for(a=i.length;r<a;++r){var h=i[r];s[o++]=ke(t,e,h,n,s[o]);e=h}s.length=o;return s}function Le(t,e,i,n,s,o,r){var a=(i-e)/n;if(3>a){for(;e<i;e+=n)o[r++]=t[e],o[r++]=t[e+1];return r}var h=Array(a);h[0]=1;h[a-1]=1;i=[e,i-n];for(var l=0,u;0<i.length;){var c=i.pop(),f=i.pop(),d=0,p=t[f],v=t[f+1],g=t[c],m=t[c+1];for(u=f+n;u<c;u+=n){var b,y=t[u];b=t[u+1];var x=p,w=v,_=g-x,M=m-w;if(0!==_||0!==M){var S=((y-x)*_+(b-w)*M)/(_*_+M*M);1<S?(x=g,w=m):0<S&&(x+=_*S,w+=M*S)}y=x-y;b=w-b;b=y*y+b*b;b>d&&(l=u,d=b)}d>s&&(h[(l-e)/n]=1,f+n<l&&i.push(f,l),l+n<c&&i.push(l,c))}for(u=0;u<a;++u)h[u]&&(o[r++]=t[e+u*n],o[r++]=t[e+u*n+1]);return r}function ze(t,e,i,n,s,o,r,a){var h,l;h=0;for(l=i.length;h<l;++h){var u=i[h];t:{var c=t,f=u,d=n,p=s,v=o;if(e!=f){var g=p*Math.round(c[e]/p),m=p*Math.round(c[e+1]/p);e+=d;v[r++]=g;v[r++]=m;var b,y;do{if(b=p*Math.round(c[e]/p),y=p*Math.round(c[e+1]/p),e+=d,e==f){v[r++]=b;v[r++]=y;break t}}while(b==g&&y==m);for(;e<f;){var x,w;x=p*Math.round(c[e]/p);w=p*Math.round(c[e+1]/p);e+=d;if(x!=b||w!=y){var _=b-g,M=y-m,S=x-g,E=w-m;_*E==M*S&&(0>_&&S<_||_==S||0<_&&S>_)&&(0>M&&E<M||M==E||0<M&&E>M)||(v[r++]=b,v[r++]=y,g=b,m=y);b=x;y=w}}v[r++]=b;v[r++]=y}}a.push(r);e=u}return r}function Ue(t,e){Ee.call(this);this.U(t,e)}g(Ue,Ee);t=Ue.prototype;t.clone=function(){var t=new Ue(null);Ie(t,this.h,this.a.slice());t.f();return t};t.xa=function(){return ke(this.a,0,this.a.length,this.b)};t.Ma=function(t){var e=[];e.length=Le(this.a,0,this.a.length,this.b,t,e,0);t=new Ue(null);Ie(t,"XY",e);t.f();return t};t.X=function(){return"LinearRing"};t.U=function(t,e){t?(Ae(this,e,t,1),this.a||(this.a=[]),this.a.length=Fe(this.a,0,t,this.b)):Ie(this,"XY",null);this.f()};function Oe(t,e){Ee.call(this);this.U(t,e)}g(Oe,Ee);t=Oe.prototype;t.clone=function(){var t=new Oe(null);Ie(t,this.h,this.a.slice());t.f();return t};t.xa=function(){return this.a?this.a.slice():[]};t.Db=function(t){return Pt(this.a,t)};t.X=function(){return"Point"};t.U=function(t,e){t?(Ae(this,e,t,0),this.a||(this.a=[]),this.a.length=Pe(this.a,t)):Ie(this,"XY",null);this.f()};function Ne(t,e,i,n,s,o){for(var r=!1,a=t[i-n],h=t[i-n+1];e<i;e+=n){var l=t[e],u=t[e+1];h>o!=u>o&&s<(l-a)*(o-h)/(u-h)+a&&(r=!r);a=l;h=u}return r}function je(t,e,i,n,s,o,r){var a,h,l,u,c,f=s[o+1],d=[],p=i[0];l=t[p-n];c=t[p-n+1];for(a=e;a<p;a+=n){u=t[a];h=t[a+1];if(f<=c&&h<=f||c<=f&&f<=h)l=(f-c)/(h-c)*(u-l)+l,d.push(l);l=u;c=h}p=NaN;c=-Infinity;d.sort(ut);l=d[0];a=1;for(h=d.length;a<h;++a){u=d[a];var v=Math.abs(u-l);if(v>c){l=(l+u)/2;var g;t:if(0!==i.length&&Ne(t,e,i[0],n,l,f)){var m;g=1;for(m=i.length;g<m;++g)if(Ne(t,i[g-1],i[g],n,l,f)){g=!1;break t}g=!0}else g=!1;g&&(p=l,c=v)}l=u}isNaN(p)&&(p=s[o]);return r?(r.push(p,f),r):[p,f]}function Ve(t,e,i,n){for(var s=0,o=t[i-n],r=t[i-n+1];e<i;e+=n)var a=t[e],h=t[e+1],s=s+(a-o)*(h+r),o=a,r=h;return 0<s}function We(t,e,i,n){var s=0;n=void 0!==n?n:!1;var o,r;o=0;for(r=e.length;o<r;++o){var a=e[o],s=Ve(t,s,a,i);if(0===o){if(n&&s||!n&&!s)return!1}else if(n&&!s||!n&&s)return!1;s=a}return!0}function Be(t,e,i,n,s){s=void 0!==s?s:!1;var o,r;o=0;for(r=i.length;o<r;++o){var a=i[o],h=Ve(t,e,a,n);if(0===o?s&&h||!s&&!h:s&&!h||!s&&h)for(var h=t,l=a,u=n;e<l-u;){var c;for(c=0;c<u;++c){var f=h[e+c];h[e+c]=h[l-u+c];h[l-u+c]=f}e+=u;l-=u}e=a}return e}function $e(t,e,i,n){var s=0,o,r;o=0;for(r=e.length;o<r;++o)s=Be(t,s,e[o],i,n);return s}function He(t,e){Ee.call(this);this.c=[];this.u=-1;this.v=null;this.w=-1;this.i=null;this.U(t,e)}g(He,Ee);t=He.prototype;t.clone=function(){var t=new He(null);Ye(t,this.h,this.a.slice(),this.c.slice());return t};t.xa=function(t){var e;void 0!==t?(e=Ge(this).slice(),Be(e,0,this.c,this.b,t)):e=this.a;return Re(e,0,this.c,this.b)};t.Za=function(){return this.c};function Xe(t){if(t.u!=t.g){var e=zt(t.B());t.v=je(Ge(t),0,t.c,t.b,e,0);t.u=t.g}return t.v}function Ge(t){if(t.w!=t.g){var e=t.a;We(e,t.c,t.b)?t.i=e:(t.i=e.slice(),t.i.length=Be(t.i,0,t.c,t.b));t.w=t.g}return t.i}t.Ma=function(t){var e=[],i=[];e.length=ze(this.a,0,this.c,this.b,Math.sqrt(t),e,0,i);t=new He(null);Ye(t,"XY",e,i);return t};t.X=function(){return"Polygon"};t.U=function(t,e){if(t){Ae(this,e,t,2);this.a||(this.a=[]);var i=De(this.a,0,t,this.b,this.c);this.a.length=0===i.length?0:i[i.length-1];this.f()}else Ye(this,"XY",null,this.c)};function Ye(t,e,i,n){Ie(t,e,i);t.c=n;t.f()}function qe(t){at.call(this);t=t||{};this.b=[0,0];var e={};e.center=void 0!==t.center?t.center:null;this.j=se(t.projection);var i,n,s,o=void 0!==t.minZoom?t.minZoom:0;i=void 0!==t.maxZoom?t.maxZoom:28;var a=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions)i=t.resolutions,n=i[0],s=i[i.length-1],i=gt(i);else{n=se(t.projection);s=n.B();var h=(s?Math.max(Vt(s),Ot(s)):360*Zt.degrees/Kt(n))/256/Math.pow(2,0),l=h/Math.pow(2,28);n=t.maxResolution;void 0!==n?o=0:n=h/Math.pow(a,o);s=t.minResolution;void 0===s&&(s=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,i):h/Math.pow(a,i):l);i=o+Math.floor(Math.log(n/s)/Math.log(a));s=n/Math.pow(a,i-o);i=mt(a,n,i-o)}this.c=n;this.i=s;this.h=o;o=void 0!==t.extent?R(t.extent):L;(void 0!==t.enableRotation?t.enableRotation:1)?(n=t.constrainRotation,n=void 0===n||!0===n?wt():!1===n?yt:r(n)?xt(n):yt):n=bt;this.a=new z(o,i,n);void 0!==t.resolution?e.resolution=t.resolution:void 0!==t.zoom&&(e.resolution=this.constrainResolution(this.c,t.zoom-this.h));e.rotation=void 0!==t.rotation?t.rotation:0;this.F(e)}g(qe,at);t=qe.prototype;t.constrainResolution=function(t,e,i){return this.a.resolution(t,e||0,i||0)};t.constrainRotation=function(t,e){return this.a.rotation(t,e||0)};t.aa=function(){return this.get("center")};function Ze(t,e){var i=t.aa(),n=t.G(),s=t.N();return Ut(i,n,s,e)}t.G=function(){return this.get("resolution")};function Je(t,e){return Math.max(Vt(t)/e[0],Ot(t)/e[1])}t.N=function(){return this.get("rotation")};t.I=function(){var t=this.aa(),e=this.j,i=this.G(),n=this.N();return{center:[Math.round(t[0]/i)*i,Math.round(t[1]/i)*i],projection:void 0!==e?e:null,resolution:i,rotation:n}};t.Vc=function(){var t,e=this.G();if(void 0!==e){var i,n=0;do{i=this.constrainResolution(this.c,n);if(i==e){t=n;break}++n}while(i>this.i)}return void 0!==t?this.h+t:t};t.ic=function(t,e,i){if(!(t instanceof Ee)){var n=t[0],s=t[1],o=t[2],r=t[3],n=[n,s,n,r,o,r,o,s,n,s],s=new He(null);Ye(s,"XY",n,[n.length]);t=s}n=i||{};i=void 0!==n.padding?n.padding:[0,0,0,0];var r=void 0!==n.constrainResolution?n.constrainResolution:!0,s=void 0!==n.nearest?n.nearest:!1,a;void 0!==n.minResolution?a=n.minResolution:void 0!==n.maxZoom?a=this.constrainResolution(this.c,n.maxZoom-this.h,0):a=0;var h=t.a,o=this.N(),n=Math.cos(-o),o=Math.sin(-o),l=Infinity,u=Infinity,c=-Infinity,f=-Infinity;t=t.b;for(var d=0,p=h.length;d<p;d+=t)var v=h[d]*n-h[d+1]*o,g=h[d]*o+h[d+1]*n,l=Math.min(l,v),u=Math.min(u,g),c=Math.max(c,v),f=Math.max(f,g);e=Je([l,u,c,f],[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]);e=isNaN(e)?a:Math.max(e,a);r&&(a=this.constrainResolution(e,0,0),!s&&a<e&&(a=this.constrainResolution(a,-1,0)),e=a);this.Pa(e);o=-o;a=(l+c)/2+(i[1]-i[3])/2*e;e=(u+f)/2+(i[0]-i[2])/2*e;this.la([a*n-e*o,e*n+a*o])};function Ke(t){return!!t.aa()&&void 0!==t.G()}t.rotate=function(t,e){if(void 0!==e){var i,n=this.aa();void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Mt(i,t-this.N()),_t(i,e));this.la(i)}this.set("rotation",t)};t.la=function(t){this.set("center",t)};function Qe(t,e){t.b[1]+=e}t.Pa=function(t){this.set("resolution",t)};t.he=function(t){t=this.constrainResolution(this.c,t-this.h,0);this.Pa(t)};function ti(t){return 1-Math.pow(1-t,3)}function ei(t){return 3*t*t-2*t*t*t}function ii(t){return t}function ni(t){var e=t.source,i=t.start?t.start:Date.now(),n=e[0],s=e[1],o=void 0!==t.duration?t.duration:1e3,r=t.easing?t.easing:ei;return function(t,e){if(e.time<i)return e.animate=!0,e.viewHints[0]+=1,!0;if(e.time<i+o){var a=1-r((e.time-i)/o),h=n-e.viewState.center[0],l=s-e.viewState.center[1];e.animate=!0;e.viewState.center[0]+=a*h;e.viewState.center[1]+=a*l;e.viewHints[0]+=1;return!0}return!1}}function si(t){var e=t.rotation?t.rotation:0,i=t.start?t.start:Date.now(),n=void 0!==t.duration?t.duration:1e3,s=t.easing?t.easing:ei,o=t.anchor?t.anchor:null;return function(t,r){if(r.time<i)return r.animate=!0,r.viewHints[0]+=1,!0;if(r.time<i+n){var a=1-s((r.time-i)/n),a=(e-r.viewState.rotation)*a;r.animate=!0;r.viewState.rotation+=a;if(o){var h=r.viewState.center;h[0]-=o[0];h[1]-=o[1];Mt(h,a);_t(h,o)}r.viewHints[0]+=1;return!0}return!1}}function oi(t){var e=t.resolution,i=t.start?t.start:Date.now(),n=void 0!==t.duration?t.duration:1e3,s=t.easing?t.easing:ei;return function(t,o){if(o.time<i)return o.animate=!0,o.viewHints[0]+=1,!0;if(o.time<i+n){var r=1-s((o.time-i)/n),a=e-o.viewState.resolution;o.animate=!0;o.viewState.resolution+=r*a;o.viewHints[0]+=1;return!0}return!1}}function ri(t,e,i,n){this.a=t;this.f=e;this.b=i;this.g=n}function ai(t,e,i){return t.a<=e&&e<=t.f&&t.b<=i&&i<=t.g}function hi(t,e){return t.a==e.a&&t.b==e.b&&t.f==e.f&&t.g==e.g}ri.prototype.ga=function(){return this.f-this.a+1};function li(t,e){return t.a<=e.f&&t.f>=e.a&&t.b<=e.g&&t.g>=e.b}function ui(t){this.b=t.html;this.a=t.tileRanges?t.tileRanges:null}function ci(t,e,i){tt.call(this,t,i);this.element=e}g(ci,tt);function fi(t){at.call(this);this.a=t?t:[];pi(this)}g(fi,at);t=fi.prototype;t.clear=function(){for(;0<this.get("length");)this.pop()};t.forEach=function(t,e){this.a.forEach(t,e)};t.Hd=function(){return this.a};t.item=function(t){return this.a[t]};t.pop=function(){return di(this,this.get("length")-1)};t.push=function(t){var e=this.a.length;this.a.splice(e,0,t);pi(this);nt(this,new ci("add",t,this));return e};t.remove=function(t){var e=this.a,i,n;i=0;for(n=e.length;i<n;++i)if(e[i]===t)return di(this,i)};function di(t,e){var i=t.a[e];t.a.splice(e,1);pi(t);nt(t,new ci("remove",i,t));return i}function pi(t){t.set("length",t.a.length)}var vi=Array.prototype.forEach?function(t,e,i){Array.prototype.forEach.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=o(t)?t.split(""):t,r=0;r<n;r++)r in s&&e.call(i,s[r],r,t)};function gi(t){var e=t.length;if(0<e){for(var i=Array(e),n=0;n<e;n++)i[n]=t[n];return i}return[]}function mi(t,e,i){return 2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,i)}function bi(t){if("string"!==typeof t){var e=t[0];e!=(e|0)&&(e=e+.5|0);var i=t[1];i!=(i|0)&&(i=i+.5|0);var n=t[2];n!=(n|0)&&(n=n+.5|0);t="rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}return t}function yi(t){return"string"===typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient?t:bi(t)}var xi;t:{var wi=e.navigator;if(wi){var _i=wi.userAgent;if(_i){xi=_i;break t}}xi=""}function Mi(t){return-1!=xi.indexOf(t)}function Si(t,e){for(var i in t)e.call(void 0,t[i],i,t)}var Ei="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ti(t,e){for(var i,n,s=1;s<arguments.length;s++){n=arguments[s];for(i in n)t[i]=n[i];for(var o=0;o<Ei.length;o++)i=Ei[o],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}var Ci=Mi("Opera"),Ii=Mi("Trident")||Mi("MSIE"),Ai=Mi("Edge"),Pi=Mi("Gecko")&&!(-1!=xi.toLowerCase().indexOf("webkit")&&!Mi("Edge"))&&!(Mi("Trident")||Mi("MSIE"))&&!Mi("Edge"),Fi=-1!=xi.toLowerCase().indexOf("webkit")&&!Mi("Edge");function Di(){var t=e.document;return t?t.documentMode:void 0}var ki;t:{var Ri="",Li=function(){var t=xi;if(Pi)return/rv\:([^\);]+)(\)|;)/.exec(t);if(Ai)return/Edge\/([\d\.]+)/.exec(t);if(Ii)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Fi)return/WebKit\/(\S+)/.exec(t);if(Ci)return/(?:Version)[ \/]?(\S+)/.exec(t)}();Li&&(Ri=Li?Li[1]:"");if(Ii){var zi=Di();if(null!=zi&&zi>parseFloat(Ri)){ki=String(zi);break t}}ki=Ri}var Ui={};function Oi(t){var e;if(!(e=Ui[t])){e=0;for(var i=w(String(ki)).split("."),n=w(String(t)).split("."),s=Math.max(i.length,n.length),o=0;0==e&&o<s;o++){var r=i[o]||"",a=n[o]||"",h=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var u=h.exec(r)||["","",""],c=l.exec(a)||["","",""];if(0==u[0].length&&0==c[0].length)break;e=P(0==u[1].length?0:parseInt(u[1],10),0==c[1].length?0:parseInt(c[1],10))||P(0==u[2].length,0==c[2].length)||P(u[2],c[2])}while(0==e)}e=Ui[t]=0<=e}return e}var Ni=e.document,ji=Ni&&Ii?Di()||("CSS1Compat"==Ni.compatMode?parseInt(ki,10):5):void 0;var Vi=!Ii||9<=Number(ji);!Pi&&!Ii||Ii&&9<=Number(ji)||Pi&&Oi("1.9.1");Ii&&Oi("9");function Wi(t,e){this.x=void 0!==t?t:0;this.y=void 0!==e?e:0}t=Wi.prototype;t.clone=function(){return new Wi(this.x,this.y)};t.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};t.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};t.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};t.scale=function(t,e){var i=r(e)?e:t;this.x*=t;this.y*=i;return this};function Bi(t,e){this.width=t;this.height=e}t=Bi.prototype;t.clone=function(){return new Bi(this.width,this.height)};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};t.scale=function(t,e){var i=r(e)?e:t;this.width*=t;this.height*=i;return this};function $i(t){return t?new en(Qi(t)):x||(x=new en)}function Hi(t){var e=document;return o(t)?e.getElementById(t):t}function Xi(t,e){Si(e,(function(e,i){"style"==i?t.style.cssText=e:"class"==i?t.className=e:"for"==i?t.htmlFor=e:Gi.hasOwnProperty(i)?t.setAttribute(Gi[i],e):0==i.lastIndexOf("aria-",0)||0==i.lastIndexOf("data-",0)?t.setAttribute(i,e):t[i]=e}))}var Gi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Yi(t,e,i){var s=arguments,r=document,a=s[0],h=s[1];if(!Vi&&h&&(h.name||h.type)){a=["<",a];h.name&&a.push(' name="',_(h.name),'"');if(h.type){a.push(' type="',_(h.type),'"');var l={};Ti(l,h);delete l.type;h=l}a.push(">");a=a.join("")}a=r.createElement(a);h&&(o(h)?a.className=h:"array"==n(h)?a.className=h.join(" "):Xi(a,h));2<s.length&&qi(r,a,s);return a}function qi(t,e,i){function n(i){i&&e.appendChild(o(i)?t.createTextNode(i):i)}for(var r=2;r<i.length;r++){var a=i[r];!s(a)||h(a)&&0<a.nodeType?n(a):vi(tn(a)?gi(a):a,n)}}function Zi(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ji(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function Ki(t,e){if(!t||!e)return!1;if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if("undefined"!=typeof t.compareDocumentPosition)return t==e||!!(t.compareDocumentPosition(e)&16);for(;e&&t!=e;)e=e.parentNode;return e==t}function Qi(t){return 9==t.nodeType?t:t.ownerDocument||t.document}function tn(t){if(t&&"number"==typeof t.length){if(h(t))return"function"==typeof t.item||"string"==typeof t.item;if(a(t))return"function"==typeof t.item}return!1}function en(t){this.a=t||e.document||document}en.prototype.appendChild=function(t,e){t.appendChild(e)};function nn(t,e,i,n){this.top=t;this.right=e;this.bottom=i;this.left=n}t=nn.prototype;t.ga=function(){return this.right-this.left};t.clone=function(){return new nn(this.top,this.right,this.bottom,this.left)};t.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};t.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};t.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};t.scale=function(t,e){var i=r(e)?e:t;this.left*=t;this.right*=t;this.top*=i;this.bottom*=i;return this};function sn(t,e){var i=Qi(t);return i.defaultView&&i.defaultView.getComputedStyle&&(i=i.defaultView.getComputedStyle(t,null))?i[e]||i.getPropertyValue(e)||"":""}function on(t){var e;try{e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}Ii&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop);return e}function rn(t){var e=an;if("none"!=(sn(t,"display")||(t.currentStyle?t.currentStyle.display:null)||t.style&&t.style.display))return e(t);var i=t.style,n=i.display,s=i.visibility,o=i.position;i.visibility="hidden";i.position="absolute";i.display="inline";t=e(t);i.display=n;i.position=o;i.visibility=s;return t}function an(t){var e=t.offsetWidth,i=t.offsetHeight,n=Fi&&!e&&!i;return(void 0===e||n)&&t.getBoundingClientRect?(t=on(t),new Bi(t.right-t.left,t.bottom-t.top)):new Bi(e,i)}function hn(t,e){t.style.display=e?"":"none"}function ln(t,e,i,n){if(/^\d+px?$/.test(e))return parseInt(e,10);var s=t.style[i],o=t.runtimeStyle[i];t.runtimeStyle[i]=t.currentStyle[i];t.style[i]=e;e=t.style[n];t.style[i]=s;t.runtimeStyle[i]=o;return e}function un(t,e){var i=t.currentStyle?t.currentStyle[e]:null;return i?ln(t,i,"left","pixelLeft"):0}var cn={thin:2,medium:4,thick:6};function fn(t,e){if("none"==(t.currentStyle?t.currentStyle[e+"Style"]:null))return 0;var i=t.currentStyle?t.currentStyle[e+"Width"]:null;return i in cn?cn[i]:ln(t,i,"left","pixelLeft")}function dn(t,e,i){tt.call(this,t);this.map=e;this.frameState=void 0!==i?i:null}g(dn,tt);function pn(t){at.call(this);this.element=t.element?t.element:null;this.a=this.w=null;this.h=[];this.render=t.render?t.render:b;t.target&&(this.w=Hi(t.target))}g(pn,at);pn.prototype.L=function(){Zi(this.element);pn.R.L.call(this)};pn.prototype.setMap=function(t){this.a&&Zi(this.element);for(var e=0,i=this.h.length;e<i;++e)Z(this.h[e]);this.h.length=0;if(this.a=t)(this.w?this.w:t.l).appendChild(this.element),this.render!==b&&this.h.push(G(t,"postrender",this.render,this)),t.render()};function vn(){this.f=0;this.g={};this.b=this.a=null}t=vn.prototype;t.clear=function(){this.f=0;this.g={};this.b=this.a=null};function gn(t,e){return t.g.hasOwnProperty(e)}function mn(t,e){for(var i=t.a;i;)e.call(void 0,i.Ia,i.Ba,t),i=i.ka}t.get=function(t){t=this.g[t];if(t===this.b)return t.Ia;t===this.a?(this.a=this.a.ka,this.a.Oa=null):(t.ka.Oa=t.Oa,t.Oa.ka=t.ka);t.ka=null;t.Oa=this.b;this.b=this.b.ka=t;return t.Ia};t.pop=function(){var t=this.a;delete this.g[t.Ba];t.ka&&(t.ka.Oa=null);this.a=t.ka;this.a||(this.b=null);--this.f;return t.Ia};t.replace=function(t,e){this.get(t);this.g[t].Ia=e};t.set=function(t,e){var i={Ba:t,ka:null,Oa:this.b,Ia:e};this.b?this.b.ka=i:this.a=i;this.b=i;this.g[t]=i;++this.f};function bn(t){vn.call(this);this.c=void 0!==t?t:2048}g(bn,vn);function yn(t){return t.f>t.c}bn.prototype.Ka=function(t){for(var e,i;yn(this);){e=this.a.Ia;i=e.V[0].toString();var n;if(n=i in t)e=e.V,n=ai(t[i],e[1],e[2]);if(n)break;else Q(this.pop())}};function xn(t,e){it.call(this);this.V=t;this.state=e;this.a=null;this.key=""}g(xn,it);function wn(t){nt(t,"change")}xn.prototype.getKey=function(){return l(this).toString()};xn.prototype.I=function(){return this.state};function _n(t,e){if(Array.isArray(t))return t;void 0===e?e=[t,t]:(e[0]=t,e[1]=t);return e}function Mn(t){at.call(this);this.c=re(t.projection);this.o=Sn(t.attributions);this.D=t.logo;this.J=void 0!==t.state?t.state:"ready";this.s=void 0!==t.wrapX?t.wrapX:!1}g(Mn,at);function Sn(t){if("string"===typeof t)return[new ui({html:t})];if(t instanceof ui)return[t];if(Array.isArray(t)){for(var e=t.length,i=Array(e),n=0;n<e;n++){var s=t[n];i[n]="string"===typeof s?new ui({html:s}):s}return i}return null}Mn.prototype.Z=b;Mn.prototype.O=function(){return this.c};Mn.prototype.I=function(){return this.J};function En(t){this.minZoom=void 0!==t.minZoom?t.minZoom:0;this.f=t.resolutions;this.maxZoom=this.f.length-1;this.b=void 0!==t.origin?t.origin:null;this.c=null;void 0!==t.origins&&(this.c=t.origins);var e=t.extent;void 0===e||this.b||this.c||(this.b=jt(e));this.h=null;void 0!==t.tileSizes&&(this.h=t.tileSizes);this.i=void 0!==t.tileSize?t.tileSize:this.h?null:256;this.j=void 0!==e?e:null;this.a=null;this.g=[0,0];void 0!==t.sizes?this.a=t.sizes.map((function(t){return new ri(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):e&&Un(this,e)}var Tn=[0,0,0];function Cn(t,e,i,n,s){s=Dn(t,e,s);for(e=e[0]-1;e>=t.minZoom;){if(i.call(null,e,Pn(t,s,e,n)))return!0;--e}return!1}En.prototype.B=function(){return this.j};En.prototype.ua=function(t){return this.b?this.b:this.c[t]};En.prototype.G=function(t){return this.f[t]};function In(t,e,i,n){return e[0]<t.maxZoom?(n=Dn(t,e,n),Pn(t,n,e[0]+1,i)):null}function An(t,e,i,n){kn(t,e[0],e[1],i,!1,Tn);var s=Tn[1],o=Tn[2];kn(t,e[2],e[3],i,!0,Tn);t=Tn[1];e=Tn[2];void 0!==n?(n.a=s,n.f=t,n.b=o,n.g=e):n=new ri(s,t,o,e);return n}function Pn(t,e,i,n){i=t.G(i);return An(t,e,i,n)}function Fn(t,e){var i=t.ua(e[0]),n=t.G(e[0]),s=_n(Ln(t,e[0]),t.g);return[i[0]+(e[1]+.5)*s[0]*n,i[1]+(e[2]+.5)*s[1]*n]}function Dn(t,e,i){var n=t.ua(e[0]),s=t.G(e[0]);t=_n(Ln(t,e[0]),t.g);var o=n[0]+e[1]*t[0]*s;e=n[1]+e[2]*t[1]*s;return At(o,e,o+t[0]*s,e+t[1]*s,i)}function kn(t,e,i,n,s,o){var r=zn(t,n),a=n/t.G(r),h=t.ua(r);t=_n(Ln(t,r),t.g);e=a*Math.floor((e-h[0])/n+(s?.5:0))/t[0];i=a*Math.floor((i-h[1])/n+(s?0:.5))/t[1];s?(e=Math.ceil(e)-1,i=Math.ceil(i)-1):(e=Math.floor(e),i=Math.floor(i));s=e;void 0!==o?(o[0]=r,o[1]=s,o[2]=i):o=[r,s,i];return o}function Rn(t,e,i,n){i=t.G(i);return kn(t,e[0],e[1],i,!1,n)}function Ln(t,e){return t.i?t.i:t.h[e]}function zn(t,e,i){e=ct(t.f,e,i||0);return F(e,t.minZoom,t.maxZoom)}function Un(t,e){for(var i=t.f.length,n=Array(i),s=t.minZoom;s<i;++s)n[s]=Pn(t,e,s);t.a=n}function On(t){var e=t.c;if(!e){for(var e=Nn(t),i=_n(256),i=Math.max(Vt(e)/i[0],Ot(e)/i[1]),n=Array(43),s=0;43>s;++s)n[s]=i/Math.pow(2,s);e=new En({extent:e,origin:jt(e),resolutions:n,tileSize:void 0});t.c=e}return e}function Nn(t){t=re(t);var e=t.B();e||(t=180*Zt.degrees/Kt(t),e=At(-t,-t,t,t));return e}function jn(t){Mn.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX});this.v=void 0!==t.opaque?t.opaque:!1;this.j=void 0!==t.tilePixelRatio?t.tilePixelRatio:1;this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.a=new bn(t.cacheSize);this.l=[0,0];this.Ba=""}g(jn,Mn);t=jn.prototype;t.sc=function(){return yn(this.a)};t.Ka=function(t,e){var i=this.ab(t);i&&i.Ka(e)};function Vn(t,e,i,n,s){e=t.ab(e);if(!e)return!1;for(var o=!0,r,a,h=n.a;h<=n.f;++h)for(var l=n.b;l<=n.g;++l)r=t.jb(i,h,l),a=!1,gn(e,r)&&(r=e.get(r),(a=2===r.I())&&(a=!1!==s(r))),a||(o=!1);return o}t.Fb=function(){return 0};t.getKey=function(){return this.Ba};t.jb=function(t,e,i){return t+"/"+e+"/"+i};t.Hb=function(){return this.v};t.qa=function(t){return this.tileGrid?this.tileGrid:On(t)};t.ab=function(t){var e=this.c;return e&&!ae(e,t)?null:this.a};function Wn(t,e,i){var n=t.qa(i);i=t.j;e=_n(Ln(n,e),t.l);1==i?t=e:(t=t.l,void 0===t&&(t=[0,0]),t[0]=e[0]*i+.5|0,t[1]=e[1]*i+.5|0);return t}function Bn(t,e,i){var n=void 0!==i?i:t.c;i=t.qa(n);if(t.s&&n.f){var s=e;e=s[0];t=Fn(i,s);var n=Nn(n),o=t[0],r=t[1];n[0]<=o&&o<=n[2]&&n[1]<=r&&r<=n[3]?e=s:(s=Vt(n),t[0]+=s*Math.ceil((n[0]-t[0])/s),e=Rn(i,t,e))}n=e[0];t=e[1];s=e[2];i=i.minZoom>n||n>i.maxZoom?!1:(i=(o=i.B())?Pn(i,o,n):i.a?i.a[n]:null)?ai(i,t,s):!0;return i?e:null}t.zc=b;function $n(t,e){tt.call(this,t);this.tile=e}g($n,tt);function Hn(t){t=t?t:{};this.s=document.createElement("UL");this.j=document.createElement("LI");this.s.appendChild(this.j);hn(this.j,!1);this.i=void 0!==t.collapsed?t.collapsed:!0;this.l=void 0!==t.collapsible?t.collapsible:!0;this.l||(this.i=!1);var e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.collapseLabel?t.collapseLabel:"»";this.u="string"===typeof n?Yi("SPAN",{},n):n;n=void 0!==t.label?t.label:"i";this.v="string"===typeof n?Yi("SPAN",{},n):n;i=Yi("BUTTON",{type:"button",title:i},this.l&&!this.i?this.u:this.v);G(i,"click",this.J,this);e=Yi("DIV",e+" ol-unselectable ol-control"+(this.i&&this.l?" ol-collapsed":"")+(this.l?"":" ol-uncollapsible"),this.s,i);pn.call(this,{element:e,render:t.render?t.render:Xn,target:t.target});this.o=!0;this.c={};this.b={};this.D={}}g(Hn,pn);function Xn(t){if(t=t.frameState){var e,i,n,s,o,r,a,h,u,c,f,d=t.layerStatesArray,p=U({},t.attributions),v={},g=t.viewState.projection;i=0;for(e=d.length;i<e;i++)if(r=d[i].layer.T())if(c=l(r).toString(),u=r.o)for(n=0,s=u.length;n<s;n++)if(a=u[n],h=l(a).toString(),!(h in p)){if(o=t.usedTiles[c]){var m=r.qa(g);t:{f=a;var b=g;if(f.a){var y,x,w,_=void 0;for(_ in o)if(_ in f.a){w=o[_];var M;y=0;for(x=f.a[_].length;y<x;++y){M=f.a[_][y];if(li(M,w)){f=!0;break t}var S=Pn(m,Nn(b),parseInt(_,10)),E=S.ga();if(w.a<S.a||w.f>S.f)if(li(M,new ri(k(w.a,E),k(w.f,E),w.b,w.g))||w.ga()>E&&li(M,S)){f=!0;break t}}}f=!1}else f=!0}}else f=!1;f?(h in v&&delete v[h],p[h]=a):v[h]=a}e=[p,v];i=e[0];e=e[1];for(var T in this.c)T in i?(this.b[T]||(hn(this.c[T],!0),this.b[T]=!0),delete i[T]):T in e?(this.b[T]&&(hn(this.c[T],!1),delete this.b[T]),delete e[T]):(Zi(this.c[T]),delete this.c[T],delete this.b[T]);for(T in i)n=document.createElement("LI"),n.innerHTML=i[T].b,this.s.appendChild(n),this.c[T]=n,this.b[T]=!0;for(T in e)n=document.createElement("LI"),n.innerHTML=e[T].b,hn(n,!1),this.s.appendChild(n),this.c[T]=n;T=!j(this.b)||!j(t.logos);this.o!=T&&(hn(this.element,T),this.o=T);T&&j(this.b)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var C;t=t.logos;T=this.D;for(C in T)C in t||(Zi(T[C]),delete T[C]);for(var I in t)i=t[I],i instanceof HTMLElement&&(this.j.appendChild(i),T[I]=i),I in T||(C=new Image,C.src=I,""===i?i=C:(i=Yi("A",{href:i}),i.appendChild(C)),this.j.appendChild(i),T[I]=i);hn(this.j,!j(t))}else this.o&&(hn(this.element,!1),this.o=!1)}Hn.prototype.J=function(t){t.preventDefault();this.element.classList.toggle("ol-collapsed");this.i?Ji(this.u,this.v):Ji(this.v,this.u);this.i=!this.i};function Gn(t){t=t?t:{};var e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧";this.b=null;"string"===typeof i?this.b=Yi("SPAN","ol-compass",i):(this.b=i,this.b.classList.add("ol-compass"));i=Yi("BUTTON",{class:e+"-reset",type:"button",title:t.tipLabel?t.tipLabel:"Reset rotation"},this.b);G(i,"click",Gn.prototype.o,this);e=Yi("DIV",e+" ol-unselectable ol-control",i);i=t.render?t.render:Yn;this.i=t.resetNorth?t.resetNorth:void 0;pn.call(this,{element:e,render:i,target:t.target});this.j=void 0!==t.duration?t.duration:250;this.c=void 0!==t.autoHide?t.autoHide:!0;this.l=void 0;this.c&&this.element.classList.add("ol-hidden")}g(Gn,pn);Gn.prototype.o=function(t){t.preventDefault();if(void 0!==this.i)this.i();else{t=this.a;var e=t.C();if(e){var i=e.N();void 0!==i&&(0<this.j&&(i%=2*Math.PI,i<-Math.PI&&(i+=2*Math.PI),i>Math.PI&&(i-=2*Math.PI),t.ea(si({rotation:i,duration:this.j,easing:ti}))),e.set("rotation",0))}}};function Yn(t){if(t=t.frameState){t=t.viewState.rotation;if(t!=this.l){var e="rotate("+t+"rad)";if(this.c){var i=this.element.classList.contains("ol-hidden");i||0!==t?i&&0!==t&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.b.style.msTransform=e;this.b.style.webkitTransform=e;this.b.style.transform=e}this.l=t}}function qn(t){t=t?t:{};var e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",s=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",o=Yi("BUTTON",{class:e+"-in",type:"button",title:void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in"},void 0!==t.zoomInLabel?t.zoomInLabel:"+");G(o,"click",qn.prototype.c.bind(this,i));n=Yi("BUTTON",{class:e+"-out",type:"button",title:s},n);G(n,"click",qn.prototype.c.bind(this,-i));e=Yi("DIV",e+" ol-unselectable ol-control",o,n);pn.call(this,{element:e,target:t.target});this.b=void 0!==t.duration?t.duration:250}g(qn,pn);qn.prototype.c=function(t,e){e.preventDefault();var i=this.a,n=i.C();if(n){var s=n.G();s&&(0<this.b&&i.ea(oi({resolution:s,duration:this.b,easing:ti})),i=n.constrainResolution(s,t),n.Pa(i))}};function Zn(t){t=t?t:{};var e=document.createElement("DIV");e.className=void 0!==t.className?t.className:"ol-mouse-position";pn.call(this,{element:e,render:t.render?t.render:Jn,target:t.target});G(this,lt("projection"),this.s,this);t.coordinateFormat&&this.set("coordinateFormat",t.coordinateFormat);if(t.projection){var i=re(t.projection);this.set("projection",i)}this.u=void 0!==t.undefinedHTML?t.undefinedHTML:"";this.j=e.innerHTML;this.i=this.c=this.b=null}g(Zn,pn);function Jn(t){t=t.frameState;t?this.b!=t.viewState.projection&&(this.b=t.viewState.projection,this.c=null):this.b=null;Kn(this,this.i)}Zn.prototype.s=function(){this.c=null};Zn.prototype.l=function(t){this.i=Yl(this.a,t);Kn(this,this.i)};Zn.prototype.o=function(){Kn(this,null);this.i=null};Zn.prototype.setMap=function(t){Zn.R.setMap.call(this,t);t&&(t=t.a,this.h.push(G(t,"mousemove",this.l,this),G(t,"mouseout",this.o,this)))};function Kn(t,e){var i=t.u;if(e&&t.b){if(!t.c){var n=t.get("projection");t.c=n?le(t.b,n):ue}if(n=t.a.pa(e))t.c(n,n),i=(i=t.get("coordinateFormat"))?i(n):n.toString()}t.j&&i==t.j||(t.element.innerHTML=i,t.j=i)}var Qn;function ts(){var t=e.MessageChannel;"undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Mi("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none";t.src="";document.documentElement.appendChild(t);var e=t.contentWindow,t=e.document;t.open();t.write("");t.close();var i="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host,t=p((function(t){if(("*"==n||t.origin==n)&&t.data==i)this.port1.onmessage()}),this);e.addEventListener("message",t,!1);this.port1={};this.port2={postMessage:function(){e.postMessage(i,n)}}});if("undefined"!==typeof t&&!Mi("Trident")&&!Mi("MSIE")){var i=new t,n={},s=n;i.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Yb;n.Yb=null;t()}};return function(t){s.next={Yb:t};s=s.next;i.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null;e.parentNode.removeChild(e);e=null;t();t=null};document.documentElement.appendChild(e)}:function(t){e.setTimeout(t,0)}}function es(t,e,i){tt.call(this,t);this.a=e;t=i?i:{};this.buttons=is(t);this.pressure=ns(t,this.buttons);this.bubbles="bubbles"in t?t.bubbles:!1;this.cancelable="cancelable"in t?t.cancelable:!1;this.view="view"in t?t.view:null;this.detail="detail"in t?t.detail:null;this.screenX="screenX"in t?t.screenX:0;this.screenY="screenY"in t?t.screenY:0;this.clientX="clientX"in t?t.clientX:0;this.clientY="clientY"in t?t.clientY:0;this.button="button"in t?t.button:0;this.relatedTarget="relatedTarget"in t?t.relatedTarget:null;this.pointerId="pointerId"in t?t.pointerId:0;this.width="width"in t?t.width:0;this.height="height"in t?t.height:0;this.pointerType="pointerType"in t?t.pointerType:"";this.isPrimary="isPrimary"in t?t.isPrimary:!1;e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}g(es,tt);function is(t){if(t.buttons||ss)t=t.buttons;else switch(t.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t}function ns(t,e){var i=0;t.pressure?i=t.pressure:i=e?.5:0;return i}var ss=!1;try{ss=1===new MouseEvent("click",{buttons:1}).buttons}catch(t){}function os(t,e){var i=document.createElement("CANVAS");t&&(i.width=t);e&&(i.height=e);return i.getContext("2d")}var rs=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function as(t,e){var i,n,s=rs.length;for(n=0;n<s;++n)try{if(i=t.getContext(rs[n],e))return i}catch(t){}return null}var hs,ls="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",us=-1!==ls.indexOf("firefox"),cs=-1!==ls.indexOf("safari")&&-1===ls.indexOf("chrom"),fs=-1!==ls.indexOf("macintosh"),ds=y.devicePixelRatio||1,ps=!1,vs=function(){if(!("HTMLCanvasElement"in y))return!1;try{var t=os();return t?(void 0!==t.setLineDash&&(ps=!0),!0):!1}catch(t){return!1}}(),gs="ontouchstart"in y,ms="PointerEvent"in y,bs=!!y.navigator.msPointerEnabled,ys=!1,xs=[];if("WebGLRenderingContext"in y)try{var ws=as(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});ws&&(ys=!0,xs=ws.getSupportedExtensions())}catch(t){}hs=ys;m=xs;function _s(t,e){this.a=t;this.c=e}function Ms(t){_s.call(this,t,{mousedown:this.td,mousemove:this.ud,mouseup:this.xd,mouseover:this.wd,mouseout:this.vd});this.b=t.b;this.f=[]}g(Ms,_s);function Ss(t,e){for(var i=t.f,n=e.clientX,s=e.clientY,o=0,r=i.length,a;o<r&&(a=i[o]);o++){var h=Math.abs(s-a[1]);if(25>=Math.abs(n-a[0])&&25>=h)return!0}return!1}function Es(t){var e=Us(t,t),i=e.preventDefault;e.preventDefault=function(){t.preventDefault();i()};e.pointerId=1;e.isPrimary=!0;e.pointerType="mouse";return e}t=Ms.prototype;t.td=function(t){if(!Ss(this,t)){if(1..toString()in this.b){var e=Es(t);js(this.a,qs,e,t);delete this.b[1..toString()]}e=Es(t);this.b[1..toString()]=t;js(this.a,Bs,e,t)}};t.ud=function(t){if(!Ss(this,t)){var e=Es(t);js(this.a,Ws,e,t)}};t.xd=function(t){if(!Ss(this,t)){var e=this.b[1..toString()];e&&e.button===t.button&&(e=Es(t),js(this.a,$s,e,t),delete this.b[1..toString()])}};t.wd=function(t){if(!Ss(this,t)){var e=Es(t);Ns(this.a,e,t)}};t.vd=function(t){if(!Ss(this,t)){var e=Es(t);Os(this.a,e,t)}};function Ts(t){_s.call(this,t,{MSPointerDown:this.Cd,MSPointerMove:this.Dd,MSPointerUp:this.Gd,MSPointerOut:this.Ed,MSPointerOver:this.Fd,MSPointerCancel:this.Bd,MSGotPointerCapture:this.zd,MSLostPointerCapture:this.Ad});this.b=t.b;this.f=["","unavailable","touch","pen","mouse"]}g(Ts,_s);function Cs(t,e){var i=e;r(e.pointerType)&&(i=Us(e,e),i.pointerType=t.f[e.pointerType]);return i}t=Ts.prototype;t.Cd=function(t){this.b[t.pointerId.toString()]=t;var e=Cs(this,t);js(this.a,Bs,e,t)};t.Dd=function(t){var e=Cs(this,t);js(this.a,Ws,e,t)};t.Gd=function(t){var e=Cs(this,t);js(this.a,$s,e,t);delete this.b[t.pointerId.toString()]};t.Ed=function(t){var e=Cs(this,t);Os(this.a,e,t)};t.Fd=function(t){var e=Cs(this,t);Ns(this.a,e,t)};t.Bd=function(t){var e=Cs(this,t);js(this.a,qs,e,t);delete this.b[t.pointerId.toString()]};t.Ad=function(t){nt(this.a,new es("lostpointercapture",t,t))};t.zd=function(t){nt(this.a,new es("gotpointercapture",t,t))};function Is(t){_s.call(this,t,{pointerdown:this.Ud,pointermove:this.Vd,pointerup:this.Yd,pointerout:this.Wd,pointerover:this.Xd,pointercancel:this.Td,gotpointercapture:this.Wc,lostpointercapture:this.sd})}g(Is,_s);t=Is.prototype;t.Ud=function(t){Vs(this.a,t)};t.Vd=function(t){Vs(this.a,t)};t.Yd=function(t){Vs(this.a,t)};t.Wd=function(t){Vs(this.a,t)};t.Xd=function(t){Vs(this.a,t)};t.Td=function(t){Vs(this.a,t)};t.sd=function(t){Vs(this.a,t)};t.Wc=function(t){Vs(this.a,t)};function As(t,e){_s.call(this,t,{touchstart:this.le,touchmove:this.ke,touchend:this.je,touchcancel:this.ie});this.b=t.b;this.i=e;this.f=void 0;this.h=0;this.g=void 0}g(As,_s);t=As.prototype;t.wc=function(){this.h=0;this.g=void 0};function Ps(t,e,i){e=Us(e,i);e.pointerId=i.identifier+2;e.bubbles=!0;e.cancelable=!0;e.detail=t.h;e.button=0;e.buttons=1;e.width=i.webkitRadiusX||i.radiusX||0;e.height=i.webkitRadiusY||i.radiusY||0;e.pressure=i.webkitForce||i.force||.5;e.isPrimary=t.f===i.identifier;e.pointerType="touch";e.clientX=i.clientX;e.clientY=i.clientY;e.screenX=i.screenX;e.screenY=i.screenY;return e}function Fs(t,e,i){function n(){e.preventDefault()}var s=Array.prototype.slice.call(e.changedTouches),o=s.length,r,a;for(r=0;r<o;++r)a=Ps(t,e,s[r]),a.preventDefault=n,i.call(t,e,a)}t.le=function(t){var e=t.touches,i=Object.keys(this.b),n=i.length;if(n>=e.length){var s=[],o,r,a;for(o=0;o<n;++o){r=i[o];a=this.b[r];var h;if(!(h=1==r))t:{h=e.length;for(var l,u=0;u<h;u++)if(l=e[u],l.identifier===r-2){h=!0;break t}h=!1}h||s.push(a.out)}for(o=0;o<s.length;++o)this.Ab(t,s[o])}e=t.changedTouches[0];i=Object.keys(this.b).length;if(0===i||1===i&&1..toString()in this.b)this.f=e.identifier,void 0!==this.g&&y.clearTimeout(this.g);Ds(this,t);this.h++;Fs(this,t,this.Sd)};t.Sd=function(t,e){this.b[e.pointerId]={target:e.target,out:e,tc:e.target};var i=this.a;e.bubbles=!0;js(i,Hs,e,t);i=this.a;e.bubbles=!1;js(i,Gs,e,t);js(this.a,Bs,e,t)};t.ke=function(t){t.preventDefault();Fs(this,t,this.yd)};t.yd=function(t,e){var i=this.b[e.pointerId];if(i){var n=i.out,s=i.tc;js(this.a,Ws,e,t);n&&s!==e.target&&(n.relatedTarget=e.target,e.relatedTarget=s,n.target=s,e.target?(Os(this.a,n,t),Ns(this.a,e,t)):(e.target=s,e.relatedTarget=null,this.Ab(t,e)));i.out=e;i.tc=e.target}};t.je=function(t){Ds(this,t);Fs(this,t,this.ne)};t.ne=function(t,e){js(this.a,$s,e,t);this.a.out(e,t);var i=this.a;e.bubbles=!1;js(i,Ys,e,t);delete this.b[e.pointerId];e.isPrimary&&(this.f=void 0,this.g=y.setTimeout(this.wc.bind(this),200))};t.ie=function(t){Fs(this,t,this.Ab)};t.Ab=function(t,e){js(this.a,qs,e,t);this.a.out(e,t);var i=this.a;e.bubbles=!1;js(i,Ys,e,t);delete this.b[e.pointerId];e.isPrimary&&(this.f=void 0,this.g=y.setTimeout(this.wc.bind(this),200))};function Ds(t,e){var i=t.i.f,n=e.changedTouches[0];if(t.f===n.identifier){var s=[n.clientX,n.clientY];i.push(s);y.setTimeout((function(){dt(i,s)}),2500)}}function ks(t){it.call(this);this.c=t;this.b={};this.g={};this.a=[];ms?Rs(this,new Is(this)):bs?Rs(this,new Ts(this)):(t=new Ms(this),Rs(this,t),gs&&Rs(this,new As(this,t)));t=this.a.length;for(var e,i=0;i<t;i++)e=this.a[i],Ls(this,Object.keys(e.c))}g(ks,it);function Rs(t,e){var i=Object.keys(e.c);i&&(i.forEach((function(t){var i=e.c[t];i&&(this.g[t]=i.bind(e))}),t),t.a.push(e))}ks.prototype.f=function(t){var e=this.g[t.type];e&&e(t)};function Ls(t,e){e.forEach((function(t){G(this.c,t,this.f,this)}),t)}function zs(t,e){e.forEach((function(t){q(this.c,t,this.f,this)}),t)}function Us(t,e){for(var i={},n,s=0,o=Zs.length;s<o;s++)n=Zs[s][0],i[n]=t[n]||e[n]||Zs[s][1];return i}ks.prototype.out=function(t,e){t.bubbles=!0;js(this,Xs,t,e)};function Os(t,e,i){t.out(e,i);var n=e.relatedTarget;n&&Ki(e.target,n)||(e.bubbles=!1,js(t,Ys,e,i))}function Ns(t,e,i){e.bubbles=!0;js(t,Hs,e,i);var n=e.relatedTarget;n&&Ki(e.target,n)||(e.bubbles=!1,js(t,Gs,e,i))}function js(t,e,i,n){nt(t,new es(e,n,i))}function Vs(t,e){nt(t,new es(e.type,e,e))}ks.prototype.L=function(){for(var t=this.a.length,e,i=0;i<t;i++)e=this.a[i],zs(this,Object.keys(e.c));ks.R.L.call(this)};var Ws="pointermove",Bs="pointerdown",$s="pointerup",Hs="pointerover",Xs="pointerout",Gs="pointerenter",Ys="pointerleave",qs="pointercancel",Zs=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Js(t,e,i,n,s){dn.call(this,t,e,s);this.originalEvent=i;this.pixel=Yl(e,i);this.coordinate=e.pa(this.pixel);this.dragging=void 0!==n?n:!1}g(Js,dn);Js.prototype.preventDefault=function(){Js.R.preventDefault.call(this);this.originalEvent.preventDefault()};Js.prototype.stopPropagation=function(){Js.R.stopPropagation.call(this);this.originalEvent.stopPropagation()};function Ks(t,e,i,n,s){Js.call(this,t,e,i.a,n,s);this.a=i}g(Ks,Js);function Qs(t){it.call(this);this.f=t;this.h=0;this.i=!1;this.g=[];this.b=null;t=this.f.a;this.s=0;this.o={};this.c=new ks(t);this.a=null;this.j=G(this.c,Bs,this.hd,this);this.l=G(this.c,Ws,this.$d,this)}g(Qs,it);function to(t,e){var i;i=new Ks(no,t.f,e);nt(t,i);0!==t.h?(y.clearTimeout(t.h),t.h=0,i=new Ks(so,t.f,e),nt(t,i)):t.h=y.setTimeout(function(){this.h=0;var t=new Ks(io,this.f,e);nt(this,t)}.bind(t),250)}function eo(t,e){e.type==ho||e.type==lo?delete t.o[e.pointerId]:e.type==ao&&(t.o[e.pointerId]=!0);t.s=Object.keys(t.o).length}t=Qs.prototype;t.lc=function(t){eo(this,t);var e=new Ks(ho,this.f,t);nt(this,e);!this.i&&0===t.button&&to(this,this.b);0===this.s&&(this.g.forEach(Z),this.g.length=0,this.i=!1,this.b=null,Q(this.a),this.a=null)};t.hd=function(t){eo(this,t);var e=new Ks(ao,this.f,t);nt(this,e);this.b=t;0===this.g.length&&(this.a=new ks(document),this.g.push(G(this.a,ro,this.Kd,this),G(this.a,ho,this.lc,this),G(this.c,lo,this.lc,this)))};t.Kd=function(t){if(t.clientX!=this.b.clientX||t.clientY!=this.b.clientY){this.i=!0;var e=new Ks(oo,this.f,t,this.i);nt(this,e)}t.preventDefault()};t.$d=function(t){nt(this,new Ks(t.type,this.f,t,!(!this.b||t.clientX==this.b.clientX&&t.clientY==this.b.clientY)))};t.L=function(){this.l&&(Z(this.l),this.l=null);this.j&&(Z(this.j),this.j=null);this.g.forEach(Z);this.g.length=0;this.a&&(Q(this.a),this.a=null);this.c&&(Q(this.c),this.c=null);Qs.R.L.call(this)};var io="singleclick",no="click",so="dblclick",oo="pointerdrag",ro="pointermove",ao="pointerdown",ho="pointerup",lo="pointercancel",uo={ze:io,oe:no,pe:so,se:oo,ve:ro,re:ao,ye:ho,xe:"pointerover",we:"pointerout",te:"pointerenter",ue:"pointerleave",qe:lo};function co(t){at.call(this);var e=U({},t);e.opacity=void 0!==t.opacity?t.opacity:1;e.visible=void 0!==t.visible?t.visible:!0;e.zIndex=void 0!==t.zIndex?t.zIndex:0;e.maxResolution=void 0!==t.maxResolution?t.maxResolution:Infinity;e.minResolution=void 0!==t.minResolution?t.minResolution:0;this.F(e)}g(co,at);function fo(t){var e=t.get("opacity"),i=t.Ib(),n=t.get("visible"),s=t.B(),o=t.get("zIndex"),r=t.get("maxResolution"),a=t.get("minResolution");return{layer:t,opacity:F(e,0,1),xc:i,visible:n,nb:!0,extent:s,zIndex:o,maxResolution:r,minResolution:Math.max(a,0)}}co.prototype.B=function(){return this.get("extent")};function po(){}function vo(t,e,i,n,s,o){tt.call(this,t,e);this.vectorContext=i;this.frameState=n;this.context=s;this.glContext=o}g(vo,tt);function go(t){var e=U({},t);delete e.source;co.call(this,e);this.h=this.b=this.a=null;t.map&&this.setMap(t.map);G(this,lt("source"),this.nd,this);this.set("source",t.source?t.source:null)}g(go,co);function mo(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}t=go.prototype;t.Gb=function(t){t=t?t:[];t.push(fo(this));return t};t.T=function(){return this.get("source")||null};t.Ib=function(){var t=this.T();return t?t.I():"undefined"};t.Ld=function(){this.f()};t.nd=function(){this.h&&(Z(this.h),this.h=null);var t=this.T();t&&(this.h=G(t,"change",this.Ld,this));this.f()};t.setMap=function(t){this.a&&(Z(this.a),this.a=null);t||this.f();this.b&&(Z(this.b),this.b=null);t&&(this.a=G(t,"precompose",(function(t){var e=fo(this);e.nb=!1;e.zIndex=Infinity;t.frameState.layerStatesArray.push(e);t.frameState.layerStates[l(this)]=e}),this),this.b=G(this,"change",t.render,t),this.f())};function bo(t,e,i,n,s){it.call(this);this.c=s;this.extent=t;this.h=i;this.resolution=e;this.state=n}g(bo,it);function yo(t){nt(t,"change")}bo.prototype.B=function(){return this.extent};bo.prototype.G=function(){return this.resolution};bo.prototype.I=function(){return this.state};function xo(t,e,i,n,s,o,r,a){ye(t);0===e&&0===i||we(t,e,i);1==n&&1==s||_e(t,n,s);0!==o&&Me(t,o);0===r&&0===a||we(t,r,a);return t}function wo(t,e,i){var n=t[1],s=t[5],o=t[13],r=e[0];e=e[1];i[0]=t[0]*r+t[4]*e+t[12];i[1]=n*r+s*e+o;return i}function _o(t){ot.call(this);this.a=t}g(_o,ot);_o.prototype.Z=b;_o.prototype.l=function(t,e,i){return function(n,s){return Vn(t,e,n,s,(function(t){i[n]||(i[n]={});i[n][t.V.toString()]=t}))}};_o.prototype.P=function(t){2===t.target.I()&&So(this)};function Mo(t,e){var i=e.I();2!=i&&3!=i&&G(e,"change",t.P,t);0==i&&(e.load(),i=e.I());return 2==i}function So(t){var e=t.a;e.get("visible")&&"ready"==e.Ib()&&t.f()}function Eo(t,e){e.sc()&&t.postRenderFunctions.push(function(t,e,i){e=l(t).toString();t.Ka(i.viewState.projection,i.usedTiles[e])}.bind(null,e))}function To(t,e){if(e){var i,n,s;n=0;for(s=e.length;n<s;++n)i=e[n],t[l(i).toString()]=i}}function Co(t,e){var i=e.D;void 0!==i&&("string"===typeof i?t.logos[i]="":h(i)&&(t.logos[i.src]=i.href))}function Io(t,e,i,n){e=l(e).toString();i=i.toString();e in t?i in t[e]?(t=t[e][i],n.a<t.a&&(t.a=n.a),n.f>t.f&&(t.f=n.f),n.b<t.b&&(t.b=n.b),n.g>t.g&&(t.g=n.g)):t[e][i]=n:(t[e]={},t[e][i]=n)}function Ao(t,e,i){return[e*(Math.round(t[0]/e)+i[0]%2/2),e*(Math.round(t[1]/e)+i[1]%2/2)]}function Po(t,e,i,n,s,o,r,a,h,u){var c=l(e).toString();c in t.wantedTiles||(t.wantedTiles[c]={});var f=t.wantedTiles[c];t=t.tileQueue;var d=i.minZoom,p,v,g,m,b,y;for(y=r;y>=d;--y)for(v=Pn(i,o,y,v),g=i.G(y),m=v.a;m<=v.f;++m)for(b=v.b;b<=v.g;++b)r-y<=a?(p=Xu(e,y,m,b,n,s),0==p.I()&&(f[p.V.toString()]=!0,p.getKey()in t.f||t.g([p,c,Fn(i,p.V),g])),void 0!==h&&h.call(u,p)):e.zc(y,m,b,s)}function Fo(t){this.l=t.opacity;this.A=t.rotateWithView;this.F=t.rotation;this.bb=t.scale;this.s=t.snapToPixel}Fo.prototype.N=function(){return this.F};function Do(){this.a={};this.b=0}i(Do);Do.prototype.clear=function(){this.a={};this.b=0};Do.prototype.get=function(t,e,i){t=e+":"+t+":"+(i?bi(i):"null");return t in this.a?this.a[t]:null};Do.prototype.set=function(t,e,i,n){this.a[e+":"+t+":"+(i?bi(i):"null")]=n;++this.b};function ko(t,e){this.j=e;this.f={};this.A={}}g(ko,K);function Ro(t){var e=t.viewState,i=t.coordinateToPixelMatrix;xo(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]);xe(i,t.pixelToCoordinateMatrix)}t=ko.prototype;t.L=function(){for(var t in this.f)Q(this.f[t])};function Lo(){var t=Do.za();if(32<t.b){var e=0,i,n;for(i in t.a)n=t.a[i],0!==(e++&3)||st(n)||(delete t.a[i],--t.b)}}t.Z=function(t,e,i,n,s,o){function r(t,s){var o=l(t).toString(),r=e.layerStates[l(s)].nb;if(!(o in e.skippedFeatureUids)||r)return i.call(n,t,r?s:null)}var a,h=e.viewState,u=h.resolution,c=h.projection,h=t;if(c.b){var c=c.B(),f=Vt(c),d=t[0];if(d<c[0]||d>c[2])h=[d+f*Math.ceil((c[0]-d)/f),t[1]]}c=e.layerStatesArray;for(f=c.length-1;0<=f;--f){var p=c[f],d=p.layer;if(mo(p,u)&&s.call(o,d)&&(p=zo(this,d),d.T()&&(a=p.Z(d.T().s?h:t,e,r,n)),a))return a}};function zo(t,e){var i=l(e).toString();if(i in t.f)return t.f[i];var n=t.Zb(e);t.f[i]=n;t.A[i]=G(n,"change",t.bd,t);return n}t.bd=function(){this.j.render()};t.Mb=b;t.ce=function(t,e){for(var i in this.f)if(!(e&&i in e.layerStates)){var n=i,s=this.f[n];delete this.f[n];Z(this.A[n]);delete this.A[n];Q(s)}};function Uo(t,e){for(var i in t.f)if(!(i in e.layerStates)){e.postRenderFunctions.push(t.ce.bind(t));break}}function Oo(t,e){return t.zIndex-e.zIndex}function No(t,e){this.l=t;this.i=e;this.a=[];this.b=[];this.f={}}No.prototype.clear=function(){this.a.length=0;this.b.length=0;O(this.f)};function jo(t){var e=t.a,i=t.b,n=e[0];1==e.length?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),Vo(t,0));e=t.i(n);delete t.f[e];return n}No.prototype.g=function(t){var e=this.l(t);return Infinity!=e?(this.a.push(t),this.b.push(e),this.f[this.i(t)]=!0,Wo(this,0,this.a.length-1),!0):!1};function Vo(t,e){for(var i=t.a,n=t.b,s=i.length,o=i[e],r=n[e],a=e;e<s>>1;){var h=2*e+1,l=2*e+2,h=l<s&&n[l]<n[h]?l:h;i[e]=i[h];n[e]=n[h];e=h}i[e]=o;n[e]=r;Wo(t,a,e)}function Wo(t,e,i){var n=t.a;t=t.b;for(var s=n[i],o=t[i];i>e;){var r=i-1>>1;if(t[r]>o)n[i]=n[r],t[i]=t[r],i=r;else break}n[i]=s;t[i]=o}function Bo(t){var e=t.l,i=t.a,n=t.b,s=0,o=i.length,r,a,h;for(a=0;a<o;++a)r=i[a],h=e(r),Infinity==h?delete t.f[t.i(r)]:(n[s]=h,i[s++]=r);i.length=s;n.length=s;for(e=(t.a.length>>1)-1;0<=e;e--)Vo(t,e)}function $o(t,e){No.call(this,(function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()}));this.A=e;this.h=0;this.c={}}g($o,No);$o.prototype.g=function(t){var e=$o.R.g.call(this,t);e&&G(t[0],"change",this.j,this);return e};$o.prototype.j=function(t){t=t.target;var e=t.I();if(2===e||3===e||4===e||5===e)q(t,"change",this.j,this),t=t.getKey(),t in this.c&&(delete this.c[t],--this.h),this.A()};function Ho(){this.a=[];this.b=this.f=0}function Xo(t,e){var i=t.b,n=.05-i,s=Math.log(.05/t.b)/-.005;return ni({source:e,duration:s,easing:function(t){return i*(Math.exp(-.005*t*s)-1)/n}})}function Go(t){at.call(this);this.P=null;this.set("active",!0);this.handleEvent=t.handleEvent}g(Go,at);Go.prototype.setMap=function(t){this.P=t};function Yo(t,e,i,n,s){if(void 0!==i){var o=e.N(),r=e.aa();void 0!==o&&r&&s&&0<s&&(t.ea(si({rotation:o,duration:s,easing:ti})),n&&t.ea(ni({source:r,duration:s,easing:ti})));e.rotate(i,n)}}function qo(t,e,i,n,s){var o=e.G();i=e.constrainResolution(o,i,0);Zo(t,e,i,n,s)}function Zo(t,e,i,n,s){if(i){var o=e.G(),r=e.aa();void 0!==o&&r&&i!==o&&s&&0<s&&(t.ea(oi({resolution:o,duration:s,easing:ti})),n&&t.ea(ni({source:r,duration:s,easing:ti})));if(n){var a;t=e.aa();s=e.G();void 0!==t&&void 0!==s&&(a=[n[0]-i*(n[0]-t[0])/s,n[1]-i*(n[1]-t[1])/s]);e.la(a)}e.Pa(i)}}function Jo(t){t=t?t:{};this.a=t.delta?t.delta:1;Go.call(this,{handleEvent:Ko});this.b=void 0!==t.duration?t.duration:250}g(Jo,Go);function Ko(t){var e=!1,i=t.originalEvent;if(t.type==so){var e=t.map,n=t.coordinate,i=i.shiftKey?-this.a:this.a,s=e.C();qo(e,s,i,n,this.b);t.preventDefault();e=!0}return!e}function Qo(t){t=t.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function tr(t){t=t.originalEvent;return 0==t.button&&!(Fi&&fs&&t.ctrlKey)}function er(t){t=t.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function ir(t){t=t.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function nr(t){t=t.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t}function sr(t){return"mouse"==t.a.pointerType}function or(t){t=t?t:{};Go.call(this,{handleEvent:t.handleEvent?t.handleEvent:ar});this.ub=t.handleDownEvent?t.handleDownEvent:Xt;this.vb=t.handleDragEvent?t.handleDragEvent:b;this.wb=t.handleMoveEvent?t.handleMoveEvent:b;this.sb=t.handleUpEvent?t.handleUpEvent:Xt;this.s=!1;this.J={};this.c=[]}g(or,Go);function rr(t){for(var e=t.length,i=0,n=0,s=0;s<e;s++)i+=t[s].clientX,n+=t[s].clientY;return[i/e,n/e]}function ar(t){if(!(t instanceof Ks))return!0;var e=!1,i=t.type;if(i===ao||i===oo||i===ho)i=t.a,t.type==ho?delete this.J[i.pointerId]:t.type==ao?this.J[i.pointerId]=i:i.pointerId in this.J&&(this.J[i.pointerId]=i),this.c=N(this.J);this.s&&(t.type==oo?this.vb(t):t.type==ho&&(this.s=this.sb(t)));t.type==ao?(this.s=t=this.ub(t),e=this.v(t)):t.type==ro&&this.wb(t);return!e}or.prototype.v=function(t){return t};function hr(t){or.call(this,{handleDownEvent:cr,handleDragEvent:lr,handleUpEvent:ur});t=t?t:{};this.a=t.kinetic;this.b=this.h=null;this.j=t.condition?t.condition:er;this.i=!1}g(hr,or);function lr(t){var e=rr(this.c);this.a&&this.a.a.push(e[0],e[1],Date.now());if(this.b){var i=this.b[0]-e[0],n=e[1]-this.b[1];t=t.map;var s=t.C(),o=s.I(),n=i=[i,n],r=o.resolution;n[0]*=r;n[1]*=r;Mt(i,o.rotation);_t(i,o.center);i=s.a.center(i);t.render();s.la(i)}this.b=e}function ur(t){t=t.map;var e=t.C();if(0===this.c.length){var i;if(i=!this.i&&this.a)if(i=this.a,6>i.a.length)i=!1;else{var n=Date.now()-100,s=i.a.length-3;if(i.a[s+2]<n)i=!1;else{for(var o=s-3;0<o&&i.a[o+2]>n;)o-=3;var n=i.a[s+2]-i.a[o+2],r=i.a[s]-i.a[o],s=i.a[s+1]-i.a[o+1];i.f=Math.atan2(s,r);i.b=Math.sqrt(r*r+s*s)/n;i=.05<i.b}}i&&(i=(.05-this.a.b)/-.005,s=this.a.f,o=e.aa(),this.h=Xo(this.a,o),t.ea(this.h),o=Zl(t,o),i=t.pa([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]),i=e.a.center(i),e.la(i));Qe(e,-1);t.render();return!1}this.b=null;return!0}function cr(t){if(0<this.c.length&&this.j(t)){var e=t.map,i=e.C();this.b=null;this.s||Qe(i,1);e.render();this.h&&dt(e.w,this.h)&&(i.la(t.frameState.viewState.center),this.h=null);this.a&&(t=this.a,t.a.length=0,t.f=0,t.b=0);this.i=1<this.c.length;return!0}return!1}hr.prototype.v=Xt;function fr(t){t=t?t:{};or.call(this,{handleDownEvent:vr,handleDragEvent:dr,handleUpEvent:pr});this.b=t.condition?t.condition:Qo;this.a=void 0;this.h=void 0!==t.duration?t.duration:250}g(fr,or);function dr(t){if(sr(t)){var e=t.map,i=e.ba();t=t.pixel;i=Math.atan2(i[1]/2-t[1],t[0]-i[0]/2);if(void 0!==this.a){t=i-this.a;var n=e.C(),s=n.N();e.render();Yo(e,n,s-t)}this.a=i}}function pr(t){if(!sr(t))return!0;t=t.map;var e=t.C();Qe(e,-1);var i=e.N(),n=this.h,i=e.constrainRotation(i,0);Yo(t,e,i,void 0,n);return!1}function vr(t){return sr(t)&&tr(t)&&this.b(t)?(t=t.map,Qe(t.C(),1),t.render(),this.a=void 0,!0):!1}fr.prototype.v=Xt;function gr(t){this.g=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+t;this.f=this.c=this.a=null}g(gr,K);gr.prototype.L=function(){this.setMap(null)};function mr(t){var e=t.c,i=t.f;t=t.b.style;t.left=Math.min(e[0],i[0])+"px";t.top=Math.min(e[1],i[1])+"px";t.width=Math.abs(i[0]-e[0])+"px";t.height=Math.abs(i[1]-e[1])+"px"}gr.prototype.setMap=function(t){if(this.a){this.a.o.removeChild(this.b);var e=this.b.style;e.left=e.top=e.width=e.height="inherit"}(this.a=t)&&this.a.o.appendChild(this.b)};function br(t){var e=t.c,i=t.f,e=[e,[e[0],i[1]],i,[i[0],e[1]]].map(t.a.pa,t.a);e[4]=e[0].slice();t.g?t.g.U([e]):t.g=new He([e])}gr.prototype.M=function(){return this.g};function yr(t,e,i){tt.call(this,t);this.coordinate=e;this.mapBrowserEvent=i}g(yr,tt);function xr(t){or.call(this,{handleDownEvent:Sr,handleDragEvent:_r,handleUpEvent:Mr});t=t?t:{};this.a=new gr(t.className||"ol-dragbox");this.b=null;this.l=t.condition?t.condition:Ht;this.j=t.boxEndCondition?t.boxEndCondition:wr}g(xr,or);function wr(t,e,i){t=i[0]-e[0];e=i[1]-e[1];return 64<=t*t+e*e}function _r(t){if(sr(t)){var e=this.a,i=t.pixel;e.c=this.b;e.f=i;br(e);mr(e);nt(this,new yr("boxdrag",t.coordinate,t))}}xr.prototype.M=function(){return this.a.M()};xr.prototype.i=b;function Mr(t){if(!sr(t))return!0;this.a.setMap(null);this.j(t,this.b,t.pixel)&&(this.i(t),nt(this,new yr("boxend",t.coordinate,t)));return!1}function Sr(t){if(sr(t)&&tr(t)&&this.l(t)){this.b=t.pixel;this.a.setMap(t.map);var e=this.a,i=this.b;e.c=this.b;e.f=i;br(e);mr(e);nt(this,new yr("boxstart",t.coordinate,t));return!0}return!1}function Er(t){t=t?t:{};var e=t.condition?t.condition:ir;this.h=void 0!==t.duration?t.duration:200;this.o=void 0!==t.out?t.out:!1;xr.call(this,{condition:e,className:t.className||"ol-dragzoom"})}g(Er,xr);Er.prototype.i=function(){var t=this.P,e=t.C(),i=t.ba(),n=this.M().B();if(this.o){var s=Ze(e,i),n=[Zl(t,Lt(n)),Zl(t,[n[2],n[3]])],o=At(Infinity,Infinity,-Infinity,-Infinity,void 0),r,a;r=0;for(a=n.length;r<a;++r)Dt(o,n[r]);$t(s,1/Je(o,i));n=s}i=e.constrainResolution(Je(n,i));s=e.G();o=e.aa();t.ea(oi({resolution:s,duration:this.h,easing:ti}));t.ea(ni({source:o,duration:this.h,easing:ti}));e.la(zt(n));e.Pa(i)};function Tr(t){Go.call(this,{handleEvent:Cr});t=t||{};this.a=function(t){return er(t)&&nr(t)};this.b=void 0!==t.condition?t.condition:this.a;this.c=void 0!==t.duration?t.duration:100;this.h=void 0!==t.pixelDelta?t.pixelDelta:128}g(Tr,Go);function Cr(t){var e=!1;if("keydown"==t.type){var i=t.originalEvent.keyCode;if(this.b(t)&&(40==i||37==i||39==i||38==i)){var n=t.map,e=n.C(),s=e.G()*this.h,o=0,r=0;40==i?r=-s:37==i?o=-s:39==i?o=s:r=s;i=[o,r];Mt(i,e.N());s=this.c;if(o=e.aa())s&&0<s&&n.ea(ni({source:o,duration:s,easing:ii})),n=e.a.center([o[0]+i[0],o[1]+i[1]]),e.la(n);t.preventDefault();e=!0}}return!e}function Ir(t){Go.call(this,{handleEvent:Ar});t=t?t:{};this.b=t.condition?t.condition:nr;this.a=t.delta?t.delta:1;this.c=void 0!==t.duration?t.duration:100}g(Ir,Go);function Ar(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var i=t.originalEvent.charCode;if(this.b(t)&&(43==i||45==i)){e=t.map;i=43==i?this.a:-this.a;e.render();var n=e.C();qo(e,n,i,void 0,this.c);t.preventDefault();e=!0}}return!e}function Pr(t){Go.call(this,{handleEvent:Fr});t=t||{};this.a=0;this.j=void 0!==t.duration?t.duration:250;this.l=void 0!==t.useAnchor?t.useAnchor:!0;this.c=null;this.h=this.b=void 0}g(Pr,Go);function Fr(t){var e=!1;if("wheel"==t.type||"mousewheel"==t.type){var e=t.map,i=t.originalEvent;this.l&&(this.c=t.coordinate);var n;"wheel"==t.type?(n=i.deltaY,us&&i.deltaMode===y.WheelEvent.DOM_DELTA_PIXEL&&(n/=ds),i.deltaMode===y.WheelEvent.DOM_DELTA_LINE&&(n*=40)):"mousewheel"==t.type&&(n=-i.wheelDeltaY,cs&&(n/=3));this.a+=n;void 0===this.b&&(this.b=Date.now());n=Math.max(80-(Date.now()-this.b),0);y.clearTimeout(this.h);this.h=y.setTimeout(this.i.bind(this,e),n);t.preventDefault();e=!0}return!e}Pr.prototype.i=function(t){var e=F(this.a,-1,1),i=t.C();t.render();qo(t,i,-e,this.c,this.j);this.a=0;this.c=null;this.h=this.b=void 0};function Dr(t){or.call(this,{handleDownEvent:Lr,handleDragEvent:kr,handleUpEvent:Rr});t=t||{};this.b=null;this.h=void 0;this.a=!1;this.i=0;this.l=void 0!==t.threshold?t.threshold:.3;this.j=void 0!==t.duration?t.duration:250}g(Dr,or);function kr(t){var e=0,i=this.c[0],n=this.c[1],i=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);void 0!==this.h&&(e=i-this.h,this.i+=e,!this.a&&Math.abs(this.i)>this.l&&(this.a=!0));this.h=i;t=t.map;i=t.a.getBoundingClientRect();n=rr(this.c);n[0]-=i.left;n[1]-=i.top;this.b=t.pa(n);this.a&&(i=t.C(),n=i.N(),t.render(),Yo(t,i,n+e,this.b))}function Rr(t){if(2>this.c.length){t=t.map;var e=t.C();Qe(e,-1);if(this.a){var i=e.N(),n=this.b,s=this.j,i=e.constrainRotation(i,0);Yo(t,e,i,n,s)}return!1}return!0}function Lr(t){return 2<=this.c.length?(t=t.map,this.b=null,this.h=void 0,this.a=!1,this.i=0,this.s||Qe(t.C(),1),t.render(),!0):!1}Dr.prototype.v=Xt;function zr(t){or.call(this,{handleDownEvent:Nr,handleDragEvent:Ur,handleUpEvent:Or});t=t?t:{};this.b=null;this.i=void 0!==t.duration?t.duration:400;this.a=void 0;this.h=1}g(zr,or);function Ur(t){var e=1,i=this.c[0],n=this.c[1],s=i.clientX-n.clientX,i=i.clientY-n.clientY,s=Math.sqrt(s*s+i*i);void 0!==this.a&&(e=this.a/s);this.a=s;1!=e&&(this.h=e);t=t.map;var s=t.C(),i=s.G(),n=t.a.getBoundingClientRect(),o=rr(this.c);o[0]-=n.left;o[1]-=n.top;this.b=t.pa(o);t.render();Zo(t,s,i*e,this.b)}function Or(t){if(2>this.c.length){t=t.map;var e=t.C();Qe(e,-1);var i=e.G(),n=this.b,s=this.i,i=e.constrainResolution(i,0,this.h-1);Zo(t,e,i,n,s);return!1}return!0}function Nr(t){return 2<=this.c.length?(t=t.map,this.b=null,this.a=void 0,this.h=1,this.s||Qe(t.C(),1),t.render(),!0):!1}zr.prototype.v=Xt;function jr(t){var e=t||{};t=U({},e);delete t.layers;e=e.layers;co.call(this,t);this.b=[];this.a={};G(this,lt("layers"),this.dd,this);e?Array.isArray(e)&&(e=new fi(e.slice())):e=new fi;this.set("layers",e)}g(jr,co);t=jr.prototype;t.lb=function(){this.get("visible")&&this.f()};t.dd=function(){this.b.forEach(Z);this.b.length=0;var t=Vr(this);this.b.push(G(t,"add",this.cd,this),G(t,"remove",this.ed,this));for(var e in this.a)this.a[e].forEach(Z);O(this.a);var t=t.a,i,n;e=0;for(i=t.length;e<i;e++)n=t[e],this.a[l(n).toString()]=[G(n,"propertychange",this.lb,this),G(n,"change",this.lb,this)];this.f()};t.cd=function(t){t=t.element;var e=l(t).toString();this.a[e]=[G(t,"propertychange",this.lb,this),G(t,"change",this.lb,this)];this.f()};t.ed=function(t){t=l(t.element).toString();this.a[t].forEach(Z);delete this.a[t];this.f()};function Vr(t){return t.get("layers")}t.Gb=function(t){var e=void 0!==t?t:[],i=e.length;Vr(this).forEach((function(t){t.Gb(e)}));t=fo(this);var n,s;for(n=e.length;i<n;i++)s=e[i],s.opacity*=t.opacity,s.visible=s.visible&&t.visible,s.maxResolution=Math.min(s.maxResolution,t.maxResolution),s.minResolution=Math.max(s.minResolution,t.minResolution),void 0!==t.extent&&(s.extent=void 0!==s.extent?Nt(s.extent,t.extent):t.extent);return e};t.Ib=function(){return"ready"};function Wr(t){Jt.call(this,{code:t,units:"m",extent:$r,global:!0,worldExtent:Hr})}g(Wr,Jt);Wr.prototype.getPointResolution=function(t,e){return t/D(e[1]/6378137)};var Br=6378137*Math.PI,$r=[-Br,-Br,Br,Br],Hr=[-180,-85,180,85],Xr="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map((function(t){return new Wr(t)}));function Gr(t,e,i){var n=t.length;i=1<i?i:2;void 0===e&&(2<i?e=t.slice():e=Array(n));for(var s=0;s<n;s+=i)e[s]=6378137*Math.PI*t[s]/180,e[s+1]=6378137*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));return e}function Yr(t,e,i){var n=t.length;i=1<i?i:2;void 0===e&&(2<i?e=t.slice():e=Array(n));for(var s=0;s<n;s+=i)e[s]=180*t[s]/(6378137*Math.PI),e[s+1]=360*Math.atan(Math.exp(t[s+1]/6378137))/Math.PI-90;return e}var qr=new Gt(6378137);function Zr(t,e){Jt.call(this,{code:t,units:"degrees",extent:Jr,axisOrientation:e,global:!0,metersPerUnit:Kr,worldExtent:Jr})}g(Zr,Jt);Zr.prototype.getPointResolution=function(t){return t};var Jr=[-180,-90,180,90],Kr=Math.PI*qr.radius/180,Qr=[new Zr("CRS:84"),new Zr("EPSG:4326","neu"),new Zr("urn:ogc:def:crs:EPSG::4326","neu"),new Zr("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Zr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Zr("urn:ogc:def:crs:OGC:2:84"),new Zr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Zr("urn:x-ogc:def:crs:EPSG:4326","neu")];function ta(t){go.call(this,t?t:{})}g(ta,go);function ea(t){t=t?t:{};var e=U({},t);delete e.preload;delete e.useInterimTilesOnError;delete e.zDirection;go.call(this,e);this.set("preload",void 0!==t.preload?t.preload:0);this.set("useInterimTilesOnError",void 0!==t.useInterimTilesOnError?t.useInterimTilesOnError:!0);this.set("zDirection",t.zDirection)}g(ea,go);function ia(t){return t.get("zDirection")}var na=[0,0,0,1],sa=[],oa=[0,0,0,1];function ra(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function aa(t){t=t||{};this.a=void 0!==t.color?t.color:null;this.b=void 0}aa.prototype.fa=function(){return this.a};function ha(){this.b=-1}function la(){this.b=-1;this.b=64;this.a=Array(4);this.c=Array(this.b);this.g=this.f=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.g=this.f=0}g(la,ha);function ua(t,e,i){i||(i=0);var n=Array(16);if(o(e))for(var s=0;16>s;++s)n[s]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(s=0;16>s;++s)n[s]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.a[0];i=t.a[1];var s=t.a[2],r=t.a[3],a;a=e+(r^i&(s^r))+n[0]+3614090360&4294967295;e=i+(a<<7&4294967295|a>>>25);a=r+(s^e&(i^s))+n[1]+3905402710&4294967295;r=e+(a<<12&4294967295|a>>>20);a=s+(i^r&(e^i))+n[2]+606105819&4294967295;s=r+(a<<17&4294967295|a>>>15);a=i+(e^s&(r^e))+n[3]+3250441966&4294967295;i=s+(a<<22&4294967295|a>>>10);a=e+(r^i&(s^r))+n[4]+4118548399&4294967295;e=i+(a<<7&4294967295|a>>>25);a=r+(s^e&(i^s))+n[5]+1200080426&4294967295;r=e+(a<<12&4294967295|a>>>20);a=s+(i^r&(e^i))+n[6]+2821735955&4294967295;s=r+(a<<17&4294967295|a>>>15);a=i+(e^s&(r^e))+n[7]+4249261313&4294967295;i=s+(a<<22&4294967295|a>>>10);a=e+(r^i&(s^r))+n[8]+1770035416&4294967295;e=i+(a<<7&4294967295|a>>>25);a=r+(s^e&(i^s))+n[9]+2336552879&4294967295;r=e+(a<<12&4294967295|a>>>20);a=s+(i^r&(e^i))+n[10]+4294925233&4294967295;s=r+(a<<17&4294967295|a>>>15);a=i+(e^s&(r^e))+n[11]+2304563134&4294967295;i=s+(a<<22&4294967295|a>>>10);a=e+(r^i&(s^r))+n[12]+1804603682&4294967295;e=i+(a<<7&4294967295|a>>>25);a=r+(s^e&(i^s))+n[13]+4254626195&4294967295;r=e+(a<<12&4294967295|a>>>20);a=s+(i^r&(e^i))+n[14]+2792965006&4294967295;s=r+(a<<17&4294967295|a>>>15);a=i+(e^s&(r^e))+n[15]+1236535329&4294967295;i=s+(a<<22&4294967295|a>>>10);a=e+(s^r&(i^s))+n[1]+4129170786&4294967295;e=i+(a<<5&4294967295|a>>>27);a=r+(i^s&(e^i))+n[6]+3225465664&4294967295;r=e+(a<<9&4294967295|a>>>23);a=s+(e^i&(r^e))+n[11]+643717713&4294967295;s=r+(a<<14&4294967295|a>>>18);a=i+(r^e&(s^r))+n[0]+3921069994&4294967295;i=s+(a<<20&4294967295|a>>>12);a=e+(s^r&(i^s))+n[5]+3593408605&4294967295;e=i+(a<<5&4294967295|a>>>27);a=r+(i^s&(e^i))+n[10]+38016083&4294967295;r=e+(a<<9&4294967295|a>>>23);a=s+(e^i&(r^e))+n[15]+3634488961&4294967295;s=r+(a<<14&4294967295|a>>>18);a=i+(r^e&(s^r))+n[4]+3889429448&4294967295;i=s+(a<<20&4294967295|a>>>12);a=e+(s^r&(i^s))+n[9]+568446438&4294967295;e=i+(a<<5&4294967295|a>>>27);a=r+(i^s&(e^i))+n[14]+3275163606&4294967295;r=e+(a<<9&4294967295|a>>>23);a=s+(e^i&(r^e))+n[3]+4107603335&4294967295;s=r+(a<<14&4294967295|a>>>18);a=i+(r^e&(s^r))+n[8]+1163531501&4294967295;i=s+(a<<20&4294967295|a>>>12);a=e+(s^r&(i^s))+n[13]+2850285829&4294967295;e=i+(a<<5&4294967295|a>>>27);a=r+(i^s&(e^i))+n[2]+4243563512&4294967295;r=e+(a<<9&4294967295|a>>>23);a=s+(e^i&(r^e))+n[7]+1735328473&4294967295;s=r+(a<<14&4294967295|a>>>18);a=i+(r^e&(s^r))+n[12]+2368359562&4294967295;i=s+(a<<20&4294967295|a>>>12);a=e+(i^s^r)+n[5]+4294588738&4294967295;e=i+(a<<4&4294967295|a>>>28);a=r+(e^i^s)+n[8]+2272392833&4294967295;r=e+(a<<11&4294967295|a>>>21);a=s+(r^e^i)+n[11]+1839030562&4294967295;s=r+(a<<16&4294967295|a>>>16);a=i+(s^r^e)+n[14]+4259657740&4294967295;i=s+(a<<23&4294967295|a>>>9);a=e+(i^s^r)+n[1]+2763975236&4294967295;e=i+(a<<4&4294967295|a>>>28);a=r+(e^i^s)+n[4]+1272893353&4294967295;r=e+(a<<11&4294967295|a>>>21);a=s+(r^e^i)+n[7]+4139469664&4294967295;s=r+(a<<16&4294967295|a>>>16);a=i+(s^r^e)+n[10]+3200236656&4294967295;i=s+(a<<23&4294967295|a>>>9);a=e+(i^s^r)+n[13]+681279174&4294967295;e=i+(a<<4&4294967295|a>>>28);a=r+(e^i^s)+n[0]+3936430074&4294967295;r=e+(a<<11&4294967295|a>>>21);a=s+(r^e^i)+n[3]+3572445317&4294967295;s=r+(a<<16&4294967295|a>>>16);a=i+(s^r^e)+n[6]+76029189&4294967295;i=s+(a<<23&4294967295|a>>>9);a=e+(i^s^r)+n[9]+3654602809&4294967295;e=i+(a<<4&4294967295|a>>>28);a=r+(e^i^s)+n[12]+3873151461&4294967295;r=e+(a<<11&4294967295|a>>>21);a=s+(r^e^i)+n[15]+530742520&4294967295;s=r+(a<<16&4294967295|a>>>16);a=i+(s^r^e)+n[2]+3299628645&4294967295;i=s+(a<<23&4294967295|a>>>9);a=e+(s^(i|~r))+n[0]+4096336452&4294967295;e=i+(a<<6&4294967295|a>>>26);a=r+(i^(e|~s))+n[7]+1126891415&4294967295;r=e+(a<<10&4294967295|a>>>22);a=s+(e^(r|~i))+n[14]+2878612391&4294967295;s=r+(a<<15&4294967295|a>>>17);a=i+(r^(s|~e))+n[5]+4237533241&4294967295;i=s+(a<<21&4294967295|a>>>11);a=e+(s^(i|~r))+n[12]+1700485571&4294967295;e=i+(a<<6&4294967295|a>>>26);a=r+(i^(e|~s))+n[3]+2399980690&4294967295;r=e+(a<<10&4294967295|a>>>22);a=s+(e^(r|~i))+n[10]+4293915773&4294967295;s=r+(a<<15&4294967295|a>>>17);a=i+(r^(s|~e))+n[1]+2240044497&4294967295;i=s+(a<<21&4294967295|a>>>11);a=e+(s^(i|~r))+n[8]+1873313359&4294967295;e=i+(a<<6&4294967295|a>>>26);a=r+(i^(e|~s))+n[15]+4264355552&4294967295;r=e+(a<<10&4294967295|a>>>22);a=s+(e^(r|~i))+n[6]+2734768916&4294967295;s=r+(a<<15&4294967295|a>>>17);a=i+(r^(s|~e))+n[13]+1309151649&4294967295;i=s+(a<<21&4294967295|a>>>11);a=e+(s^(i|~r))+n[4]+4149444226&4294967295;e=i+(a<<6&4294967295|a>>>26);a=r+(i^(e|~s))+n[11]+3174756917&4294967295;r=e+(a<<10&4294967295|a>>>22);a=s+(e^(r|~i))+n[2]+718787259&4294967295;s=r+(a<<15&4294967295|a>>>17);a=i+(r^(s|~e))+n[9]+3951481745&4294967295;t.a[0]=t.a[0]+e&4294967295;t.a[1]=t.a[1]+(s+(a<<21&4294967295|a>>>11))&4294967295;t.a[2]=t.a[2]+s&4294967295;t.a[3]=t.a[3]+r&4294967295}function ca(t,e){var i;void 0===i&&(i=e.length);for(var n=i-t.b,s=t.c,r=t.f,a=0;a<i;){if(0==r)for(;a<=n;)ua(t,e,a),a+=t.b;if(o(e))for(;a<i;){if(s[r++]=e.charCodeAt(a++),r==t.b){ua(t,s);r=0;break}}else for(;a<i;)if(s[r++]=e[a++],r==t.b){ua(t,s);r=0;break}}t.f=r;t.g+=i}function fa(t){t=t||{};this.f=void 0!==t.color?t.color:null;this.Ca=t.lineCap;this.a=void 0!==t.lineDash?t.lineDash:null;this.Da=t.lineJoin;this.Ea=t.miterLimit;this.g=t.width;this.b=void 0}fa.prototype.fa=function(){return this.f};fa.prototype.getLineDash=function(){return this.a};fa.prototype.ga=function(){return this.g};function da(t){t=t||{};this.h=this.b=this.c=null;this.f=void 0!==t.fill?t.fill:null;this.a=void 0!==t.stroke?t.stroke:null;this.g=t.radius;this.o=[0,0];this.H=this.j=this.i=null;var e=t.atlasManager,i,n=null,s,o=0;this.a&&(s=bi(this.a.fa()),o=this.a.ga(),void 0===o&&(o=1),n=this.a.getLineDash(),ps||(n=null));var r=2*(this.g+o)+1;s={strokeStyle:s,yc:o,size:r,lineDash:n};if(void 0===e)e=os(r,r),this.b=e.canvas,i=r=this.b.width,this.gc(s,e,0,0),this.f?this.h=this.b:(e=os(s.size,s.size),this.h=e.canvas,this.bc(s,e,0,0));else{r=Math.round(r);(n=!this.f)&&(i=this.bc.bind(this,s));if(this.a){o=this.a;if(void 0===o.b){var a="s"+(o.f?bi(o.f):"-")+","+(void 0!==o.Ca?o.Ca.toString():"-")+","+(o.a?o.a.toString():"-")+","+(void 0!==o.Da?o.Da:"-")+","+(void 0!==o.Ea?o.Ea.toString():"-")+","+(void 0!==o.g?o.g.toString():"-"),h=new la;ca(h,a);var u=Array((56>h.f?h.b:2*h.b)-h.f);u[0]=128;for(a=1;a<u.length-8;++a)u[a]=0;for(var c=8*h.g,a=u.length-8;a<u.length;++a)u[a]=c&255,c/=256;ca(h,u);u=Array(16);for(a=c=0;4>a;++a)for(var f=0;32>f;f+=8)u[c++]=h.a[a]>>>f&255;if(8192>=u.length)h=String.fromCharCode.apply(null,u);else for(h="",a=0;a<u.length;a+=8192)h+=String.fromCharCode.apply(null,mi(u,a,a+8192));o.b=h}o=o.b}else o="-";this.f?(h=this.f,void 0===h.b&&(h.b=h.a instanceof CanvasPattern||h.a instanceof CanvasGradient?l(h.a).toString():"f"+(h.a?bi(h.a):"-")),h=h.b):h="-";this.c&&o==this.c[1]&&h==this.c[2]&&this.g==this.c[3]||(this.c=["c"+o+h+(void 0!==this.g?this.g.toString():"-"),o,h,this.g]);e=e.add(this.c[0],r,r,this.gc.bind(this,s),i);this.b=e.image;this.o=[e.offsetX,e.offsetY];i=e.image.width;n?this.h=e.De:this.h=this.b}this.i=[r/2,r/2];this.j=[r,r];this.H=[i,i];Fo.call(this,{opacity:1,rotateWithView:!1,rotation:0,scale:1,snapToPixel:void 0!==t.snapToPixel?t.snapToPixel:!0})}g(da,Fo);t=da.prototype;t.La=function(){return this.f};t.ua=function(){return this.o};t.va=function(){return this.a};t.load=b;t.me=b;t.gc=function(t,e,i,n){e.setTransform(1,0,0,1,0,0);e.translate(i,n);e.beginPath();e.arc(t.size/2,t.size/2,this.g,0,2*Math.PI,!0);this.f&&(e.fillStyle=yi(this.f.fa()),e.fill());this.a&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.yc,t.lineDash&&e.setLineDash(t.lineDash),e.stroke());e.closePath()};t.bc=function(t,e,i,n){e.setTransform(1,0,0,1,0,0);e.translate(i,n);e.beginPath();e.arc(t.size/2,t.size/2,this.g,0,2*Math.PI,!0);e.fillStyle=bi(na);e.fill();this.a&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.yc,t.lineDash&&e.setLineDash(t.lineDash),e.stroke());e.closePath()};function pa(t){t=t||{};this.g=null;this.b=xa;void 0!==t.geometry&&va(this,t.geometry);this.c=void 0!==t.fill?t.fill:null;this.f=void 0!==t.image?t.image:null;this.h=void 0!==t.stroke?t.stroke:null;this.sa=void 0!==t.text?t.text:null;this.a=t.zIndex}pa.prototype.M=function(){return this.g};pa.prototype.La=function(){return this.c};pa.prototype.va=function(){return this.h};function va(t,e){a(e)?t.b=e:"string"===typeof e?t.b=function(t){return t.get(e)}:e?void 0!==e&&(t.b=function(){return e}):t.b=xa;t.g=e}function ga(t){if(!a(t)){var e;e=Array.isArray(t)?t:[t];t=function(){return e}}return t}var ma=null;function ba(){if(!ma){var t=new aa({color:"rgba(255,255,255,0.4)"}),e=new fa({color:"#3399CC",width:1.25});ma=[new pa({image:new da({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return ma}function ya(){var t={},e=[255,255,255,1],i=[0,153,255,1];t.Polygon=[new pa({fill:new aa({color:[255,255,255,.5]})})];t.MultiPolygon=t.Polygon;t.LineString=[new pa({stroke:new fa({color:e,width:5})}),new pa({stroke:new fa({color:i,width:3})})];t.MultiLineString=t.LineString;t.Circle=t.Polygon.concat(t.LineString);t.Point=[new pa({image:new da({radius:6,fill:new aa({color:i}),stroke:new fa({color:e,width:1.5})}),zIndex:Infinity})];t.MultiPoint=t.Point;t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point);return t}function xa(t){return t.M()}function wa(t){t=t?t:{};var e=U({},t);delete e.style;delete e.renderBuffer;delete e.updateWhileAnimating;delete e.updateWhileInteracting;go.call(this,e);this.c=void 0!==t.renderBuffer?t.renderBuffer:100;this.j=null;this.i=void 0;e=t.style;this.j=void 0!==e?e:ba;this.i=null===e?void 0:ga(this.j);this.f();this.l=void 0!==t.updateWhileAnimating?t.updateWhileAnimating:!1;this.o=void 0!==t.updateWhileInteracting?t.updateWhileInteracting:!1}g(wa,go);function _a(t,e,i,n,s){this.g=t;this.s=e;this.i=i;this.u=n;this.Ja=s;this.c=this.a=this.b=this.O=this.$=this.J=null;this.S=this.P=this.H=this.K=this.w=this.v=0;this.da=!1;this.h=this.ja=0;this.ma=!1;this.D=0;this.f="";this.l=this.F=this.oa=this.na=0;this.W=this.A=this.j=null;this.o=[];this.ta=ge()}g(_a,po);function Ma(t,e,i){if(t.c){e=Se(e,0,i,2,t.u,t.o);i=t.g;var n=t.ta,s=i.globalAlpha;1!=t.H&&(i.globalAlpha=s*t.H);var o=t.ja;t.da&&(o+=t.Ja);var r,a;r=0;for(a=e.length;r<a;r+=2){var h=e[r]-t.v,l=e[r+1]-t.w;t.ma&&(h=Math.round(h),l=Math.round(l));if(0!==o||1!=t.h){var u=h+t.v,c=l+t.w;xo(n,u,c,t.h,t.h,o,-u,-c);i.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}i.drawImage(t.c,t.P,t.S,t.D,t.K,h,l,t.D,t.K)}0===o&&1==t.h||i.setTransform(1,0,0,1,0,0);1!=t.H&&(i.globalAlpha=s)}}function Sa(t,e,i,n){var s=0;if(t.W&&""!==t.f){t.j&&Ca(t,t.j);t.A&&Ia(t,t.A);var o=t.W,r=t.g,a=t.O;a?(a.font!=o.font&&(a.font=r.font=o.font),a.textAlign!=o.textAlign&&(a.textAlign=r.textAlign=o.textAlign),a.textBaseline!=o.textBaseline&&(a.textBaseline=r.textBaseline=o.textBaseline)):(r.font=o.font,r.textAlign=o.textAlign,r.textBaseline=o.textBaseline,t.O={font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline});e=Se(e,s,i,n,t.u,t.o);for(o=t.g;s<i;s+=n){r=e[s]+t.na;a=e[s+1]+t.oa;if(0!==t.F||1!=t.l){var h=xo(t.ta,r,a,t.l,t.l,t.F,-r,-a);o.setTransform(h[0],h[1],h[4],h[5],h[12],h[13])}t.A&&o.strokeText(t.f,r,a);t.j&&o.fillText(t.f,r,a)}0===t.F&&1==t.l||o.setTransform(1,0,0,1,0,0)}}function Ea(t,e,i,n,s,o){var r=t.g;t=Se(e,i,n,s,t.u,t.o);r.moveTo(t[0],t[1]);e=t.length;o&&(e-=2);for(i=2;i<e;i+=2)r.lineTo(t[i],t[i+1]);o&&r.closePath();return n}function Ta(t,e,i,n,s){var o,r;o=0;for(r=n.length;o<r;++o)i=Ea(t,e,i,n[o],s,!0);return i}t=_a.prototype;t.ac=function(t){if(Wt(this.i,t.B())){if(this.b||this.a){this.b&&Ca(this,this.b);this.a&&Ia(this,this.a);var e;e=this.u;var i=this.o,n=t.a;e=n?Se(n,0,n.length,t.b,e,i):null;i=e[2]-e[0];n=e[3]-e[1];i=Math.sqrt(i*i+n*n);n=this.g;n.beginPath();n.arc(e[0],e[1],i,0,2*Math.PI);this.b&&n.fill();this.a&&n.stroke()}""!==this.f&&Sa(this,t.a.slice(0,t.b),2,2)}};t.Ya=function(t){var e=t.a;t=t.b;this.c&&Ma(this,e,e.length);""!==this.f&&Sa(this,e,e.length,t)};t.Xa=function(t){var e=t.a;t=t.b;this.c&&Ma(this,e,e.length);""!==this.f&&Sa(this,e,e.length,t)};t.cc=function(t){if(Wt(this.i,t.B())){if(this.a){Ia(this,this.a);var e=this.g,i=t.a;e.beginPath();Ea(this,i,0,i.length,t.b,!1);e.stroke()}""!==this.f&&(t=lu(t),Sa(this,t,2,2))}};t.dc=function(t){var e=t.B();if(Wt(this.i,e)){if(this.a){Ia(this,this.a);var e=this.g,i=t.a,n=0,s=t.Za(),o=t.b;e.beginPath();var r,a;r=0;for(a=s.length;r<a;++r)n=Ea(this,i,n,s[r],o,!1);e.stroke()}""!==this.f&&(t=cu(t),Sa(this,t,t.length,2))}};t.fc=function(t){if(Wt(this.i,t.B())){if(this.a||this.b){this.b&&Ca(this,this.b);this.a&&Ia(this,this.a);var e=this.g;e.beginPath();Ta(this,Ge(t),0,t.Za(),t.b);this.b&&e.fill();this.a&&e.stroke()}""!==this.f&&(t=Xe(t),Sa(this,t,2,2))}};t.ec=function(t){if(Wt(this.i,t.B())){if(this.a||this.b){this.b&&Ca(this,this.b);this.a&&Ia(this,this.a);var e=this.g,i=vu(t),n=0,s=t.c,o=t.b,r,a;r=0;for(a=s.length;r<a;++r){var h=s[r];e.beginPath();n=Ta(this,i,n,h,o);this.b&&e.fill();this.a&&e.stroke()}}""!==this.f&&(t=pu(t),Sa(this,t,t.length,2))}};function Ca(t,e){var i=t.g,n=t.J;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,t.J={fillStyle:e.fillStyle})}function Ia(t,e){var i=t.g,n=t.$;n?(n.lineCap!=e.lineCap&&(n.lineCap=i.lineCap=e.lineCap),ps&&!pt(n.lineDash,e.lineDash)&&i.setLineDash(n.lineDash=e.lineDash),n.lineJoin!=e.lineJoin&&(n.lineJoin=i.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=i.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=i.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,ps&&i.setLineDash(e.lineDash),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,t.$={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}t.Ga=function(t,e){if(t){var i=t.fa();this.b={fillStyle:yi(i?i:na)}}else this.b=null;if(e){var i=e.fa(),n=e.Ca,s=e.getLineDash(),o=e.Da,r=e.ga(),a=e.Ea;this.a={lineCap:void 0!==n?n:"round",lineDash:s?s:sa,lineJoin:void 0!==o?o:"round",lineWidth:this.s*(void 0!==r?r:1),miterLimit:void 0!==a?a:10,strokeStyle:bi(i?i:oa)}}else this.a=null};t.Ha=function(t){if(t){var e=t.i,i=t.b,n=t.ua(),s=t.j;this.v=e[0];this.w=e[1];this.K=s[1];this.c=i;this.H=t.l;this.P=n[0];this.S=n[1];this.da=t.A;this.ja=t.N();this.h=t.bb;this.ma=t.s;this.D=s[0]}else this.c=null};t.wa=function(t){if(t){var e=t.La();e?(e=e.fa(),this.j={fillStyle:yi(e?e:na)}):this.j=null;var i=t.va();if(i){var e=i.fa(),n=i.Ca,s=i.getLineDash(),o=i.Da,r=i.ga(),i=i.Ea;this.A={lineCap:void 0!==n?n:"round",lineDash:s?s:sa,lineJoin:void 0!==o?o:"round",lineWidth:void 0!==r?r:1,miterLimit:void 0!==i?i:10,strokeStyle:bi(e?e:oa)}}else this.A=null;var e=t.Pc(),n=t.Qc(),s=t.Rc(),o=t.N(),r=t.bb,i=t.sa,a=t.Sc();t=t.Tc();this.W={font:void 0!==e?e:"10px sans-serif",textAlign:void 0!==a?a:"center",textBaseline:void 0!==t?t:"middle"};this.f=void 0!==i?i:"";this.na=void 0!==n?this.s*n:0;this.oa=void 0!==s?this.s*s:0;this.F=void 0!==o?o:0;this.l=this.s*(void 0!==r?r:1)}else this.f=""};function Aa(t){_o.call(this,t);this.J=ge()}g(Aa,_o);Aa.prototype.i=function(t,e,i){Pa(this,"precompose",i,t,void 0);var n=this.b?this.b.b():null;if(n){var s=e.extent,o=void 0!==s;if(o){var r=t.pixelRatio,a=t.size[0]*r,h=t.size[1]*r,l=t.viewState.rotation,u=jt(s),c=[s[2],s[3]],f=[s[2],s[1]],s=Lt(s);wo(t.coordinateToPixelMatrix,u,u);wo(t.coordinateToPixelMatrix,c,c);wo(t.coordinateToPixelMatrix,f,f);wo(t.coordinateToPixelMatrix,s,s);i.save();ra(i,-l,a/2,h/2);i.beginPath();i.moveTo(u[0]*r,u[1]*r);i.lineTo(c[0]*r,c[1]*r);i.lineTo(f[0]*r,f[1]*r);i.lineTo(s[0]*r,s[1]*r);i.clip();ra(i,l,a/2,h/2)}r=this.s;a=i.globalAlpha;i.globalAlpha=e.opacity;i.drawImage(n,0,0,+n.width,+n.height,Math.round(r[12]),Math.round(r[13]),Math.round(n.width*r[0]),Math.round(n.height*r[5]));i.globalAlpha=a;o&&i.restore()}Pa(this,"postcompose",i,t,void 0)};function Pa(t,e,i,n,s){var o=t.a;if(st(o,e)){var r=n.size[0]*n.pixelRatio,a=n.size[1]*n.pixelRatio,h=n.viewState.rotation;ra(i,-h,r/2,a/2);t=void 0!==s?s:Fa(t,n,0);t=new _a(i,n.pixelRatio,n.extent,t,n.viewState.rotation);nt(o,new vo(e,o,t,n,i,null));ra(i,h,r/2,a/2)}}function Fa(t,e,i){var n=e.viewState,s=e.pixelRatio;return xo(t.J,s*e.size[0]/2,s*e.size[1]/2,s/n.resolution,-s/n.resolution,-n.rotation,-n.center[0]+i,-n.center[1])}var Da=["Polygon","LineString","Image","Text"];function ka(t,e,i){this.ja=t;this.$=e;this.c=null;this.i=0;this.resolution=i;this.W=this.D=null;this.b=[];this.f=[];this.P=ge();this.a=[];this.O=[];this.S=ge();this.da=ge()}g(ka,po);function Ra(t,e,i,n,s,o){var r=t.f.length,a=t.Eb(),h=[e[i],e[i+1]],l=[NaN,NaN],u=!0,c,f,d;for(c=i+s;c<n;c+=s){l[0]=e[c];l[1]=e[c+1];d=a[1];var p=a[2],v=a[3],g=l[0],m=l[1],b=0;g<a[0]?b|=16:g>p&&(b|=4);m<d?b|=8:m>v&&(b|=2);0===b&&(b=1);d=b;d!==f?(u&&(t.f[r++]=h[0],t.f[r++]=h[1]),t.f[r++]=l[0],t.f[r++]=l[1],u=!1):1===d?(t.f[r++]=l[0],t.f[r++]=l[1],u=!1):u=!0;h[0]=l[0];h[1]=l[1];f=d}c===i+s&&(t.f[r++]=h[0],t.f[r++]=h[1]);o&&(t.f[r++]=e[i],t.f[r++]=e[i+1]);return r}function La(t,e){t.D=[0,e,0];t.b.push(t.D);t.W=[0,e,0];t.a.push(t.W)}function za(t,e,i,n,s,o,r,a,h){var u;u=t.P;if(n[0]==u[0]&&n[1]==u[1]&&n[4]==u[4]&&n[5]==u[5]&&n[12]==u[12]&&n[13]==u[13])u=t.O;else{u=Se(t.f,0,t.f.length,2,n,t.O);var c=t.P;c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11];c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15]}n=!j(o);var c=0,f=r.length,d,p,v=t.S;t=t.da;for(var g,m,b,y;c<f;){var x=r[c],w,_,M,S;switch(x[0]){case 0:d=x[1];n&&o[l(d).toString()]||!d.M()?c=x[2]:void 0===h||Wt(h,d.M().B())?++c:c=x[2];break;case 1:e.beginPath();++c;break;case 2:d=x[1];p=u[d];x=u[d+1];b=u[d+2]-p;d=u[d+3]-x;e.arc(p,x,Math.sqrt(b*b+d*d),0,2*Math.PI,!0);++c;break;case 3:e.closePath();++c;break;case 4:d=x[1];p=x[2];w=x[3];M=x[4]*i;var E=x[5]*i,T=x[6];_=x[7];var C=x[8],I=x[9];b=x[11];y=x[12];var A=x[13],P=x[14];for(x[10]&&(b+=s);d<p;d+=2){x=u[d]-M;S=u[d+1]-E;A&&(x=Math.round(x),S=Math.round(S));if(1!=y||0!==b){var F=x+M,D=S+E;xo(v,F,D,y,y,b,-F,-D);e.transform(v[0],v[1],v[4],v[5],v[12],v[13])}F=e.globalAlpha;1!=_&&(e.globalAlpha=F*_);var D=P+C>w.width?w.width-C:P,k=T+I>w.height?w.height-I:T;e.drawImage(w,C,I,D,k,x,S,D*i,k*i);1!=_&&(e.globalAlpha=F);if(1!=y||0!==b)xe(v,t),e.transform(t[0],t[1],t[4],t[5],t[12],t[13])}++c;break;case 5:d=x[1];p=x[2];M=x[3];E=x[4]*i;T=x[5]*i;b=x[6];y=x[7]*i;w=x[8];for(_=x[9];d<p;d+=2){x=u[d]+E;S=u[d+1]+T;if(1!=y||0!==b)xo(v,x,S,y,y,b,-x,-S),e.transform(v[0],v[1],v[4],v[5],v[12],v[13]);C=M.split("\n");I=C.length;1<I?(A=Math.round(1.5*e.measureText("M").width),S-=(I-1)/2*A):A=0;for(P=0;P<I;P++)F=C[P],_&&e.strokeText(F,x,S),w&&e.fillText(F,x,S),S+=A;if(1!=y||0!==b)xe(v,t),e.transform(t[0],t[1],t[4],t[5],t[12],t[13])}++c;break;case 6:if(void 0!==a&&(d=x[1],d=a(d)))return d;++c;break;case 7:e.fill();++c;break;case 8:d=x[1];p=x[2];x=u[d];S=u[d+1];b=x+.5|0;y=S+.5|0;if(b!==g||y!==m)e.moveTo(x,S),g=b,m=y;for(d+=2;d<p;d+=2)if(x=u[d],S=u[d+1],b=x+.5|0,y=S+.5|0,b!==g||y!==m)e.lineTo(x,S),g=b,m=y;++c;break;case 9:e.fillStyle=x[1];++c;break;case 10:g=void 0!==x[7]?x[7]:!0;m=x[2];e.strokeStyle=x[1];e.lineWidth=g?m*i:m;e.lineCap=x[3];e.lineJoin=x[4];e.miterLimit=x[5];ps&&e.setLineDash(x[6]);m=g=NaN;++c;break;case 11:e.font=x[1];e.textAlign=x[2];e.textBaseline=x[3];++c;break;case 12:e.stroke();++c;break;default:++c}}}ka.prototype.h=function(t,e,i,n,s){za(this,t,e,i,n,s,this.b,void 0)};function Ua(t){var e=t.a;e.reverse();var i,n=e.length,s,o,r=-1;for(i=0;i<n;++i)if(s=e[i],o=s[0],6==o)r=i;else if(0==o){s[2]=i;s=t.a;for(o=i;r<o;){var a=s[r];s[r]=s[o];s[o]=a;++r;--o}r=-1}}function Oa(t,e){t.D[2]=t.b.length;t.D=null;t.W[2]=t.a.length;t.W=null;var i=[6,e];t.b.push(i);t.a.push(i)}ka.prototype.ob=b;ka.prototype.Eb=function(){return this.$};function Na(t,e,i){ka.call(this,t,e,i);this.A=this.J=null;this.K=this.w=this.v=this.u=this.F=this.s=this.o=this.H=this.l=this.j=this.g=void 0}g(Na,ka);Na.prototype.Ya=function(t,e){if(this.A){La(this,e);var i=t.a,n=this.f.length,i=Ra(this,i,0,i.length,t.b,!1);this.b.push([4,n,i,this.A,this.g,this.j,this.l,this.H,this.o,this.s,this.F,this.u,this.v,this.w,this.K]);this.a.push([4,n,i,this.J,this.g,this.j,this.l,this.H,this.o,this.s,this.F,this.u,this.v,this.w,this.K]);Oa(this,e)}};Na.prototype.Xa=function(t,e){if(this.A){La(this,e);var i=t.a,n=this.f.length,i=Ra(this,i,0,i.length,t.b,!1);this.b.push([4,n,i,this.A,this.g,this.j,this.l,this.H,this.o,this.s,this.F,this.u,this.v,this.w,this.K]);this.a.push([4,n,i,this.J,this.g,this.j,this.l,this.H,this.o,this.s,this.F,this.u,this.v,this.w,this.K]);Oa(this,e)}};Na.prototype.ob=function(){Ua(this);this.j=this.g=void 0;this.A=this.J=null;this.K=this.w=this.u=this.F=this.s=this.o=this.H=this.v=this.l=void 0};Na.prototype.Ha=function(t){var e=t.i,i=t.j,n=t.h,s=t.b,o=t.ua();this.g=e[0];this.j=e[1];this.J=n;this.A=s;this.l=i[1];this.H=t.l;this.o=o[0];this.s=o[1];this.F=t.A;this.u=t.N();this.v=t.bb;this.w=t.s;this.K=i[0]};function ja(t,e,i){ka.call(this,t,e,i);this.g={Wa:void 0,Ra:void 0,Sa:null,Ta:void 0,Ua:void 0,Va:void 0,Jb:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}g(ja,ka);function Va(t,e,i,n,s){var o=t.f.length;e=Ra(t,e,i,n,s,!1);o=[8,o,e];t.b.push(o);t.a.push(o);return n}t=ja.prototype;t.Eb=function(){this.c||(this.c=Tt(this.$),0<this.i&&Et(this.c,this.resolution*(this.i+1)/2,this.c));return this.c};function Wa(t){var e=t.g,i=e.strokeStyle,n=e.lineCap,s=e.lineDash,o=e.lineJoin,r=e.lineWidth,a=e.miterLimit;e.Wa==i&&e.Ra==n&&pt(e.Sa,s)&&e.Ta==o&&e.Ua==r&&e.Va==a||(e.Jb!=t.f.length&&(t.b.push([12]),e.Jb=t.f.length),t.b.push([10,i,r,n,o,a,s],[1]),e.Wa=i,e.Ra=n,e.Sa=s,e.Ta=o,e.Ua=r,e.Va=a)}t.cc=function(t,e){var i=this.g,n=i.lineWidth;void 0!==i.strokeStyle&&void 0!==n&&(Wa(this),La(this,e),this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash],[1]),i=t.a,Va(this,i,0,i.length,t.b),this.a.push([12]),Oa(this,e))};t.dc=function(t,e){var i=this.g,n=i.lineWidth;if(void 0!==i.strokeStyle&&void 0!==n){Wa(this);La(this,e);this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash],[1]);var i=t.Za(),n=t.a,s=t.b,o=0,r,a;r=0;for(a=i.length;r<a;++r)o=Va(this,n,o,i[r],s);this.a.push([12]);Oa(this,e)}};t.ob=function(){this.g.Jb!=this.f.length&&this.b.push([12]);Ua(this);this.g=null};t.Ga=function(t,e){var i=e.fa();this.g.strokeStyle=bi(i?i:oa);i=e.Ca;this.g.lineCap=void 0!==i?i:"round";i=e.getLineDash();this.g.lineDash=i?i:sa;i=e.Da;this.g.lineJoin=void 0!==i?i:"round";i=e.ga();this.g.lineWidth=void 0!==i?i:1;i=e.Ea;this.g.miterLimit=void 0!==i?i:10;this.g.lineWidth>this.i&&(this.i=this.g.lineWidth,this.c=null)};function Ba(t,e,i){ka.call(this,t,e,i);this.g={$b:void 0,Wa:void 0,Ra:void 0,Sa:null,Ta:void 0,Ua:void 0,Va:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}g(Ba,ka);function $a(t,e,i,n,s){var o=t.g,r=[1];t.b.push(r);t.a.push(r);var a,r=0;for(a=n.length;r<a;++r){var h=n[r],l=t.f.length;i=Ra(t,e,i,h,s,!0);i=[8,l,i];l=[3];t.b.push(i,l);t.a.push(i,l);i=h}e=[7];t.a.push(e);void 0!==o.fillStyle&&t.b.push(e);void 0!==o.strokeStyle&&(o=[12],t.b.push(o),t.a.push(o));return i}t=Ba.prototype;t.ac=function(t,e){var i=this.g,n=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==n){Ha(this);La(this,e);this.a.push([9,bi(na)]);void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash]);var s=t.a,n=this.f.length;Ra(this,s,0,s.length,t.b,!1);s=[1];n=[2,n];this.b.push(s,n);this.a.push(s,n);n=[7];this.a.push(n);void 0!==i.fillStyle&&this.b.push(n);void 0!==i.strokeStyle&&(i=[12],this.b.push(i),this.a.push(i));Oa(this,e)}};t.fc=function(t,e){var i=this.g,n=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==n)Ha(this),La(this,e),this.a.push([9,bi(na)]),void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash]),i=t.Za(),n=Ge(t),$a(this,n,0,i,t.b),Oa(this,e)};t.ec=function(t,e){var i=this.g,n=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==n){Ha(this);La(this,e);this.a.push([9,bi(na)]);void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash]);var i=t.c,n=vu(t),s=t.b,o=0,r,a;r=0;for(a=i.length;r<a;++r)o=$a(this,n,o,i[r],s);Oa(this,e)}};t.ob=function(){Ua(this);this.g=null;var t=this.ja;if(0!==t){var e=this.f,i,n;i=0;for(n=e.length;i<n;++i)e[i]=t*Math.round(e[i]/t)}};t.Eb=function(){this.c||(this.c=Tt(this.$),0<this.i&&Et(this.c,this.resolution*(this.i+1)/2,this.c));return this.c};t.Ga=function(t,e){var i=this.g;if(t){var n=t.fa();i.fillStyle=yi(n?n:na)}else i.fillStyle=void 0;e?(n=e.fa(),i.strokeStyle=bi(n?n:oa),n=e.Ca,i.lineCap=void 0!==n?n:"round",n=e.getLineDash(),i.lineDash=n?n.slice():sa,n=e.Da,i.lineJoin=void 0!==n?n:"round",n=e.ga(),i.lineWidth=void 0!==n?n:1,n=e.Ea,i.miterLimit=void 0!==n?n:10,i.lineWidth>this.i&&(this.i=i.lineWidth,this.c=null)):(i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0)};function Ha(t){var e=t.g,i=e.fillStyle,n=e.strokeStyle,s=e.lineCap,o=e.lineDash,r=e.lineJoin,a=e.lineWidth,h=e.miterLimit;void 0!==i&&e.$b!=i&&(t.b.push([9,i]),e.$b=e.fillStyle);void 0===n||e.Wa==n&&e.Ra==s&&e.Sa==o&&e.Ta==r&&e.Ua==a&&e.Va==h||(t.b.push([10,n,a,s,r,h,o]),e.Wa=n,e.Ra=s,e.Sa=o,e.Ta=r,e.Ua=a,e.Va=h)}function Xa(t,e,i){ka.call(this,t,e,i);this.w=this.v=this.u=null;this.A="";this.F=this.s=this.o=this.H=0;this.l=this.j=this.g=null}g(Xa,ka);function Ga(t,e,i,n,s){if(""!==t.A&&t.l&&(t.g||t.j)){if(t.g){var o=t.g,r=t.u;if(!r||r.fillStyle!=o.fillStyle){var a=[9,o.fillStyle];t.b.push(a);t.a.push(a);r?r.fillStyle=o.fillStyle:t.u={fillStyle:o.fillStyle}}}t.j&&(o=t.j,r=t.v,r&&r.lineCap==o.lineCap&&r.lineDash==o.lineDash&&r.lineJoin==o.lineJoin&&r.lineWidth==o.lineWidth&&r.miterLimit==o.miterLimit&&r.strokeStyle==o.strokeStyle||(a=[10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,!1],t.b.push(a),t.a.push(a),r?(r.lineCap=o.lineCap,r.lineDash=o.lineDash,r.lineJoin=o.lineJoin,r.lineWidth=o.lineWidth,r.miterLimit=o.miterLimit,r.strokeStyle=o.strokeStyle):t.v={lineCap:o.lineCap,lineDash:o.lineDash,lineJoin:o.lineJoin,lineWidth:o.lineWidth,miterLimit:o.miterLimit,strokeStyle:o.strokeStyle}));o=t.l;r=t.w;r&&r.font==o.font&&r.textAlign==o.textAlign&&r.textBaseline==o.textBaseline||(a=[11,o.font,o.textAlign,o.textBaseline],t.b.push(a),t.a.push(a),r?(r.font=o.font,r.textAlign=o.textAlign,r.textBaseline=o.textBaseline):t.w={font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline});La(t,s);o=t.f.length;e=Ra(t,e,0,i,n,!1);e=[5,o,e,t.A,t.H,t.o,t.s,t.F,!!t.g,!!t.j];t.b.push(e);t.a.push(e);Oa(t,s)}}Xa.prototype.wa=function(t){if(t){var e=t.La();e?(e=e.fa(),e=yi(e?e:na),this.g?this.g.fillStyle=e:this.g={fillStyle:e}):this.g=null;var i=t.va();if(i){var e=i.fa(),n=i.Ca,s=i.getLineDash(),o=i.Da,r=i.ga(),i=i.Ea,n=void 0!==n?n:"round",s=s?s.slice():sa,o=void 0!==o?o:"round",r=void 0!==r?r:1,i=void 0!==i?i:10,e=bi(e?e:oa);if(this.j){var a=this.j;a.lineCap=n;a.lineDash=s;a.lineJoin=o;a.lineWidth=r;a.miterLimit=i;a.strokeStyle=e}else this.j={lineCap:n,lineDash:s,lineJoin:o,lineWidth:r,miterLimit:i,strokeStyle:e}}else this.j=null;var h=t.Pc(),e=t.Qc(),n=t.Rc(),s=t.N(),r=t.bb,i=t.sa,o=t.Sc(),a=t.Tc();t=void 0!==h?h:"10px sans-serif";o=void 0!==o?o:"center";a=void 0!==a?a:"middle";this.l?(h=this.l,h.font=t,h.textAlign=o,h.textBaseline=a):this.l={font:t,textAlign:o,textBaseline:a};this.A=void 0!==i?i:"";this.H=void 0!==e?e:0;this.o=void 0!==n?n:0;this.s=void 0!==s?s:0;this.F=void 0!==r?r:1}else this.A=""};function Ya(t,e,i,n){this.A=t;this.g=e;this.l=i;this.c=n;this.b={};this.i=os(1,1);this.j=ge()}function qa(t){for(var e in t.b){var i=t.b[e],n;for(n in i)i[n].ob()}}Ya.prototype.Z=function(t,e,i,n,s){var o=this.j;xo(o,.5,.5,1/e,-1/e,-i,-t[0],-t[1]);var r=this.i;r.clearRect(0,0,1,1);var a;void 0!==this.c&&(a=It(),Dt(a,t),Et(a,e*this.c,a));return Za(this,r,o,i,n,(function(t){if(0<r.getImageData(0,0,1,1).data[3]){if(t=s(t))return t;r.clearRect(0,0,1,1)}}),a)};Ya.prototype.a=function(t,e){var i=void 0!==t?t.toString():"0",n=this.b[i];void 0===n&&(n={},this.b[i]=n);i=n[e];void 0===i&&(i=new Ja[e](this.A,this.g,this.l),n[e]=i);return i};Ya.prototype.f=function(){return j(this.b)};Ya.prototype.h=function(t,e,i,n,s,o){var r=Object.keys(this.b).map(Number);r.sort(ut);var a=this.g,h=a[0],l=a[1],u=a[2],a=a[3],h=[h,l,h,a,u,a,u,l];Se(h,0,8,2,i,h);t.save();t.beginPath();t.moveTo(h[0],h[1]);t.lineTo(h[2],h[3]);t.lineTo(h[4],h[5]);t.lineTo(h[6],h[7]);t.closePath();t.clip();o=o?o:Da;for(var c,f,h=0,l=r.length;h<l;++h)for(c=this.b[r[h].toString()],u=0,a=o.length;u<a;++u)f=c[o[u]],void 0!==f&&f.h(t,e,i,n,s);t.restore()};function Za(t,e,i,n,s,o,r){var a=Object.keys(t.b).map(Number);a.sort((function(t,e){return e-t}));var h,l,u,c,f;h=0;for(l=a.length;h<l;++h)for(c=t.b[a[h].toString()],u=Da.length-1;0<=u;--u)if(f=c[Da[u]],void 0!==f&&(f=za(f,e,1,i,n,s,f.a,o,r)))return f}var Ja={Image:Na,LineString:ja,Polygon:Ba,Text:Xa};function Ka(t,e){return l(t)-l(e)}function Qa(t,e){var i=.5*t/e;return i*i}function th(t,e,i,n,s,o){var r;(r=i.f)&&r.me(s,o);if(s=(0,i.b)(e))n=Ce(s,n),(0,eh[n.X()])(t,n,i,e);return!1}var eh={Point:function(t,e,i,n){var s=i.f;if(s){var o=t.a(i.a,"Image");o.Ha(s);o.Ya(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),Ga(t,e.a,2,2,n)},LineString:function(t,e,i,n){var s=i.va();if(s){var o=t.a(i.a,"LineString");o.Ga(null,s);o.cc(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),Ga(t,lu(e),2,2,n)},Polygon:function(t,e,i,n){var s=i.La(),o=i.va();if(s||o){var r=t.a(i.a,"Polygon");r.Ga(s,o);r.fc(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),Ga(t,Xe(e),2,2,n)},MultiPoint:function(t,e,i,n){var s=i.f;if(s){var o=t.a(i.a,"Image");o.Ha(s);o.Xa(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),i=e.a,Ga(t,i,i.length,e.b,n)},MultiLineString:function(t,e,i,n){var s=i.va();if(s){var o=t.a(i.a,"LineString");o.Ga(null,s);o.dc(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),e=cu(e),Ga(t,e,e.length,2,n)},MultiPolygon:function(t,e,i,n){var s=i.La(),o=i.va();if(o||s){var r=t.a(i.a,"Polygon");r.Ga(s,o);r.ec(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),e=pu(e),Ga(t,e,e.length,2,n)},GeometryCollection:function(t,e,i,n){e=e.Ce();var s,o;s=0;for(o=e.length;s<o;++s)(0,eh[e[s].X()])(t,e[s],i,n)},Circle:function(t,e,i,n){var s=i.La(),o=i.va();if(s||o){var r=t.a(i.a,"Polygon");r.Ga(s,o);r.ac(e,n)}if(s=i.sa)t=t.a(i.a,"Text"),t.wa(s),Ga(t,e.a.slice(0,e.b),2,2,n)}};var ih,nh=e.navigator,sh=e.chrome,oh=-1<nh.userAgent.indexOf("OPR"),rh=-1<nh.userAgent.indexOf("Edge");ih=!(!nh.userAgent.match("CriOS")&&null!==sh&&void 0!==sh&&"Google Inc."===nh.vendor&&0==oh&&0==rh);function ah(t,e,i,n){var s;s=he(e,t)(i,void 0,i.length);i=e.getPointResolution(n,i);e=Kt(e);void 0!==e&&(i*=e);e=Kt(t);void 0!==e&&(i/=e);t=t.getPointResolution(i,s)/i;isFinite(t)&&0<t&&(i/=t);return i}function hh(t,e,i,n){t=i-t;e=n-e;var s=Math.sqrt(t*t+e*e);return[Math.round(i+t/s),Math.round(n+e/s)]}function lh(t,e,i,n,s,o,r,a,h,l,u){var c=os(Math.round(i*t),Math.round(i*e));if(0===h.length)return c.canvas;c.scale(i,i);var f=It();h.forEach((function(t){t=t.extent;t[0]<f[0]&&(f[0]=t[0]);t[2]>f[2]&&(f[2]=t[2]);t[1]<f[1]&&(f[1]=t[1]);t[3]>f[3]&&(f[3]=t[3])}));var d=os(Math.round(i*Vt(f)/n),Math.round(i*Ot(f)/n)),p=i/n;h.forEach((function(t){d.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,(t.extent[0]-f[0])*p,-(t.extent[3]-f[3])*p,Vt(t.extent)*p,Ot(t.extent)*p)}));var v=jt(r);a.g.forEach((function(t){var e=t.source,s=t.target,r=e[1][0],a=e[1][1],h=e[2][0],l=e[2][1];t=(s[0][0]-v[0])/o;var u=-(s[0][1]-v[1])/o,p=(s[1][0]-v[0])/o,g=-(s[1][1]-v[1])/o,m=(s[2][0]-v[0])/o,b=-(s[2][1]-v[1])/o,s=e[0][0],e=e[0][1],r=r-s,a=a-e,h=h-s,l=l-e;t:{r=[[r,a,0,0,p-t],[h,l,0,0,m-t],[0,0,r,a,g-u],[0,0,h,l,b-u]];a=r.length;for(h=0;h<a;h++){for(var l=h,y=Math.abs(r[h][h]),x=h+1;x<a;x++){var w=Math.abs(r[x][h]);w>y&&(y=w,l=x)}if(0===y){r=null;break t}y=r[l];r[l]=r[h];r[h]=y;for(l=h+1;l<a;l++)for(y=-r[l][h]/r[h][h],x=h;x<a+1;x++)r[l][x]=h==x?0:r[l][x]+y*r[h][x]}h=Array(a);for(l=a-1;0<=l;l--)for(h[l]=r[l][a]/r[l][l],y=l-1;0<=y;y--)r[y][a]-=r[y][l]*h[l];r=h}r&&(c.save(),c.beginPath(),ih?(h=(t+p+m)/3,l=(u+g+b)/3,a=hh(h,l,t,u),p=hh(h,l,p,g),m=hh(h,l,m,b),c.moveTo(a[0],a[1]),c.lineTo(p[0],p[1]),c.lineTo(m[0],m[1])):(c.moveTo(t,u),c.lineTo(p,g),c.lineTo(m,b)),c.closePath(),c.clip(),c.transform(r[0],r[2],r[1],r[3],t,u),c.translate(f[0]-s,f[3]-e),c.scale(n/i,-n/i),c.drawImage(d.canvas,0,0),c.restore())}));u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.g.forEach((function(t){var e=t.target;t=(e[0][0]-v[0])/o;var i=-(e[0][1]-v[1])/o,n=(e[1][0]-v[0])/o,s=-(e[1][1]-v[1])/o,r=(e[2][0]-v[0])/o,e=-(e[2][1]-v[1])/o;c.beginPath();c.moveTo(t,i);c.lineTo(n,s);c.lineTo(r,e);c.closePath();c.stroke()})),c.restore());return c.canvas}function uh(t,e,i,n,s){this.f=t;this.c=e;var o={},r=he(this.c,this.f);this.b=function(t){var e=t[0]+"/"+t[1];o[e]||(o[e]=r(t));return o[e]};this.h=n;this.A=s*s;this.g=[];this.j=!1;this.l=this.f.b&&!!n&&!!this.f.B()&&Vt(n)==Vt(this.f.B());this.a=this.f.B()?Vt(this.f.B()):null;this.i=this.c.B()?Vt(this.c.B()):null;t=jt(i);e=[i[2],i[3]];n=[i[2],i[1]];i=Lt(i);s=this.b(t);var a=this.b(e),h=this.b(n),l=this.b(i);ch(this,t,e,n,i,s,a,h,l,10);if(this.j){var u=Infinity;this.g.forEach((function(t){u=Math.min(u,t.source[0][0],t.source[1][0],t.source[2][0])}));this.g.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-u>this.a/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-u>this.a/2&&(e[0][0]-=this.a);e[1][0]-u>this.a/2&&(e[1][0]-=this.a);e[2][0]-u>this.a/2&&(e[2][0]-=this.a);Math.max(e[0][0],e[1][0],e[2][0])-Math.min(e[0][0],e[1][0],e[2][0])<this.a/2&&(t.source=e)}}),this)}o={}}function ch(t,e,i,n,s,o,r,a,h,l){var u=St([o,r,a,h]),c=t.a?Vt(u)/t.a:null,f=t.f.b&&.5<c&&1>c,d=!1;if(0<l){if(t.c.f&&t.i)var p=St([e,i,n,s]),d=d|.25<Vt(p)/t.i;!f&&t.f.f&&c&&(d|=.25<c)}if(d||!t.h||Wt(u,t.h)){if(!(d||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])))if(0<l)d=!0;else return;if(0<l&&(d||(c=t.b([(e[0]+n[0])/2,(e[1]+n[1])/2]),u=f?(k(o[0],t.a)+k(a[0],t.a))/2-k(c[0],t.a):(o[0]+a[0])/2-c[0],c=(o[1]+a[1])/2-c[1],d=u*u+c*c>t.A),d)){Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])?(f=[(i[0]+n[0])/2,(i[1]+n[1])/2],u=t.b(f),c=[(s[0]+e[0])/2,(s[1]+e[1])/2],d=t.b(c),ch(t,e,i,f,c,o,r,u,d,l-1),ch(t,c,f,n,s,d,u,a,h,l-1)):(f=[(e[0]+i[0])/2,(e[1]+i[1])/2],u=t.b(f),c=[(n[0]+s[0])/2,(n[1]+s[1])/2],d=t.b(c),ch(t,e,f,c,s,o,u,d,h,l-1),ch(t,f,i,n,c,u,r,a,d,l-1));return}if(f){if(!t.l)return;t.j=!0}t.g.push({source:[o,a,h],target:[e,n,s]});t.g.push({source:[o,r,a],target:[e,i,n]})}}function fh(t){var e=It();t.g.forEach((function(t){t=t.source;Dt(e,t[0]);Dt(e,t[1]);Dt(e,t[2])}));return e}function dh(t,e,i,n,s,o){this.o=e;this.l=t.B();var r=e.B(),a=r?Nt(i,r):i,r=ah(t,e,zt(a),n);this.i=new uh(t,e,a,this.l,.5*r);this.f=n;this.a=i;t=fh(this.i);this.j=(this.ha=o(t,r,s))?this.ha.h:1;this.eb=this.g=null;s=2;o=[];this.ha&&(s=0,o=this.ha.c);bo.call(this,i,n,this.j,s,o)}g(dh,bo);dh.prototype.L=function(){1==this.state&&(Z(this.eb),this.eb=null);dh.R.L.call(this)};dh.prototype.b=function(){return this.g};dh.prototype.cb=function(){var t=this.ha.I();2==t&&(this.g=lh(Vt(this.a)/this.f,Ot(this.a)/this.f,this.j,this.ha.G(),0,this.f,this.a,this.i,[{extent:this.ha.B(),image:this.ha.b()}],0));this.state=t;yo(this)};dh.prototype.load=function(){if(0==this.state){this.state=1;yo(this);var t=this.ha.I();2==t||3==t?this.cb():(this.eb=G(this.ha,"change",(function(){var t=this.ha.I();if(2==t||3==t)Z(this.eb),this.eb=null,this.cb()}),this),this.ha.load())}};function ph(t){Mn.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state});this.a=null;this.j=0}g(ph,Mn);function vh(t,e,i,n,s){var o=t.c;if(o&&s&&!ae(o,s)){if(t.a){if(t.j==t.g&&ae(t.a.o,s)&&t.a.G()==i&&t.a.h==n&&Ft(t.a.B(),e))return t.a;Q(t.a);t.a=null}t.a=new dh(o,s,e,i,n,function(t){return Zu(this,t)}.bind(t));t.j=t.g;return t.a}o&&(s=o);return Zu(t,e)}ph.prototype.h=function(t){t=t.target;switch(t.I()){case 1:nt(this,new mh(bh,t));break;case 2:nt(this,new mh(yh,t));break;case 3:nt(this,new mh(xh,t))}};function gh(t,e){t.b().src=e}function mh(t,e){tt.call(this,t);this.image=e}g(mh,tt);var bh="imageloadstart",yh="imageloadend",xh="imageloaderror";function wh(t){at.call(this);this.h=void 0;this.a="geometry";this.i=null;this.c=void 0;this.b=null;G(this,lt(this.a),this.kb,this);void 0!==t&&(t instanceof fe||!t?this.Fa(t):this.F(t))}g(wh,at);t=wh.prototype;t.clone=function(){var t=new wh(U({},this.K));_h(t,this.a);var e=this.M();e&&t.Fa(e.clone());if(e=this.i)t.i=e,t.c=e?Mh(e):void 0,t.f();return t};t.M=function(){return this.get(this.a)};t.ya=function(){return this.h};t.Yc=function(){this.f()};t.kb=function(){this.b&&(Z(this.b),this.b=null);var t=this.M();t&&(this.b=G(t,"change",this.Yc,this));this.f()};t.Fa=function(t){this.set(this.a,t)};t.ge=function(t){this.h=t;this.f()};function _h(t,e){q(t,lt(t.a),t.kb,t);t.a=e;G(t,lt(t.a),t.kb,t);t.kb()}function Mh(t){if(!a(t)){var e;e=Array.isArray(t)?t:[t];t=function(){return e}}return t}function Sh(t,e,i){return function(n,s,o){var r=new XMLHttpRequest;r.open("GET",a(t)?t(n,s,o):t,!0);"arraybuffer"==e.X()&&(r.responseType="arraybuffer");r.onload=function(){if(200<=r.status&&300>r.status){var t=e.X(),n;"json"==t||"text"==t?n=r.responseText:"xml"==t?(n=r.responseXML,n||(t=r.responseText,n=(new DOMParser).parseFromString(t,"application/xml"))):"arraybuffer"==t&&(n=r.response);n&&i.call(this,e.Ee(n,{featureProjection:o}),e.Fe(n))}}.bind(this);r.send()}}function Eh(t,e){return Sh(t,e,(function(t){this.zb(t)}))}function Th(){return[[-Infinity,-Infinity,Infinity,Infinity]]}var Ch;(function(){var t={hc:{}};(function(){function e(t,i){if(!(this instanceof e))return new e(t,i);this.xb=Math.max(4,t||9);this.Rb=Math.max(2,Math.ceil(.4*this.xb));i&&this.Fc(i);this.clear()}function i(t,e){t.bbox=n(t,0,t.children.length,e)}function n(t,e,i,n){for(var o=[Infinity,Infinity,-Infinity,-Infinity],r;e<i;e++)r=t.children[e],s(o,t.Y?n(r):r.bbox);return o}function s(t,e){t[0]=Math.min(t[0],e[0]);t[1]=Math.min(t[1],e[1]);t[2]=Math.max(t[2],e[2]);t[3]=Math.max(t[3],e[3])}function o(t,e){return t.bbox[0]-e.bbox[0]}function r(t,e){return t.bbox[1]-e.bbox[1]}function a(t){return(t[2]-t[0])*(t[3]-t[1])}function h(t){return t[2]-t[0]+(t[3]-t[1])}function l(t,e){return t[0]<=e[0]&&t[1]<=e[1]&&e[2]<=t[2]&&e[3]<=t[3]}function u(t,e){return e[0]<=t[2]&&e[1]<=t[3]&&e[2]>=t[0]&&e[3]>=t[1]}function c(t,e,i,n,s){for(var o=[e,i],r;o.length;)i=o.pop(),e=o.pop(),i-e<=n||(r=e+Math.ceil((i-e)/n/2)*n,f(t,e,i,r,s),o.push(e,r,r,i))}function f(t,e,i,n,s){for(var o,r,a,h,l;i>e;){600<i-e&&(o=i-e+1,r=n-e+1,a=Math.log(o),h=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*h*(o-h)/o)*(0>r-o/2?-1:1),a=Math.max(e,Math.floor(n-r*h/o+l)),r=Math.min(i,Math.floor(n+(o-r)*h/o+l)),f(t,a,r,n,s));o=t[n];r=e;h=i;d(t,e,n);for(0<s(t[i],o)&&d(t,e,i);r<h;){d(t,r,h);r++;for(h--;0>s(t[r],o);)r++;for(;0<s(t[h],o);)h--}0===s(t[e],o)?d(t,e,h):(h++,d(t,h,i));h<=n&&(e=h+1);n<=h&&(i=h-1)}}function d(t,e,i){var n=t[e];t[e]=t[i];t[i]=n}e.prototype={all:function(){return this.Nb(this.data,[])},search:function(t){var e=this.data,i=[],n=this.ca;if(!u(t,e.bbox))return i;for(var s=[],o,r,a,h;e;){o=0;for(r=e.children.length;o<r;o++)a=e.children[o],h=e.Y?n(a):a.bbox,u(t,h)&&(e.Y?i.push(a):l(t,h)?this.Nb(a,i):s.push(a));e=s.pop()}return i},load:function(t){if(!t||!t.length)return this;if(t.length<this.Rb){for(var e=0,i=t.length;e<i;e++)this.Aa(t[e]);return this}t=this.Pb(t.slice(),0,t.length-1,0);this.data.children.length?this.data.height===t.height?this.Sb(this.data,t):(this.data.height<t.height&&(e=this.data,this.data=t,t=e),this.Qb(t,this.data.height-t.height-1,!0)):this.data=t;return this},Aa:function(t){t&&this.Qb(t,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],Y:!0};return this},remove:function(t){if(!t)return this;for(var e=this.data,i=this.ca(t),n=[],s=[],o,r,a,h;e||n.length;){e||(e=n.pop(),r=n[n.length-1],o=s.pop(),h=!0);if(e.Y&&(a=e.children.indexOf(t),-1!==a)){e.children.splice(a,1);n.push(e);this.Ec(n);break}h||e.Y||!l(e.bbox,i)?r?(o++,e=r.children[o],h=!1):e=null:(n.push(e),s.push(o),o=0,r=e,e=e.children[0])}return this},ca:function(t){return t},Bb:function(t,e){return t[0]-e[0]},Cb:function(t,e){return t[1]-e[1]},toJSON:function(){return this.data},Nb:function(t,e){for(var i=[];t;)t.Y?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},Pb:function(t,e,n,s){var o=n-e+1,r=this.xb,a;if(o<=r)return a={children:t.slice(e,n+1),height:1,bbox:null,Y:!0},i(a,this.ca),a;s||(s=Math.ceil(Math.log(o)/Math.log(r)),r=Math.ceil(o/Math.pow(r,s-1)));a={children:[],height:s,bbox:null,Y:!1};var o=Math.ceil(o/r),r=o*Math.ceil(Math.sqrt(r)),h,l,u;for(c(t,e,n,r,this.Bb);e<=n;e+=r)for(l=Math.min(e+r-1,n),c(t,e,l,o,this.Cb),h=e;h<=l;h+=o)u=Math.min(h+o-1,l),a.children.push(this.Pb(t,h,u,s-1));i(a,this.ca);return a},Dc:function(t,e,i,n){for(var s,o,r,h,l,u,c,f;;){n.push(e);if(e.Y||n.length-1===i)break;c=f=Infinity;s=0;for(o=e.children.length;s<o;s++)r=e.children[s],l=a(r.bbox),u=r.bbox,u=(Math.max(u[2],t[2])-Math.min(u[0],t[0]))*(Math.max(u[3],t[3])-Math.min(u[1],t[1]))-l,u<f?(f=u,c=l<c?l:c,h=r):u===f&&l<c&&(c=l,h=r);e=h||e.children[0]}return e},Qb:function(t,e,i){var n=this.ca;i=i?t.bbox:n(t);var n=[],o=this.Dc(i,this.data,e,n);o.children.push(t);for(s(o.bbox,i);0<=e;)if(n[e].children.length>this.xb)this.Gc(n,e),e--;else break;this.Ac(i,n,e)},Gc:function(t,e){var n=t[e],s=n.children.length,o=this.Rb;this.Bc(n,o,s);s=this.Cc(n,o,s);s={children:n.children.splice(s,n.children.length-s),height:n.height,bbox:null,Y:!1};n.Y&&(s.Y=!0);i(n,this.ca);i(s,this.ca);e?t[e-1].children.push(s):this.Sb(n,s)},Sb:function(t,e){this.data={children:[t,e],height:t.height+1,bbox:null,Y:!1};i(this.data,this.ca)},Cc:function(t,e,i){var s,o,r,h,l,u,c;l=u=Infinity;for(s=e;s<=i-e;s++)o=n(t,0,s,this.ca),r=n(t,s,i,this.ca),h=Math.max(0,Math.min(o[2],r[2])-Math.max(o[0],r[0]))*Math.max(0,Math.min(o[3],r[3])-Math.max(o[1],r[1])),o=a(o)+a(r),h<l?(l=h,c=s,u=o<u?o:u):h===l&&o<u&&(u=o,c=s);return c},Bc:function(t,e,i){var n=t.Y?this.Bb:o,s=t.Y?this.Cb:r,a=this.Ob(t,e,i,n);e=this.Ob(t,e,i,s);a<e&&t.children.sort(n)},Ob:function(t,e,i,o){t.children.sort(o);o=this.ca;var r=n(t,0,e,o),a=n(t,i-e,i,o),l=h(r)+h(a),u,c;for(u=e;u<i-e;u++)c=t.children[u],s(r,t.Y?o(c):c.bbox),l+=h(r);for(u=i-e-1;u>=e;u--)c=t.children[u],s(a,t.Y?o(c):c.bbox),l+=h(a);return l},Ac:function(t,e,i){for(;0<=i;i--)s(e[i].bbox,t)},Ec:function(t){for(var e=t.length-1,n;0<=e;e--)0===t[e].children.length?0<e?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():i(t[e],this.ca)},Fc:function(t){var e=["return a"," - b",";"];this.Bb=new Function("a","b",e.join(t[0]));this.Cb=new Function("a","b",e.join(t[1]));this.ca=new Function("a","return [a"+t.join(", a")+"];")}};"undefined"!==typeof t?t.hc=e:"undefined"!==typeof self?self.a=e:window.a=e})();Ch=t.hc})();function Ih(t){this.a=Ch(t);this.b={}}t=Ih.prototype;t.Aa=function(t,e){var i=[t[0],t[1],t[2],t[3],e];this.a.Aa(i);this.b[l(e)]=i};t.load=function(t,e){for(var i=Array(e.length),n=0,s=e.length;n<s;n++){var o=t[n],r=e[n],o=[o[0],o[1],o[2],o[3],r];i[n]=o;this.b[l(r)]=o}this.a.load(i)};t.remove=function(t){t=l(t);var e=this.b[t];delete this.b[t];return null!==this.a.remove(e)};function Ah(t){return t.a.all().map((function(t){return t[4]}))}function Ph(t,e){return t.a.search(e).map((function(t){return t[4]}))}function Fh(t,e,i,n){return Dh(Ph(t,e),i,n)}function Dh(t,e,i){for(var n,s=0,o=t.length;s<o&&!(n=e.call(i,t[s]));s++);return n}t.clear=function(){this.a.clear();this.b={}};t.B=function(){return this.a.data.bbox};function kh(t){t=t||{};Mn.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:"ready",wrapX:void 0!==t.wrapX?t.wrapX:!0});this.u=b;this.P=t.format;this.w=t.url;void 0!==t.loader?this.u=t.loader:void 0!==this.w&&(this.u=Eh(this.w,this.P));this.S=void 0!==t.strategy?t.strategy:Th;var e=void 0!==t.useSpatialIndex?t.useSpatialIndex:!0;this.a=e?new Ih:null;this.v=new Ih;this.b={};this.h={};this.j={};this.l={};this.i=null;var i,n;t.features instanceof fi?(i=t.features,n=i.a):Array.isArray(t.features)&&(n=t.features);e||void 0!==i||(i=new fi(n));void 0!==n&&zh(this,n);void 0!==i&&Uh(this,i)}g(kh,Mn);t=kh.prototype;t.yb=function(t){var e=l(t).toString();if(Lh(this,e,t)){Rh(this,e,t);var i=t.M();i?(e=i.B(),this.a&&this.a.Aa(e,t)):this.b[e]=t;nt(this,new Vh("addfeature",t))}this.f()};function Rh(t,e,i){t.l[e]=[G(i,"change",t.jc,t),G(i,"propertychange",t.jc,t)]}function Lh(t,e,i){var n=!0,s=i.ya();void 0!==s?s.toString()in t.h?n=!1:t.h[s.toString()]=i:t.j[e]=i;return n}t.zb=function(t){zh(this,t);this.f()};function zh(t,e){var i,n,s,o,r=[],a=[],h=[];n=0;for(s=e.length;n<s;n++)o=e[n],i=l(o).toString(),Lh(t,i,o)&&a.push(o);n=0;for(s=a.length;n<s;n++){o=a[n];i=l(o).toString();Rh(t,i,o);var u=o.M();u?(i=u.B(),r.push(i),h.push(o)):t.b[i]=o}t.a&&t.a.load(r,h);n=0;for(s=a.length;n<s;n++)nt(t,new Vh("addfeature",a[n]))}function Uh(t,e){var i=!1;G(t,"addfeature",(function(t){i||(i=!0,e.push(t.feature),i=!1)}));G(t,"removefeature",(function(t){i||(i=!0,e.remove(t.feature),i=!1)}));G(e,"add",(function(t){i||(t=t.element,i=!0,this.yb(t),i=!1)}),t);G(e,"remove",(function(t){i||(t=t.element,i=!0,this.vc(t),i=!1)}),t);t.i=e}t.clear=function(t){if(t){for(var e in this.l)this.l[e].forEach(Z);this.i||(this.l={},this.h={},this.j={})}else if(this.a){t=this.Lb;Dh(Ah(this.a),t,this);for(var i in this.b)this.Lb(this.b[i])}this.i&&this.i.clear();this.a&&this.a.clear();this.v.clear();this.b={};nt(this,new Vh("clear"));this.f()};function Oh(t,e,i,n){t.a?Fh(t.a,e,i,n):t.i&&t.i.forEach(i,n)}t.Od=function(){var t;this.i?t=this.i.a:this.a&&(t=Ah(this.a),j(this.b)||ft(t,N(this.b)));return t};t.B=function(){return this.a.B()};t.jc=function(t){t=t.target;var e=l(t).toString(),i=t.M();if(i)if(i=i.B(),e in this.b)delete this.b[e],this.a&&this.a.Aa(i,t);else{if(this.a){var n=this.a,s=l(t);Ft(n.b[s].slice(0,4),i)||(n.remove(t),n.Aa(i,t))}}else e in this.b||(this.a&&this.a.remove(t),this.b[e]=t);i=t.ya();void 0!==i?(i=i.toString(),e in this.j?(delete this.j[e],this.h[i]=t):this.h[i]!==t&&(jh(this,t),this.h[i]=t)):e in this.j||(jh(this,t),this.j[e]=t);this.f();nt(this,new Vh("changefeature",t))};function Nh(t,e,i,n){var s=t.v;e=t.S(e,i);var o,r;o=0;for(r=e.length;o<r;++o){var a=e[o];Fh(s,a,(function(t){return Ct(t.extent,a)}))||(t.u.call(t,a,i,n),s.Aa(a,{extent:a.slice()}))}}t.vc=function(t){var e=l(t).toString();e in this.b?delete this.b[e]:this.a&&this.a.remove(t);this.Lb(t);this.f()};t.Lb=function(t){var e=l(t).toString();this.l[e].forEach(Z);delete this.l[e];var i=t.ya();void 0!==i?delete this.h[i.toString()]:delete this.j[e];nt(this,new Vh("removefeature",t))};function jh(t,e){for(var i in t.h)if(t.h[i]===e){delete t.h[i];break}}function Vh(t,e){tt.call(this,t);this.feature=e}g(Vh,tt);function Wh(t){Aa.call(this,t);this.b=null;this.s=ge()}g(Wh,Aa);Wh.prototype.Z=function(t,e,i,n){var s=this.a;return s.T().Z(t,e.viewState.resolution,e.viewState.rotation,e.skippedFeatureUids,(function(t){return i.call(n,t,s)}))};Wh.prototype.j=function(t,e){var i=t.pixelRatio,n=t.viewState,s=n.center,o=n.resolution,r=this.a.T(),a=t.viewHints,h=t.extent;void 0!==e.extent&&(h=Nt(h,e.extent));a[0]||a[1]||Bt(h)||(n=vh(r,h,o,i,n.projection))&&Mo(this,n)&&(this.b=n);if(this.b){var n=this.b,a=n.B(),h=n.G(),l=n.h,o=i*h/(o*l);xo(this.s,i*t.size[0]/2,i*t.size[1]/2,o,o,0,l*(a[0]-s[0])/h,l*(s[1]-a[3])/h);To(t.attributions,n.c);Co(t,r)}return!!this.b};function Bh(t){Aa.call(this,t);this.h=os();this.c=null;this.u=It();this.v=[0,0,0];this.o=ge();this.zDirection=void 0!==ia(t)?ia(t):0}g(Bh,Aa);Bh.prototype.i=function(t,e,i){var n=Fa(this,t,0);Pa(this,"precompose",i,t,n);var s=t.pixelRatio,o=t.viewState,r=o.center,a=o.projection,h=o.resolution,o=o.rotation,l=t.size,u=Math.round(s*l[0]/2),l=Math.round(s*l[1]/2),s=s/h,c=this.a,f=c.T(),d=f.Fb(a),p=f.qa(a),c=st(c,"render"),v=i,g,m,b,y;if(o||c)v=this.h,g=v.canvas,y=zn(p,h,this.zDirection),b=Wn(f,y,a),y=_n(Ln(p,y)),b=b[0]/y[0],h=i.canvas.width*b,m=i.canvas.height*b,y=Math.round(Math.sqrt(h*h+m*m)),g.width!=y?g.width=g.height=y:v.clearRect(0,0,y,y),g=(y-h)/2/b,m=(y-m)/2/b,s*=b,u=Math.round(b*(u+g)),l=Math.round(b*(l+m));h=v.globalAlpha;v.globalAlpha=e.opacity;var x=this.c,w;e=f.Hb(a)&&1==e.opacity;e||(x.reverse(),w=[]);for(var _=0,M=x.length;_<M;++_){var S=x[_],E=S.V,T=Dn(p,E,this.u),C=E[0],I=Lt(Dn(p,Rn(p,r,C,this.v))),E=Math.round(Vt(T)*s),A=Math.round(Ot(T)*s),P=Math.round((T[0]-I[0])*s/E)*E+u+Math.round((I[0]-r[0])*s),T=Math.round((I[1]-T[3])*s/A)*A+l+Math.round((r[1]-I[1])*s);if(!e){I=[P,T,P+E,T+A];v.save();for(var F=0,D=w.length;F<D;++F){var k=w[F];Wt(I,k)&&(v.beginPath(),v.moveTo(I[0],I[1]),v.lineTo(I[0],I[3]),v.lineTo(I[2],I[3]),v.lineTo(I[2],I[1]),v.moveTo(k[0],k[1]),v.lineTo(k[2],k[1]),v.lineTo(k[2],k[3]),v.lineTo(k[0],k[3]),v.closePath(),v.clip())}w.push(I)}C=Wn(f,C,a);v.drawImage(S.ra(),d,d,C[0],C[1],P,T,E,A);e||v.restore()}c&&(a=g-u/b+u,w=m-l/b+l,r=xo(this.o,y/2-a,y/2-w,s,-s,-o,-r[0]+a/s,-r[1]-w/s),Pa(this,"render",v,t,r));(o||c)&&i.drawImage(v.canvas,-Math.round(g),-Math.round(m),y/b,y/b);v.globalAlpha=h;Pa(this,"postcompose",i,t,n)};Bh.prototype.j=function(t,e){function i(t){t=t.I();return 2==t||4==t||3==t&&!d}var n=t.pixelRatio,s=t.viewState,o=s.projection,r=this.a,a=r.T(),h=a.qa(o),l=zn(h,s.resolution,this.zDirection),u=h.G(l),c=s.center;u==s.resolution?(c=Ao(c,u,t.size),s=Ut(c,u,s.rotation,t.size)):s=t.extent;void 0!==e.extent&&(s=Nt(s,e.extent));if(Bt(s))return!1;u=An(h,s,u);c={};c[l]={};var f=this.l(a,o,c),d=r.get("useInterimTilesOnError"),p=It(),v=new ri(0,0,0,0),g,m,b,y;for(b=u.a;b<=u.f;++b)for(y=u.b;y<=u.g;++y)g=Xu(a,l,b,y,n,o),!i(g)&&g.a&&(g=g.a),i(g)?c[l][g.V.toString()]=g:(m=Cn(h,g.V,f,v,p),m||(g=In(h,g.V,v,p))&&f(l+1,g));f=Object.keys(c).map(Number);f.sort(ut);var p=[],x,v=0;for(b=f.length;v<b;++v)for(x in g=f[v],y=c[g],y)g=y[x],2==g.I()&&p.push(g);this.c=p;Io(t.usedTiles,a,l,u);Po(t,a,h,n,o,s,l,r.get("preload"));Eo(t,a);Co(t,a);return!0};function $h(t){Aa.call(this,t);this.c=!1;this.K=-1;this.w=NaN;this.u=It();this.h=this.v=null;this.o=os()}g($h,Aa);$h.prototype.i=function(t,e,i){var n=t.extent,s=t.pixelRatio,o=e.nb?t.skippedFeatureUids:{},r=t.viewState,a=r.projection,r=r.rotation,h=a.B(),l=this.a.T(),u=Fa(this,t,0);Pa(this,"precompose",i,t,u);var c=this.h;if(c&&!c.f()){var f;st(this.a,"render")?(this.o.canvas.width=i.canvas.width,this.o.canvas.height=i.canvas.height,f=this.o):f=i;var d=f.globalAlpha;f.globalAlpha=e.opacity;e=t.size[0]*s;var p=t.size[1]*s;ra(f,-r,e/2,p/2);c.h(f,s,u,r,o);if(l.s&&a.b&&!Ct(h,n)){for(var a=n[0],l=Vt(h),v=0;a<h[0];)--v,u=l*v,u=Fa(this,t,u),c.h(f,s,u,r,o),a+=l;v=0;for(a=n[2];a>h[2];)++v,u=l*v,u=Fa(this,t,u),c.h(f,s,u,r,o),a-=l;u=Fa(this,t,0)}ra(f,r,e/2,p/2);f!=i&&(Pa(this,"render",f,t,u),i.drawImage(f.canvas,0,0));f.globalAlpha=d}Pa(this,"postcompose",i,t,u)};$h.prototype.Z=function(t,e,i,n){if(this.h){var s=this.a,o={};return this.h.Z(t,e.viewState.resolution,e.viewState.rotation,{},(function(t){var e=l(t).toString();if(!(e in o))return o[e]=!0,i.call(n,t,s)}))}};$h.prototype.D=function(){So(this)};$h.prototype.j=function(t){function e(t){var e,n=t.c;n?e=n.call(t,l):(n=i.i)&&(e=n(t,l));if(e){if(e){n=!1;if(Array.isArray(e))for(var s=0,o=e.length;s<o;++s)n=th(f,t,e[s],Qa(l,u),this.D,this)||n;else n=th(f,t,e,Qa(l,u),this.D,this)||n;t=n}else t=!1;this.c=this.c||t}}var i=this.a,n=i.T();To(t.attributions,n.o);Co(t,n);var s=t.viewHints[0],o=t.viewHints[1],r=i.l,a=i.o;if(!this.c&&!r&&s||!a&&o)return!0;var h=t.extent,a=t.viewState,s=a.projection,l=a.resolution,u=t.pixelRatio,o=i.g,c=i.c,r=i.get("renderOrder");void 0===r&&(r=Ka);h=Et(h,c*l);c=a.projection.B();n.s&&a.projection.b&&!Ct(c,t.extent)&&(t=Math.max(Vt(h)/2,Vt(c)),h[0]=c[0]-t,h[2]=c[2]+t);if(!this.c&&this.w==l&&this.K==o&&this.v==r&&Ct(this.u,h))return!0;this.h=null;this.c=!1;var f=new Ya(.5*l/u,h,l,i.c);Nh(n,h,l,s);if(r){var d=[];Oh(n,h,(function(t){d.push(t)}),this);d.sort(r);d.forEach(e,this)}else Oh(n,h,e,this);qa(f);this.w=l;this.K=o;this.v=r;this.u=h;this.h=f;return!0};function Hh(t,e){var i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(r){if(r)return t.replace(i,r[0].toString()).replace(n,r[1].toString()).replace(s,(function(){return(-r[2]-1).toString()})).replace(o,(function(){var t=e.a?e.a[r[0]]:null;return(t.g-t.b+1+r[2]).toString()}))}}function Xh(t,e){for(var i=t.length,n=Array(i),s=0;s<i;++s)n[s]=Hh(t[s],e);return Gh(n)}function Gh(t){return 1===t.length?t[0]:function(e,i,n){if(e)return t[k((e[1]<<e[0])+e[2],t.length)](e,i,n)}}function Yh(){}function qh(t){jn.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX});this.tileLoadFunction=t.tileLoadFunction;this.tileUrlFunction=this.h?this.h.bind(this):Yh;this.urls=null;if(t.urls){var e=t.urls;this.urls=e;var i=e.join("\n");Zh(this,this.h?this.h.bind(this):Xh(e,this.tileGrid),i)}else if(t.url){var e=t.url,i=[],n=/\{(\d)-(\d)\}/.exec(e)||/\{([a-z])-([a-z])\}/.exec(e);if(n){var s=n[2].charCodeAt(0),o;for(o=n[1].charCodeAt(0);o<=s;++o)i.push(e.replace(n[0],String.fromCharCode(o)))}else i.push(e);i=this.urls=i;Zh(this,this.h?this.h.bind(this):Xh(i,this.tileGrid),e)}t.tileUrlFunction&&Zh(this,t.tileUrlFunction)}g(qh,jn);qh.prototype.u=function(t){t=t.target;switch(t.I()){case 1:nt(this,new $n("tileloadstart",t));break;case 2:nt(this,new $n("tileloadend",t));break;case 3:nt(this,new $n("tileloaderror",t))}};function Zh(t,e,i){t.tileUrlFunction=e;"undefined"!==typeof i?t.Ba!==i&&(t.Ba=i,t.f()):t.f()}qh.prototype.zc=function(t,e,i){t=this.jb(t,e,i);gn(this.a,t)&&this.a.get(t)};function Jh(t,e){ko.call(this,0,e);this.g=os();this.a=this.g.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";t.insertBefore(this.a,t.childNodes[0]||null);this.b=!0;this.c=ge()}g(Jh,ko);Jh.prototype.Zb=function(t){return t instanceof ta?new Wh(t):t instanceof ea?new Bh(t):t instanceof wa?new $h(t):null};function Kh(t,e,i){var n=t.j,s=t.g;if(st(n,e)){var o=i.extent,r=i.pixelRatio,a=i.viewState.rotation,h=i.pixelRatio,l=i.viewState,u=l.resolution;t=xo(t.c,t.a.width/2,t.a.height/2,h/u,-h/u,-l.rotation,-l.center[0],-l.center[1]);o=new _a(s,r,o,t,a);nt(n,new vo(e,n,o,i,s,null))}}Jh.prototype.X=function(){return"canvas"};Jh.prototype.Mb=function(t){if(t){var e=this.g,i=t.pixelRatio,n=Math.round(t.size[0]*i),i=Math.round(t.size[1]*i);this.a.width!=n||this.a.height!=i?(this.a.width=n,this.a.height=i):e.clearRect(0,0,n,i);var s=t.viewState.rotation;Ro(t);Kh(this,"precompose",t);var o=t.layerStatesArray;vt(o);ra(e,s,n/2,i/2);var r=t.viewState.resolution,a,h,l,u;a=0;for(h=o.length;a<h;++a)u=o[a],l=u.layer,l=zo(this,l),mo(u,r)&&"ready"==u.xc&&l.j(t,u)&&l.i(t,u,e);ra(e,-s,n/2,i/2);Kh(this,"postcompose",t);this.b||(hn(this.a,!0),this.b=!0);Uo(this,t);t.postRenderFunctions.push(Lo)}else this.b&&(hn(this.a,!1),this.b=!1)};function Qh(t){this.a=t}function tl(t){this.a=t}g(tl,Qh);tl.prototype.X=function(){return 35632};function el(t){this.a=t}g(el,Qh);el.prototype.X=function(){return 35633};function il(){this.a="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}g(il,tl);i(il);function nl(){this.a="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}"}g(nl,el);i(nl);function sl(t,e){this.j=t.getUniformLocation(e,"j");this.l=t.getUniformLocation(e,"i");this.h=t.getUniformLocation(e,"k");this.i=t.getUniformLocation(e,"h");this.a=t.getAttribLocation(e,"e");this.b=t.getAttribLocation(e,"f");this.g=t.getAttribLocation(e,"c");this.f=t.getAttribLocation(e,"g");this.c=t.getAttribLocation(e,"d")}function ol(t){this.a=void 0!==t?t:[]}function rl(t,e){this.i=t;this.a=e;this.b={};this.c={};this.g={};this.l=this.A=this.h=this.j=null;(this.f=0<=m.indexOf("OES_element_index_uint"))&&e.getExtension("OES_element_index_uint");G(this.i,"webglcontextlost",this.Qd,this);G(this.i,"webglcontextrestored",this.Rd,this)}g(rl,K);function al(t,e,i){var n=t.a,s=i.a,o=String(l(i));if(o in t.b)n.bindBuffer(e,t.b[o].buffer);else{var r=n.createBuffer();n.bindBuffer(e,r);var a;34962==e?a=new Float32Array(s):34963==e&&(a=t.f?new Uint32Array(s):new Uint16Array(s));n.bufferData(e,a,35044);t.b[o]={Be:i,buffer:r}}}function hl(t,e){var i=t.a,n=String(l(e)),s=t.b[n];i.isContextLost()||i.deleteBuffer(s.buffer);delete t.b[n]}t=rl.prototype;t.L=function(){J(this.i);var t=this.a;if(!t.isContextLost()){for(var e in this.b)t.deleteBuffer(this.b[e].buffer);for(e in this.g)t.deleteProgram(this.g[e]);for(e in this.c)t.deleteShader(this.c[e]);t.deleteFramebuffer(this.h);t.deleteRenderbuffer(this.l);t.deleteTexture(this.A)}};t.Pd=function(){return this.a};function ll(t){if(!t.h){var e=t.a,i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i);var n=dl(e,1,1),s=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,s);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,s);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);t.h=i;t.A=n;t.l=s}return t.h}function ul(t,e){var i=String(l(e));if(i in t.c)return t.c[i];var n=t.a,s=n.createShader(e.X());n.shaderSource(s,e.a);n.compileShader(s);return t.c[i]=s}function cl(t,e,i){var n=l(e)+"/"+l(i);if(n in t.g)return t.g[n];var s=t.a,o=s.createProgram();s.attachShader(o,ul(t,e));s.attachShader(o,ul(t,i));s.linkProgram(o);return t.g[n]=o}t.Qd=function(){O(this.b);O(this.c);O(this.g);this.l=this.A=this.h=this.j=null};t.Rd=function(){};t.pb=function(t){if(t==this.j)return!1;this.a.useProgram(t);this.j=t;return!0};function fl(t,e,i){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);void 0!==e&&t.texParameteri(3553,10242,e);void 0!==i&&t.texParameteri(3553,10243,i);return n}function dl(t,e,i){var n=fl(t,void 0,void 0);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null);return n}function pl(t,e){var i=fl(t,33071,33071);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);return i}function vl(t,e){this.u=this.F=void 0;this.A=zt(e);this.s=[];this.i=[];this.w=void 0;this.c=[];this.g=[];this.D=this.K=void 0;this.b=[];this.v=this.l=null;this.W=void 0;this.ma=me();this.na=me();this.$=this.J=void 0;this.oa=me();this.S=this.P=this.O=void 0;this.ja=[];this.j=[];this.a=[];this.o=null;this.f=[];this.H=[];this.da=void 0}g(vl,po);function gl(t,e){var i=t.o,n=t.l,s=t.ja,o=t.j,r=e.a;return function(){if(!r.isContextLost()){var t,a;t=0;for(a=s.length;t<a;++t)r.deleteTexture(s[t]);t=0;for(a=o.length;t<a;++t)r.deleteTexture(o[t])}hl(e,i);hl(e,n)}}function ml(t,e,i,n){var s=t.F,o=t.u,r=t.w,a=t.K,h=t.D,l=t.W,u=t.J,c=t.$,f=t.O?1:0,d=t.P,p=t.S,v=t.da,g=Math.cos(d),d=Math.sin(d),m=t.b.length,b=t.a.length,y,x,w,_,M,S;for(y=0;y<i;y+=n)M=e[y]-t.A[0],S=e[y+1]-t.A[1],x=b/8,w=-p*s,_=-p*(r-o),t.a[b++]=M,t.a[b++]=S,t.a[b++]=w*g-_*d,t.a[b++]=w*d+_*g,t.a[b++]=u/h,t.a[b++]=(c+r)/a,t.a[b++]=l,t.a[b++]=f,w=p*(v-s),_=-p*(r-o),t.a[b++]=M,t.a[b++]=S,t.a[b++]=w*g-_*d,t.a[b++]=w*d+_*g,t.a[b++]=(u+v)/h,t.a[b++]=(c+r)/a,t.a[b++]=l,t.a[b++]=f,w=p*(v-s),_=p*o,t.a[b++]=M,t.a[b++]=S,t.a[b++]=w*g-_*d,t.a[b++]=w*d+_*g,t.a[b++]=(u+v)/h,t.a[b++]=c/a,t.a[b++]=l,t.a[b++]=f,w=-p*s,_=p*o,t.a[b++]=M,t.a[b++]=S,t.a[b++]=w*g-_*d,t.a[b++]=w*d+_*g,t.a[b++]=u/h,t.a[b++]=c/a,t.a[b++]=l,t.a[b++]=f,t.b[m++]=x,t.b[m++]=x+1,t.b[m++]=x+2,t.b[m++]=x,t.b[m++]=x+2,t.b[m++]=x+3}vl.prototype.Xa=function(t,e){this.f.push(this.b.length);this.H.push(e);var i=t.a;ml(this,i,i.length,t.b)};vl.prototype.Ya=function(t,e){this.f.push(this.b.length);this.H.push(e);var i=t.a;ml(this,i,i.length,t.b)};function bl(t,e){var i=e.a;t.s.push(t.b.length);t.i.push(t.b.length);t.o=new ol(t.a);al(e,34962,t.o);t.l=new ol(t.b);al(e,34963,t.l);var n={};yl(t.ja,t.c,n,i);yl(t.j,t.g,n,i);t.F=void 0;t.u=void 0;t.w=void 0;t.c=null;t.g=null;t.K=void 0;t.D=void 0;t.b=null;t.W=void 0;t.J=void 0;t.$=void 0;t.O=void 0;t.P=void 0;t.S=void 0;t.a=null;t.da=void 0}function yl(t,e,i,n){var s,o,r,a=e.length;for(r=0;r<a;++r)s=e[r],o=l(s).toString(),o in i?s=i[o]:(s=pl(n,s),i[o]=s),t[r]=s}vl.prototype.h=function(t,e,i,n,s,o,r,a,h,u,c){o=t.a;al(t,34962,this.o);al(t,34963,this.l);var f=il.za(),d=nl.za(),d=cl(t,f,d);this.v?f=this.v:this.v=f=new sl(o,d);t.pb(d);o.enableVertexAttribArray(f.g);o.vertexAttribPointer(f.g,2,5126,!1,32,0);o.enableVertexAttribArray(f.a);o.vertexAttribPointer(f.a,2,5126,!1,32,8);o.enableVertexAttribArray(f.c);o.vertexAttribPointer(f.c,2,5126,!1,32,16);o.enableVertexAttribArray(f.b);o.vertexAttribPointer(f.b,1,5126,!1,32,24);o.enableVertexAttribArray(f.f);o.vertexAttribPointer(f.f,1,5126,!1,32,28);d=this.oa;xo(d,0,0,2/(i*s[0]),2/(i*s[1]),-n,-(e[0]-this.A[0]),-(e[1]-this.A[1]));e=this.na;i=2/s[0];s=2/s[1];ye(e);e[0]=i;e[5]=s;e[10]=1;e[15]=1;s=this.ma;ye(s);0!==n&&Me(s,-n);o.uniformMatrix4fv(f.i,!1,d);o.uniformMatrix4fv(f.l,!1,e);o.uniformMatrix4fv(f.j,!1,s);o.uniform1f(f.h,r);var p;if(void 0===h)xl(this,o,t,a,this.ja,this.s);else{if(u)t:{n=t.f?5125:5123;t=t.f?4:2;s=this.f.length-1;for(r=this.j.length-1;0<=r;--r)for(o.bindTexture(3553,this.j[r]),u=0<r?this.i[r-1]:0,e=this.i[r];0<=s&&this.f[s]>=u;){p=this.f[s];i=this.H[s];d=l(i).toString();if(void 0===a[d]&&i.M()&&(void 0===c||Wt(c,i.M().B()))&&(o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.drawElements(4,e-p,n,p*t),e=h(i))){a=e;break t}e=p;s--}a=void 0}else o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),xl(this,o,t,a,this.j,this.i),a=(a=h(null))?a:void 0;p=a}o.disableVertexAttribArray(f.g);o.disableVertexAttribArray(f.a);o.disableVertexAttribArray(f.c);o.disableVertexAttribArray(f.b);o.disableVertexAttribArray(f.f);return p};function xl(t,e,i,n,s,o){var r=i.f?5125:5123;i=i.f?4:2;if(j(n)){var a;t=0;n=s.length;for(a=0;t<n;++t){e.bindTexture(3553,s[t]);var h=o[t];e.drawElements(4,h-a,r,a*i);a=h}}else{a=0;var u,h=0;for(u=s.length;h<u;++h){e.bindTexture(3553,s[h]);for(var c=0<h?o[h-1]:0,f=o[h],d=c;a<t.f.length&&t.f[a]<=f;){var p=l(t.H[a]).toString();void 0!==n[p]?(d!==c&&e.drawElements(4,c-d,r,d*i),c=d=a===t.f.length-1?f:t.f[a+1]):c=a===t.f.length-1?f:t.f[a+1];a++}d!==c&&e.drawElements(4,c-d,r,d*i)}}}vl.prototype.Ha=function(t){var e=t.i,i=t.b,n=t.H,s=t.h,o=t.l,r=t.ua(),a=t.A,h=t.N(),u=t.j;t=t.bb;var c;0===this.c.length?this.c.push(i):(c=this.c[this.c.length-1],l(c)!=l(i)&&(this.s.push(this.b.length),this.c.push(i)));0===this.g.length?this.g.push(s):(c=this.g[this.g.length-1],l(c)!=l(s)&&(this.i.push(this.b.length),this.g.push(s)));this.F=e[0];this.u=e[1];this.w=u[1];this.K=n[1];this.D=n[0];this.W=o;this.J=r[0];this.$=r[1];this.P=h;this.O=a;this.S=t;this.da=u[0]};function wl(t,e,i){this.c=e;this.i=t;this.g=i;this.b={}}function _l(t,e){var i=[],n;for(n in t.b)i.push(gl(t.b[n],e));return function(){for(var t=i.length,e,n=0;n<t;n++)e=i[n].apply(this,arguments);return e}}function Ml(t,e){for(var i in t.b)bl(t.b[i],e)}wl.prototype.a=function(t,e){var i=this.b[e];void 0===i&&(i=new El[e](this.i,this.c),this.b[e]=i);return i};wl.prototype.f=function(){return j(this.b)};wl.prototype.h=function(t,e,i,n,s,o,r,a){var h,l,u;h=0;for(l=Da.length;h<l;++h)u=this.b[Da[h]],void 0!==u&&u.h(t,e,i,n,s,o,r,a,void 0,!1)};function Sl(t,e,i,n,s,o,r,a,h,l){var u=Tl,c,f;for(c=Da.length-1;0<=c;--c)if(f=t.b[Da[c]],void 0!==f&&(f=f.h(e,i,n,s,u,o,r,a,h,!0,l)))return f}wl.prototype.Z=function(t,e,i,n,s,o,r,a,h,l){var u=e.a;u.bindFramebuffer(u.FRAMEBUFFER,ll(e));var c;void 0!==this.g&&(c=Et(Pt(t),n*this.g));return Sl(this,e,t,n,s,r,a,h,(function(t){var e=new Uint8Array(4);u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e);if(0<e[3]&&(t=l(t)))return t}),c)};var El={Image:vl},Tl=[1,1];function Cl(t,e,i,n,s,o,r){this.a=t;this.f=e;this.g=o;this.c=r;this.j=s;this.i=n;this.h=i;this.b=null}g(Cl,po);Cl.prototype.Ya=function(t,e){var i=this.a,n=new wl(1,this.g).a(0,"Image");n.Ha(this.b);n.Ya(t,e);bl(n,i);n.h(this.a,this.f,this.h,this.i,this.j,this.c,1,{},void 0,!1);gl(n,i)()};Cl.prototype.Xa=function(t,e){var i=this.a,n=new wl(1,this.g).a(0,"Image");n.Ha(this.b);n.Xa(t,e);bl(n,i);n.h(this.a,this.f,this.h,this.i,this.j,this.c,1,{},void 0,!1);gl(n,i)()};Cl.prototype.Ha=function(t){this.b=t};function Il(){this.a="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}g(Il,tl);i(Il);function Al(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}g(Al,el);i(Al);function Pl(t,e){this.f=t.getUniformLocation(e,"f");this.g=t.getUniformLocation(e,"e");this.h=t.getUniformLocation(e,"d");this.c=t.getUniformLocation(e,"g");this.a=t.getAttribLocation(e,"b");this.b=t.getAttribLocation(e,"c")}function Fl(t,e){_o.call(this,e);this.c=t;this.O=new ol([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.i=this.ia=null;this.j=void 0;this.v=ge();this.J=me();this.s=null}g(Fl,_o);function Dl(t,e,i){var n=t.c.g;if(void 0===t.j||t.j!=i){e.postRenderFunctions.push(function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,n,t.i,t.ia));e=dl(n,i,i);var s=n.createFramebuffer();n.bindFramebuffer(36160,s);n.framebufferTexture2D(36160,36064,3553,e,0);t.ia=e;t.i=s;t.j=i}else n.bindFramebuffer(36160,t.i)}Fl.prototype.qc=function(t,e,i){kl(this,"precompose",i,t);al(i,34962,this.O);var n=i.a,s=Il.za(),o=Al.za(),s=cl(i,s,o);this.s?o=this.s:this.s=o=new Pl(n,s);i.pb(s)&&(n.enableVertexAttribArray(o.a),n.vertexAttribPointer(o.a,2,5126,!1,16,0),n.enableVertexAttribArray(o.b),n.vertexAttribPointer(o.b,2,5126,!1,16,8),n.uniform1i(o.c,0));n.uniformMatrix4fv(o.h,!1,this.v);n.uniformMatrix4fv(o.g,!1,this.J);n.uniform1f(o.f,e.opacity);n.bindTexture(3553,this.ia);n.drawArrays(5,0,4);kl(this,"postcompose",i,t)};function kl(t,e,i,n){t=t.a;if(st(t,e)){var s=n.viewState;nt(t,new vo(e,t,new Cl(i,s.center,s.resolution,s.rotation,n.size,n.extent,n.pixelRatio),n,null,i))}}Fl.prototype.F=function(){this.i=this.ia=null;this.j=void 0};function Rl(t,e){Fl.call(this,t,e);this.b=null}g(Rl,Fl);function Ll(t,e){var i=e.b();return pl(t.c.g,i)}Rl.prototype.Z=function(t,e,i,n){var s=this.a;return s.T().Z(t,e.viewState.resolution,e.viewState.rotation,e.skippedFeatureUids,(function(t){return i.call(n,t,s)}))};Rl.prototype.Kb=function(t,e){var i=this.c.g,n=t.pixelRatio,s=t.viewState,o=s.center,r=s.resolution,a=s.rotation,h=this.b,l=this.ia,u=this.a.T(),c=t.viewHints,f=t.extent;void 0!==e.extent&&(f=Nt(f,e.extent));c[0]||c[1]||Bt(f)||(s=vh(u,f,r,n,s.projection))&&Mo(this,s)&&(h=s,l=Ll(this,s),this.ia&&t.postRenderFunctions.push(function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,i,this.ia)));h&&(i=this.c.c.i,zl(this,i.width,i.height,n,o,r,a,h.B()),n=this.v,ye(n),_e(n,1,-1),we(n,0,-1),this.b=h,this.ia=l,To(t.attributions,h.c),Co(t,u));return!0};function zl(t,e,i,n,s,o,r,a){e*=o;i*=o;t=t.J;ye(t);_e(t,2*n/e,2*n/i);Me(t,-r);we(t,a[0]-s[0],a[1]-s[1]);_e(t,(a[2]-a[0])/2,(a[3]-a[1])/2);we(t,1,1)}function Ul(){this.a="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}g(Ul,tl);i(Ul);function Ol(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}g(Ol,el);i(Ol);function Nl(t,e){this.f=t.getUniformLocation(e,"e");this.g=t.getUniformLocation(e,"d");this.a=t.getAttribLocation(e,"b");this.b=t.getAttribLocation(e,"c")}function jl(t,e){Fl.call(this,t,e);this.K=Ul.za();this.S=Ol.za();this.b=null;this.w=new ol([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.u=this.h=null;this.o=-1;this.D=[0,0];this.zDirection=void 0!==ia(e)?ia(e):0}g(jl,Fl);jl.prototype.L=function(){hl(this.c.c,this.w);jl.R.L.call(this)};jl.prototype.l=function(t,e,i){var n=this.c;return function(s,o){return Vn(t,e,s,o,(function(t){var e=gn(n.b,t.getKey());e&&(i[s]||(i[s]={}),i[s][t.V.toString()]=t);return e}))}};jl.prototype.F=function(){jl.R.F.call(this);this.b=null};jl.prototype.Kb=function(t,e,i){var n=this.c,s=i.a,o=t.viewState,r=o.projection,a=this.a,h=a.T(),l=h.qa(r),u=zn(l,o.resolution,this.zDirection),c=l.G(u),f=Wn(h,u,r),d=f[0]/_n(Ln(l,u),this.D)[0],p=c/d,v=h.Fb(r),g=o.center,m;c==o.resolution?(g=Ao(g,c,t.size),m=Ut(g,c,o.rotation,t.size)):m=t.extent;c=An(l,m,c);if(this.h&&hi(this.h,c)&&this.o==h.g)p=this.u;else{var b=[c.ga(),c.g-c.b+1],y=Math.pow(2,Math.ceil(Math.log(Math.max(b[0]*f[0],b[1]*f[1]))/Math.LN2)),b=p*y,x=l.ua(u),w=x[0]+c.a*f[0]*p,p=x[1]+c.b*f[1]*p,p=[w,p,w+b,p+b];Dl(this,t,y);s.viewport(0,0,y,y);s.clearColor(0,0,0,0);s.clear(16384);s.disable(3042);y=cl(i,this.K,this.S);i.pb(y);this.b||(this.b=new Nl(s,y));al(i,34962,this.w);s.enableVertexAttribArray(this.b.a);s.vertexAttribPointer(this.b.a,2,5126,!1,16,0);s.enableVertexAttribArray(this.b.b);s.vertexAttribPointer(this.b.b,2,5126,!1,16,8);s.uniform1i(this.b.f,0);i={};i[u]={};var _=this.l(h,r,i),M=a.get("useInterimTilesOnError"),y=!0,w=It(),S=new ri(0,0,0,0),E,T,C;for(T=c.a;T<=c.f;++T)for(C=c.b;C<=c.g;++C){x=Xu(h,u,T,C,d,r);if(void 0!==e.extent&&(E=Dn(l,x.V,w),!Wt(E,e.extent)))continue;E=x.I();E=2==E||4==E||3==E&&!M;!E&&x.a&&(x=x.a);E=x.I();if(2==E){if(gn(n.b,x.getKey())){i[u][x.V.toString()]=x;continue}}else if(4==E||3==E&&!M)continue;y=!1;E=Cn(l,x.V,_,S,w);E||(x=In(l,x.V,S,w))&&_(u+1,x)}e=Object.keys(i).map(Number);e.sort(ut);for(var _=new Float32Array(4),I,A,P,M=0,S=e.length;M<S;++M)for(I in A=i[e[M]],A)x=A[I],E=Dn(l,x.V,w),T=2*(E[2]-E[0])/b,C=2*(E[3]-E[1])/b,P=2*(E[0]-p[0])/b-1,E=2*(E[1]-p[1])/b-1,ve(_,T,C,P,E),s.uniform4fv(this.b.g,_),Bl(n,x,f,v*d),s.drawArrays(5,0,4);y?(this.h=c,this.u=p,this.o=h.g):(this.u=this.h=null,this.o=-1,t.animate=!0)}Io(t.usedTiles,h,u,c);var F=n.i;Po(t,h,l,d,r,m,u,a.get("preload"),(function(t){var e;(e=2!=t.I()||gn(n.b,t.getKey()))||(e=t.getKey()in F.f);e||F.g([t,Fn(l,t.V),l.G(t.V[0]),f,v*d])}),this);Eo(t,h);Co(t,h);s=this.v;ye(s);we(s,(g[0]-p[0])/(p[2]-p[0]),(g[1]-p[1])/(p[3]-p[1]));0!==o.rotation&&Me(s,o.rotation);_e(s,t.size[0]*o.resolution/(p[2]-p[0]),t.size[1]*o.resolution/(p[3]-p[1]));we(s,-.5,-.5);return!0};function Vl(t,e){Fl.call(this,t,e);this.h=!1;this.D=-1;this.K=NaN;this.u=It();this.o=this.b=this.w=null}g(Vl,Fl);t=Vl.prototype;t.qc=function(t,e,i){this.o=e;var n=t.viewState,s=this.b;s&&!s.f()&&s.h(i,n.center,n.resolution,n.rotation,t.size,t.pixelRatio,e.opacity,e.nb?t.skippedFeatureUids:{})};t.L=function(){var t=this.b;t&&(_l(t,this.c.c)(),this.b=null);Vl.R.L.call(this)};t.Z=function(t,e,i,n){if(this.b&&this.o){var s=e.viewState,o=this.a,r={};return this.b.Z(t,this.c.c,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,this.o.opacity,{},(function(t){var e=l(t).toString();if(!(e in r))return r[e]=!0,i.call(n,t,o)}))}};t.rc=function(){So(this)};t.Kb=function(t,e,i){function n(t){var e,i=t.c;i?e=i.call(t,l):(i=s.i)&&(e=i(t,l));if(e){if(e){i=!1;if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)i=th(f,t,e[n],Qa(l,u),this.rc,this)||i;else i=th(f,t,e,Qa(l,u),this.rc,this)||i;t=i}else t=!1;this.h=this.h||t}}var s=this.a;e=s.T();To(t.attributions,e.o);Co(t,e);var o=t.viewHints[0],r=t.viewHints[1],a=s.l,h=s.o;if(!this.h&&!a&&o||!h&&r)return!0;var r=t.extent,a=t.viewState,o=a.projection,l=a.resolution,u=t.pixelRatio,a=s.g,c=s.c,h=s.get("renderOrder");void 0===h&&(h=Ka);r=Et(r,c*l);if(!this.h&&this.K==l&&this.D==a&&this.w==h&&Ct(this.u,r))return!0;this.b&&t.postRenderFunctions.push(_l(this.b,i));this.h=!1;var f=new wl(.5*l/u,r,s.c);Nh(e,r,l,o);if(h){var d=[];Oh(e,r,(function(t){d.push(t)}),this);d.sort(h);d.forEach(n,this)}else Oh(e,r,n,this);Ml(f,i);this.K=l;this.D=a;this.w=h;this.u=r;this.b=f;return!0};function Wl(t,e){ko.call(this,0,e);this.a=document.createElement("CANVAS");this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";t.insertBefore(this.a,t.childNodes[0]||null);this.o=this.s=0;this.F=os();this.l=!0;this.g=as(this.a,{antialias:!0,depth:!1,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.c=new rl(this.a,this.g);G(this.a,"webglcontextlost",this.Md,this);G(this.a,"webglcontextrestored",this.Nd,this);this.b=new vn;this.H=null;this.i=new No(function(t){var e=t[1];t=t[2];var i=e[0]-this.H[0],e=e[1]-this.H[1];return 65536*Math.log(t)+Math.sqrt(i*i+e*e)/t}.bind(this),(function(t){return t[0].getKey()}));this.u=function(){if(0!==this.i.a.length){Bo(this.i);var t=jo(this.i);Bl(this,t[0],t[3],t[4])}return!1}.bind(this);this.h=0;Hl(this)}g(Wl,ko);function Bl(t,e,i,n){var s=t.g,o=e.getKey();if(gn(t.b,o))t=t.b.get(o),s.bindTexture(3553,t.ia),9729!=t.nc&&(s.texParameteri(3553,10240,9729),t.nc=9729),9729!=t.oc&&(s.texParameteri(3553,10240,9729),t.oc=9729);else{var r=s.createTexture();s.bindTexture(3553,r);if(0<n){var a=t.F.canvas,h=t.F;t.s!==i[0]||t.o!==i[1]?(a.width=i[0],a.height=i[1],t.s=i[0],t.o=i[1]):h.clearRect(0,0,i[0],i[1]);h.drawImage(e.ra(),n,n,i[0],i[1],0,0,i[0],i[1]);s.texImage2D(3553,0,6408,6408,5121,a)}else s.texImage2D(3553,0,6408,6408,5121,e.ra());s.texParameteri(3553,10240,9729);s.texParameteri(3553,10241,9729);s.texParameteri(3553,10242,33071);s.texParameteri(3553,10243,33071);t.b.set(o,{ia:r,nc:9729,oc:9729})}}t=Wl.prototype;t.Zb=function(t){return t instanceof ta?new Rl(this,t):t instanceof ea?new jl(this,t):t instanceof wa?new Vl(this,t):null};function $l(t,e,i){var n=t.j;if(st(n,e)){t=t.c;var s=i.viewState;nt(n,new vo(e,n,new Cl(t,s.center,s.resolution,s.rotation,i.size,i.extent,i.pixelRatio),i,null,t))}}t.L=function(){var t=this.g;t.isContextLost()||mn(this.b,(function(e){e&&t.deleteTexture(e.ia)}));Q(this.c);Wl.R.L.call(this)};t.Mc=function(t,e){for(var i=this.g,n;1024<this.b.f-this.h;){if(n=this.b.a.Ia)i.deleteTexture(n.ia);else if(+this.b.a.Ba==e.index)break;else--this.h;this.b.pop()}};t.X=function(){return"webgl"};t.Md=function(t){t.preventDefault();this.b.clear();this.h=0;t=this.f;for(var e in t)t[e].F()};t.Nd=function(){Hl(this);this.j.render()};function Hl(t){t=t.g;t.activeTexture(33984);t.blendFuncSeparate(770,771,1,771);t.disable(2884);t.disable(2929);t.disable(3089);t.disable(2960)}t.Mb=function(t){var e=this.c,i=this.g;if(i.isContextLost())return!1;if(!t)return this.l&&(hn(this.a,!1),this.l=!1),!1;this.H=t.focus;this.b.set((-t.index).toString(),null);++this.h;$l(this,"precompose",t);var n=[],s=t.layerStatesArray;vt(s);var o=t.viewState.resolution,r,a,h,l;r=0;for(a=s.length;r<a;++r)l=s[r],mo(l,o)&&"ready"==l.xc&&(h=zo(this,l.layer),h.Kb(t,l,e)&&n.push(l));s=t.size[0]*t.pixelRatio;o=t.size[1]*t.pixelRatio;if(this.a.width!=s||this.a.height!=o)this.a.width=s,this.a.height=o;i.bindFramebuffer(36160,null);i.clearColor(0,0,0,0);i.clear(16384);i.enable(3042);i.viewport(0,0,this.a.width,this.a.height);r=0;for(a=n.length;r<a;++r)l=n[r],h=zo(this,l.layer),h.qc(t,l,e);this.l||(hn(this.a,!0),this.l=!0);Ro(t);1024<this.b.f-this.h&&t.postRenderFunctions.push(this.Mc.bind(this));0!==this.i.a.length&&(t.postRenderFunctions.push(this.u),t.animate=!0);$l(this,"postcompose",t);Uo(this,t);t.postRenderFunctions.push(Lo)};t.Z=function(t,e,i,n,s,o){var r;if(this.g.isContextLost())return!1;var a=e.viewState,h=e.layerStatesArray,l;for(l=h.length-1;0<=l;--l){r=h[l];var u=r.layer;if(mo(r,a.resolution)&&s.call(o,u)&&(r=zo(this,u).Z(t,e,i,n)))return r}};var Xl=["canvas","webgl","dom"];function Gl(t){at.call(this);var e=Jl(t);this.hb=void 0!==t.loadTilesWhileAnimating?t.loadTilesWhileAnimating:!1;this.tb=void 0!==t.loadTilesWhileInteracting?t.loadTilesWhileInteracting:!1;this.vb=void 0!==t.pixelRatio?t.pixelRatio:ds;this.ub=e.logos;this.P=function(){this.h=void 0;this.de.call(this,Date.now())}.bind(this);this.Ja=ge();this.wb=ge();this.gb=0;this.b=null;this.oa=It();this.u=this.D=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(gs?" ol-touch":"");this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.a="none";this.o=document.createElement("DIV");this.o.className="ol-overlaycontainer";this.a.appendChild(this.o);this.l=document.createElement("DIV");this.l.className="ol-overlaycontainer-stopevent";t=["click","dblclick","mousedown","touchstart","mspointerdown",ao,"mousewheel","wheel"];for(var i=0,n=t.length;i<n;++i)G(this.l,t[i],et);this.a.appendChild(this.l);this.ma=new Qs(this);for(var s in uo)G(this.ma,uo[s],this.kc,this);this.S=e.keyboardEventTarget;this.j=null;G(this.a,"wheel",this.Na,this);G(this.a,"mousewheel",this.Na,this);this.s=e.controls;this.i=e.interactions;this.v=e.overlays;this.uc={};this.O=new e.fe(this.a,this);this.J=null;this.w=[];this.na=[];this.ta=new $o(this.Uc.bind(this),this.pd.bind(this));this.sb={};G(this,lt("layergroup"),this.Zc,this);G(this,lt("view"),this.qd,this);G(this,lt("size"),this.md,this);G(this,lt("target"),this.od,this);this.F(e.values);this.s.forEach((function(t){t.setMap(this)}),this);G(this.s,"add",(function(t){t.element.setMap(this)}),this);G(this.s,"remove",(function(t){t.element.setMap(null)}),this);this.i.forEach((function(t){t.setMap(this)}),this);G(this.i,"add",(function(t){t.element.setMap(this)}),this);G(this.i,"remove",(function(t){t.element.setMap(null)}),this);this.v.forEach(this.Ub,this);G(this.v,"add",(function(t){this.Ub(t.element)}),this);G(this.v,"remove",(function(t){var e=t.element.ya();void 0!==e&&delete this.uc[e.toString()];t.element.setMap(null)}),this)}g(Gl,at);t=Gl.prototype;t.Ic=function(t){this.s.push(t)};t.Jc=function(t){this.i.push(t)};t.Tb=function(t){Vr(ql(this)).push(t)};t.Ub=function(t){var e=t.ya();void 0!==e&&(this.uc[e.toString()]=t);t.setMap(this)};t.ea=function(t){this.render();Array.prototype.push.apply(this.w,arguments)};t.L=function(){Q(this.ma);Q(this.O);q(this.a,"wheel",this.Na,this);q(this.a,"mousewheel",this.Na,this);void 0!==this.c&&(y.removeEventListener("resize",this.c,!1),this.c=void 0);this.h&&(y.cancelAnimationFrame(this.h),this.h=void 0);this.set("target",null);Gl.R.L.call(this)};t.Nc=function(t,e,i,n,s){if(this.b)return t=this.pa(t),this.O.Z(t,this.b,e,void 0!==i?i:null,void 0!==n?n:Ht,void 0!==s?s:null)};t.Oc=function(t){return this.pa(Yl(this,t))};function Yl(t,e){var i=t.a.getBoundingClientRect(),n=e.changedTouches?e.changedTouches[0]:e;return[n.clientX-i.left,n.clientY-i.top]}t.$a=function(){var t=this.get("target");return void 0!==t?Hi(t):null};t.pa=function(t){var e=this.b;return e?(t=t.slice(),wo(e.pixelToCoordinateMatrix,t,t)):null};function ql(t){return t.get("layergroup")}t.pc=function(){return Vr(ql(this))};function Zl(t,e){var i=t.b;if(i){var n=e.slice(0,2);return wo(i.coordinateToPixelMatrix,n,n)}return null}t.ba=function(){return this.get("size")};t.C=function(){return this.get("view")};t.Uc=function(t,e,i,n){var s=this.b;if(!(s&&e in s.wantedTiles&&s.wantedTiles[e][t.V.toString()]))return Infinity;t=i[0]-s.focus[0];i=i[1]-s.focus[1];return 65536*Math.log(n)+Math.sqrt(t*t+i*i)/n};t.Na=function(t,e){var i=new Js(e||t.type,this,t);this.kc(i)};t.kc=function(t){if(this.b){this.J=t.coordinate;t.frameState=this.b;var e=this.i.a,i;if(!1!==nt(this,t))for(i=e.length-1;0<=i;i--){var n=e[i];if(n.get("active")&&!n.handleEvent(t))break}}};t.ld=function(){var t=this.b,e=this.ta;if(0!==e.a.length){var i=16,n=i;if(t){var s=t.viewHints;s[0]&&(i=this.hb?8:0,n=2);s[1]&&(i=this.tb?8:0,n=2)}if(e.h<i){Bo(e);for(var s=0,o,r;e.h<i&&s<n&&0<e.a.length;)o=jo(e)[0],r=o.getKey(),0!==o.I()||r in e.c||(e.c[r]=!0,++e.h,++s,o.load())}}e=this.na;i=0;for(n=e.length;i<n;++i)e[i](this,t);e.length=0};t.md=function(){this.render()};t.od=function(){var t;this.get("target")&&(t=this.$a());if(this.j){for(var e=0,i=this.j.length;e<i;++e)Z(this.j[e]);this.j=null}t?(t.appendChild(this.a),t=this.S?this.S:t,this.j=[G(t,"keydown",this.Na,this),G(t,"keypress",this.Na,this)],this.c||(this.c=this.fb.bind(this),y.addEventListener("resize",this.c,!1))):(Zi(this.a),void 0!==this.c&&(y.removeEventListener("resize",this.c,!1),this.c=void 0));this.fb()};t.pd=function(){this.render()};t.rd=function(){this.render()};t.qd=function(){this.D&&(Z(this.D),this.D=null);var t=this.C();t&&(this.D=G(t,"propertychange",this.rd,this));this.render()};t.$c=function(){this.render()};t.ad=function(){this.render()};t.Zc=function(){this.u&&(this.u.forEach(Z),this.u=null);var t=ql(this);t&&(this.u=[G(t,"propertychange",this.ad,this),G(t,"change",this.$c,this)]);this.render()};t.ee=function(){this.h&&y.cancelAnimationFrame(this.h);this.P()};t.render=function(){void 0===this.h&&(this.h=y.requestAnimationFrame(this.P))};t.ae=function(t){return this.i.remove(t)};t.be=function(t){return Vr(ql(this)).remove(t)};t.de=function(t){var i,n,s,o=this.ba(),r=this.C(),h=It(),u=null;if(void 0!==o&&0<o[0]&&0<o[1]&&r&&Ke(r)){i=this.b?this.b.viewHints:void 0;void 0!==i?(i[0]=r.b[0],i[1]=r.b[1],u=i):u=r.b.slice();var c=ql(this).Gb(),f={};i=0;for(n=c.length;i<n;++i)f[l(c[i].layer)]=c[i];s=r.I();u={animate:!1,attributions:{},coordinateToPixelMatrix:this.Ja,extent:h,focus:this.J?this.J:s.center,index:this.gb++,layerStates:f,layerStatesArray:c,logos:U({},this.ub),pixelRatio:this.vb,pixelToCoordinateMatrix:this.wb,postRenderFunctions:[],size:o,skippedFeatureUids:this.sb,tileQueue:this.ta,time:t,usedTiles:{},viewState:s,viewHints:u,wantedTiles:{}}}if(u){t=this.w;i=o=0;for(n=t.length;i<n;++i)r=t[i],r(this,u)&&(t[o++]=r);t.length=o;u.extent=Ut(s.center,s.resolution,s.rotation,u.size,h)}this.b=u;this.O.Mb(u);u&&(u.animate&&this.render(),Array.prototype.push.apply(this.na,u.postRenderFunctions),0!==this.w.length||u.viewHints[0]||u.viewHints[1]||Ft(u.extent,this.oa)||(nt(this,new dn("moveend",this,u)),Tt(u.extent,this.oa)));nt(this,new dn("postrender",this,u));i=h=this.ld;this&&(i=p(h,this));!a(e.setImmediate)||e.Window&&e.Window.prototype&&!Mi("Edge")&&e.Window.prototype.setImmediate==e.setImmediate?(Qn||(Qn=ts()),Qn(i)):e.setImmediate(i)};t.fb=function(){var t=this.$a();if(t){var e=Qi(t),i=Ii&&t.currentStyle,n;if(n=i)$i(e),n=!0;if(n&&"auto"!=i.width&&"auto"!=i.height&&!i.boxSizing)e=ln(t,i.width,"width","pixelWidth"),t=ln(t,i.height,"height","pixelHeight"),t=new Bi(e,t);else{i=new Bi(t.offsetWidth,t.offsetHeight);if(Ii){e=un(t,"paddingLeft");n=un(t,"paddingRight");var s=un(t,"paddingTop"),o=un(t,"paddingBottom"),e=new nn(s,n,o,e)}else e=sn(t,"paddingLeft"),n=sn(t,"paddingRight"),s=sn(t,"paddingTop"),o=sn(t,"paddingBottom"),e=new nn(parseFloat(s),parseFloat(n),parseFloat(o),parseFloat(e));!Ii||9<=Number(ji)?(n=sn(t,"borderLeftWidth"),s=sn(t,"borderRightWidth"),o=sn(t,"borderTopWidth"),t=sn(t,"borderBottomWidth"),t=new nn(parseFloat(o),parseFloat(s),parseFloat(t),parseFloat(n))):(n=fn(t,"borderLeft"),s=fn(t,"borderRight"),o=fn(t,"borderTop"),t=fn(t,"borderBottom"),t=new nn(o,s,t,n));t=new Bi(i.width-t.left-e.left-e.right-t.right,i.height-t.top-e.top-e.bottom-t.bottom)}this.set("size",[t.width,t.height])}else this.set("size",void 0)};function Jl(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i={},n={};if(void 0===t.logo||"boolean"===typeof t.logo&&t.logo)n["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";else{var s=t.logo;"string"===typeof s?n[s]="":s instanceof HTMLElement?n[l(s).toString()]=s:h(s)&&(n[s.src]=s.href)}s=t.layers instanceof jr?t.layers:new jr({layers:t.layers});i.layergroup=s;i.target=t.target;i.view=void 0!==t.view?t.view:new qe;var s=ko,o;void 0!==t.renderer?Array.isArray(t.renderer)?o=t.renderer:"string"===typeof t.renderer&&(o=[t.renderer]):o=Xl;var r,a;r=0;for(a=o.length;r<a;++r){var u=o[r];if("canvas"==u){if(vs){s=Jh;break}}else if("webgl"==u&&hs){s=Wl;break}}void 0!==t.controls?o=Array.isArray(t.controls)?new fi(t.controls.slice()):t.controls:(o={},r=new fi,(void 0!==o.zoom?o.zoom:1)&&r.push(new qn(o.zoomOptions)),(void 0!==o.rotate?o.rotate:1)&&r.push(new Gn(o.rotateOptions)),(void 0!==o.attribution?o.attribution:1)&&r.push(new Hn(o.attributionOptions)),o=r);if(void 0!==t.interactions)r=Array.isArray(t.interactions)?new fi(t.interactions.slice()):t.interactions;else{r={};a=new fi;u=new Ho;(void 0!==r.altShiftDragRotate?r.altShiftDragRotate:1)&&a.push(new fr);(void 0!==r.doubleClickZoom?r.doubleClickZoom:1)&&a.push(new Jo({delta:r.zoomDelta,duration:r.zoomDuration}));(void 0!==r.dragPan?r.dragPan:1)&&a.push(new hr({kinetic:u}));(void 0!==r.pinchRotate?r.pinchRotate:1)&&a.push(new Dr);(void 0!==r.pinchZoom?r.pinchZoom:1)&&a.push(new zr({duration:r.zoomDuration}));if(void 0!==r.keyboard?r.keyboard:1)a.push(new Tr),a.push(new Ir({delta:r.zoomDelta,duration:r.zoomDuration}));(void 0!==r.mouseWheelZoom?r.mouseWheelZoom:1)&&a.push(new Pr({duration:r.zoomDuration}));(void 0!==r.shiftDragZoom?r.shiftDragZoom:1)&&a.push(new Er({duration:r.zoomDuration}));r=a}t=void 0!==t.overlays?Array.isArray(t.overlays)?new fi(t.overlays.slice()):t.overlays:new fi;return{controls:o,interactions:r,keyboardEventTarget:e,logos:n,overlays:t,fe:s,values:i}}ee(Xr);ee(Qr);Qr.forEach((function(t){Xr.forEach((function(e){oe(t,e,Gr);oe(e,t,Yr)}))}));function Kl(t){at.call(this);this.l=t.id;this.j=void 0!==t.insertFirst?t.insertFirst:!0;this.o=void 0!==t.stopEvent?t.stopEvent:!0;this.b=document.createElement("DIV");this.b.className="ol-overlay-container";this.b.style.position="absolute";this.autoPan=void 0!==t.autoPan?t.autoPan:!1;this.h=void 0!==t.autoPanAnimation?t.autoPanAnimation:{};this.i=void 0!==t.autoPanMargin?t.autoPanMargin:20;this.a={ib:"",mb:"",qb:"",rb:"",visible:!0};this.c=null;G(this,lt("element"),this.Xc,this);G(this,lt("map"),this.fd,this);G(this,lt("offset"),this.gd,this);G(this,lt("position"),this.jd,this);G(this,lt("positioning"),this.kd,this);void 0!==t.element&&this.set("element",t.element);this.set("offset",void 0!==t.offset?t.offset:[0,0]);this.set("positioning",void 0!==t.positioning?t.positioning:"top-left");void 0!==t.position&&this.set("position",t.position)}g(Kl,at);t=Kl.prototype;t.ya=function(){return this.l};t.Xc=function(){for(var t=this.b,e;e=t.firstChild;)t.removeChild(e);(t=this.get("element"))&&this.b.appendChild(t)};t.fd=function(){this.c&&(Zi(this.b),Z(this.c),this.c=null);var t=this.get("map");t&&(this.c=G(t,"postrender",this.render,this),eu(this),t=this.o?t.l:t.o,this.j?t.insertBefore(this.b,t.childNodes[0]||null):t.appendChild(this.b))};t.render=function(){eu(this)};t.gd=function(){eu(this)};t.jd=function(){eu(this);if(void 0!==this.get("position")&&this.autoPan){var t=this.get("map");if(void 0!==t&&t.$a()){var e=Ql(t.$a(),t.ba()),i=this.get("element"),n=i.offsetWidth,s=i.currentStyle||y.getComputedStyle(i),n=n+(parseInt(s.marginLeft,10)+parseInt(s.marginRight,10)),s=i.offsetHeight,o=i.currentStyle||y.getComputedStyle(i),s=s+(parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)),r=Ql(i,[n,s]),i=this.i;Ct(e,r)||(n=r[0]-e[0],s=e[2]-r[2],o=r[1]-e[1],r=e[3]-r[3],e=[0,0],0>n?e[0]=n-i:0>s&&(e[0]=Math.abs(s)+i),0>o?e[1]=o-i:0>r&&(e[1]=Math.abs(r)+i),0===e[0]&&0===e[1])||(i=t.C().aa(),n=Zl(t,i),e=[n[0]+e[0],n[1]+e[1]],this.h&&(this.h.source=i,t.ea(ni(this.h))),t.C().la(t.pa(e)))}}};t.kd=function(){eu(this)};t.setMap=function(t){this.set("map",t)};function Ql(t,e){var i=Qi(t),n=new Wi(0,0),s;s=i?Qi(i):document;var o;(o=!Ii||9<=Number(ji))||($i(s),o=!0);t!=(o?s.documentElement:s.body)&&(s=on(t),o=$i(i).a,i=o.scrollingElement?o.scrollingElement:Fi?o.body||o.documentElement:o.documentElement,o=o.parentWindow||o.defaultView,i=Ii&&Oi("10")&&o.pageYOffset!=i.scrollTop?new Wi(i.scrollLeft,i.scrollTop):new Wi(o.pageXOffset||i.scrollLeft,o.pageYOffset||i.scrollTop),n.x=s.left+i.x,n.y=s.top+i.y);return[n.x,n.y,n.x+e[0],n.y+e[1]]}function tu(t,e){t.a.visible!==e&&(hn(t.b,e),t.a.visible=e)}function eu(t){var e=t.get("map"),i=t.get("position");if(void 0!==e&&e.b&&void 0!==i){var i=Zl(e,i),n=e.ba(),e=t.b.style,s=t.get("offset"),o=t.get("positioning"),r=s[0],s=s[1];if("bottom-right"==o||"center-right"==o||"top-right"==o)""!==t.a.mb&&(t.a.mb=e.left=""),r=Math.round(n[0]-i[0]-r)+"px",t.a.qb!=r&&(t.a.qb=e.right=r);else{""!==t.a.qb&&(t.a.qb=e.right="");if("bottom-center"==o||"center-center"==o||"top-center"==o)r-=rn(t.b).width/2;r=Math.round(i[0]+r)+"px";t.a.mb!=r&&(t.a.mb=e.left=r)}if("bottom-left"==o||"bottom-center"==o||"bottom-right"==o)""!==t.a.rb&&(t.a.rb=e.top=""),i=Math.round(n[1]-i[1]-s)+"px",t.a.ib!=i&&(t.a.ib=e.bottom=i);else{""!==t.a.ib&&(t.a.ib=e.bottom="");if("center-left"==o||"center-center"==o||"center-right"==o)s-=rn(t.b).height/2;i=Math.round(i[1]+s)+"px";t.a.rb!=i&&(t.a.rb=e.top=i)}tu(t,!0)}else tu(t,!1)}function iu(t){t=t?t:{};this.c=void 0!==t.collapsed?t.collapsed:!0;this.j=void 0!==t.collapsible?t.collapsible:!0;this.j||(this.c=!1);var e=void 0!==t.className?t.className:"ol-overviewmap",i=void 0!==t.tipLabel?t.tipLabel:"Overview map",n=void 0!==t.collapseLabel?t.collapseLabel:"«";this.o="string"===typeof n?Yi("SPAN",{},n):n;n=void 0!==t.label?t.label:"»";this.s="string"===typeof n?Yi("SPAN",{},n):n;i=Yi("BUTTON",{type:"button",title:i},this.j&&!this.c?this.o:this.s);G(i,"click",this.v,this);n=document.createElement("DIV");n.className="ol-overviewmap-map";var s=this.b=new Gl({controls:new fi,interactions:new fi,target:n,view:t.view});t.layers&&t.layers.forEach((function(t){s.Tb(t)}),this);var o=document.createElement("DIV");o.className="ol-overviewmap-box";o.style.boxSizing="border-box";this.l=new Kl({position:[0,0],positioning:"bottom-left",element:o});this.b.v.push(this.l);e=Yi("DIV",e+" ol-unselectable ol-control"+(this.c&&this.j?" ol-collapsed":"")+(this.j?"":" ol-uncollapsible"),n,i);pn.call(this,{element:e,render:t.render?t.render:nu,target:t.target})}g(iu,pn);iu.prototype.setMap=function(t){var e=this.a;t!==e&&(e&&(e=e.C())&&q(e,lt("rotation"),this.i,this),iu.R.setMap.call(this,t),t&&(this.h.push(G(t,"propertychange",this.u,this)),0===this.b.pc().get("length")&&(e=ql(t),this.b.set("layergroup",e)),t=t.C()))&&(G(t,lt("rotation"),this.i,this),Ke(t)&&(this.b.fb(),su(this)))};iu.prototype.u=function(t){"view"===t.key&&((t=t.oldValue)&&q(t,lt("rotation"),this.i,this),t=this.a.C(),G(t,lt("rotation"),this.i,this))};iu.prototype.i=function(){var t=this.b.C(),e=this.a.C().N();t.set("rotation",e)};function nu(){var t=this.a,e=this.b;if(t.b&&e.b){var i=t.ba(),t=Ze(t.C(),i),n=e.ba(),i=Ze(e.C(),n),s=Zl(e,jt(t)),o=Zl(e,[t[2],t[1]]),e=Math.abs(s[0]-o[0]),s=Math.abs(s[1]-o[1]),o=n[0],n=n[1];e<.1*o||s<.1*n||e>.75*o||s>.75*n?su(this):Ct(i,t)||(t=this.b,i=this.a.C(),t.C().la(i.aa()))}ou(this)}function su(t){var e=t.a;t=t.b;var i=e.ba(),e=Ze(e.C(),i),i=t.ba();t=t.C();$t(e,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2)));t.ic(e,i)}function ou(t){var e=t.a,i=t.b;if(e.b&&i.b){var n=e.ba(),s=e.C(),o=i.C();i.ba();var i=s.N(),e=t.l,r=t.l.get("element"),s=Ze(s,n),n=o.G(),o=Lt(s),s=[s[2],s[3]],a;if(t=t.a.C().aa())a=[o[0]-t[0],o[1]-t[1]],Mt(a,i),_t(a,t);e.set("position",a);r&&(r.style.width=Math.abs((o[0]-s[0])/n)+"px",r.style.height=Math.abs((s[1]-o[1])/n)+"px")}}iu.prototype.v=function(t){t.preventDefault();ru(this)};function ru(t){t.element.classList.toggle("ol-collapsed");t.c?Ji(t.o,t.s):Ji(t.s,t.o);t.c=!t.c;var e=t.b;t.c||e.b||(e.fb(),su(t),Y(e,"postrender",(function(){ou(this)}),t))}function au(t,e,i,n,s){var o=NaN,r=NaN,a=(i-e)/n;if(0!==a)if(1==a)o=t[e],r=t[e+1];else if(2==a)o=.5*t[e]+.5*t[e+n],r=.5*t[e+1]+.5*t[e+n+1];else{var r=t[e],a=t[e+1],h=0,o=[0],l;for(l=e+n;l<i;l+=n){var u=t[l],c=t[l+1],h=h+Math.sqrt((u-r)*(u-r)+(c-a)*(c-a));o.push(h);r=u;a=c}i=.5*h;h=0;l=o.length;for(u=!1;h<l;)r=h+(l-h>>1),a=+ut(o[r],i),0>a?h=r+1:(l=r,u=!a);r=u?h:~h;0>r?(i=(i-o[-r-2])/(o[-r-1]-o[-r-2]),e+=(-r-2)*n,o=t[e],o+=i*(t[e+n]-o),r=t[e+1],r+=i*(t[e+n+1]-r)):(o=t[e+r*n],r=t[e+r*n+1])}return s?(s[0]=o,s[1]=r,s):[o,r]}function hu(t,e){Ee.call(this);this.c=null;this.i=-1;this.U(t,e)}g(hu,Ee);t=hu.prototype;t.clone=function(){var t=new hu(null);Ie(t,this.h,this.a.slice());t.f();return t};t.xa=function(){return ke(this.a,0,this.a.length,this.b)};function lu(t){if(t.i!=t.g){var e;e=au(t.a,0,t.a.length,t.b,t.c);t.c=e;t.i=t.g}return t.c}t.Ma=function(t){var e=[];e.length=Le(this.a,0,this.a.length,this.b,t,e,0);t=new hu(null);Ie(t,"XY",e);t.f();return t};t.X=function(){return"LineString"};t.U=function(t,e){t?(Ae(this,e,t,1),this.a||(this.a=[]),this.a.length=Fe(this.a,0,t,this.b)):Ie(this,"XY",null);this.f()};function uu(t,e){Ee.call(this);this.c=[];this.U(t,e)}g(uu,Ee);t=uu.prototype;t.clone=function(){var t=new uu(null),e=this.c.slice();Ie(t,this.h,this.a.slice());t.c=e;t.f();return t};t.xa=function(){return Re(this.a,0,this.c,this.b)};t.Za=function(){return this.c};function cu(t){var e=[],i=t.a,n=0,s=t.c;t=t.b;var o,r;o=0;for(r=s.length;o<r;++o){var a=s[o],n=au(i,n,a,t);ft(e,n);n=a}return e}t.Ma=function(t){var e=[],i=[],n=this.a,s=this.c,o=this.b,r=0,a=0,h,l;h=0;for(l=s.length;h<l;++h){var u=s[h],a=Le(n,r,u,o,t,e,a);i.push(a);r=u}e.length=a;t=new uu(null);Ie(t,"XY",e);t.c=i;t.f();return t};t.X=function(){return"MultiLineString"};t.U=function(t,e){if(t){Ae(this,e,t,2);this.a||(this.a=[]);var i=De(this.a,0,t,this.b,this.c);this.a.length=0===i.length?0:i[i.length-1]}else i=this.c,Ie(this,"XY",null),this.c=i;this.f()};function fu(t,e){Ee.call(this);this.U(t,e)}g(fu,Ee);fu.prototype.clone=function(){var t=new fu(null);Ie(t,this.h,this.a.slice());t.f();return t};fu.prototype.xa=function(){return ke(this.a,0,this.a.length,this.b)};fu.prototype.X=function(){return"MultiPoint"};fu.prototype.U=function(t,e){t?(Ae(this,e,t,1),this.a||(this.a=[]),this.a.length=Fe(this.a,0,t,this.b)):Ie(this,"XY",null);this.f()};function du(t,e){Ee.call(this);this.c=[];this.u=-1;this.v=null;this.w=-1;this.i=null;this.U(t,e)}g(du,Ee);t=du.prototype;t.clone=function(){for(var t=new du(null),e=this.c.length,i=Array(e),n=0;n<e;++n)i[n]=this.c[n].slice();Ie(t,this.h,this.a.slice());t.c=i;t.f();return t};t.xa=function(t){var e;void 0!==t?(e=vu(this).slice(),$e(e,this.c,this.b,t)):e=this.a;t=e;e=this.c;var i=this.b,n=0,s=[],o=0,r,a;r=0;for(a=e.length;r<a;++r){var h=e[r];s[o++]=Re(t,n,h,i,s[o]);n=h[h.length-1]}s.length=o;return s};function pu(t){if(t.u!=t.g){var e=t.a,i=t.c,n=t.b,s=0,o=[],r,a;r=0;for(a=i.length;r<a;++r){var h=i[r],s=kt(At(Infinity,Infinity,-Infinity,-Infinity,void 0),e,s,h[0],n);o.push((s[0]+s[2])/2,(s[1]+s[3])/2);s=h[h.length-1]}e=vu(t);i=t.c;n=t.b;r=0;a=[];h=0;for(s=i.length;h<s;++h){var l=i[h];a=je(e,r,l,n,o,2*h,a);r=l[l.length-1]}t.v=a;t.u=t.g}return t.v}function vu(t){if(t.w!=t.g){var e=t.a,i;t:{i=t.c;var n,s;n=0;for(s=i.length;n<s;++n)if(!We(e,i[n],t.b,void 0)){i=!1;break t}i=!0}i?t.i=e:(t.i=e.slice(),t.i.length=$e(t.i,t.c,t.b));t.w=t.g}return t.i}t.Ma=function(t){var e=[],i=[],n=this.a,s=this.c,o=this.b;t=Math.sqrt(t);var r=0,a=0,h,l;h=0;for(l=s.length;h<l;++h){var u=s[h],c=[],a=ze(n,r,u,o,t,e,a,c);i.push(c);r=u[u.length-1]}e.length=a;n=new du(null);Ie(n,"XY",e);n.c=i;n.f();return n};t.X=function(){return"MultiPolygon"};t.U=function(t,e){if(t){Ae(this,e,t,3);this.a||(this.a=[]);var i=this.a,n=this.b,s=this.c,o=0,s=s?s:[],r=0,a,h;a=0;for(h=t.length;a<h;++a)o=De(i,o,t[a],n,s[r]),s[r++]=o,o=o[o.length-1];s.length=r;0===s.length?this.a.length=0:(i=s[s.length-1],this.a.length=0===i.length?0:i[i.length-1])}else i=this.c,Ie(this,"XY",null),this.c=i;this.f()};function gu(t,e,i){Ee.call(this);mu(this,t,e?e:0,i)}g(gu,Ee);gu.prototype.clone=function(){var t=new gu(null);Ie(t,this.h,this.a.slice());t.f();return t};gu.prototype.Db=function(t){var e=this.a,i=e[this.b]-e[0];return At(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)};gu.prototype.X=function(){return"Circle"};function mu(t,e,i,n){if(e){Ae(t,n,e,0);t.a||(t.a=[]);n=t.a;e=Pe(n,e);n[e++]=n[0]+i;var s;i=1;for(s=t.b;i<s;++i)n[e++]=n[i];n.length=e}else Ie(t,"XY",null);t.f()}function bu(t,e,i,n,s,o,r){bo.call(this,t,e,i,0,n);this.j=s;this.a=new Image;null!==o&&(this.a.crossOrigin=o);this.g={};this.f=null;this.state=0;this.i=r}g(bu,bo);bu.prototype.b=function(t){if(void 0!==t){var e;t=l(t);if(t in this.g)return this.g[t];j(this.g)?e=this.a:e=this.a.cloneNode(!1);return this.g[t]=e}return this.a};bu.prototype.l=function(){this.state=3;this.f.forEach(Z);this.f=null;yo(this)};bu.prototype.o=function(){void 0===this.resolution&&(this.resolution=Ot(this.extent)/this.a.height);this.state=2;this.f.forEach(Z);this.f=null;yo(this)};bu.prototype.load=function(){0==this.state&&(this.state=1,yo(this),this.f=[Y(this.a,"error",this.l,this),Y(this.a,"load",this.o,this)],this.i(this,this.j))};function yu(t,e,i,n,s){xn.call(this,t,e);this.h=i;this.b=new Image;null!==n&&(this.b.crossOrigin=n);this.f={};this.c=null;this.i=s}g(yu,xn);t=yu.prototype;t.L=function(){1==this.state&&xu(this);this.a&&Q(this.a);this.state=5;wn(this);yu.R.L.call(this)};t.ra=function(t){if(void 0!==t){var e=l(t);if(e in this.f)return this.f[e];t=j(this.f)?this.b:this.b.cloneNode(!1);return this.f[e]=t}return this.b};t.getKey=function(){return this.h};t.Id=function(){this.state=3;xu(this);wn(this)};t.Jd=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;xu(this);wn(this)};t.load=function(){0==this.state&&(this.state=1,wn(this),this.c=[Y(this.b,"error",this.Id,this),Y(this.b,"load",this.Jd,this)],this.i(this,this.h))};function xu(t){t.c.forEach(Z);t.c=null}function wu(t){t=t?t:{};or.call(this,{handleDownEvent:Su,handleDragEvent:_u,handleUpEvent:Mu});this.i=t.condition?t.condition:ir;this.a=this.b=void 0;this.h=0;this.j=void 0!==t.duration?t.duration:400}g(wu,or);function _u(t){if(sr(t)){var e=t.map,i=e.ba(),n=t.pixel;t=n[0]-i[0]/2;n=i[1]/2-n[1];i=Math.atan2(n,t);t=Math.sqrt(t*t+n*n);n=e.C();e.render();if(void 0!==this.b){var s=i-this.b;Yo(e,n,n.N()-s)}this.b=i;void 0!==this.a&&(i=this.a*(n.G()/t),Zo(e,n,i));void 0!==this.a&&(this.h=this.a/t);this.a=t}}function Mu(t){if(!sr(t))return!0;t=t.map;var e=t.C();Qe(e,-1);var i=this.h-1,n=e.N(),n=e.constrainRotation(n,0);Yo(t,e,n,void 0,void 0);var n=e.G(),s=this.j,n=e.constrainResolution(n,0,i);Zo(t,e,n,void 0,s);this.h=0;return!1}function Su(t){return sr(t)&&this.i(t)?(Qe(t.map.C(),1),this.a=this.b=void 0,!0):!1}function Eu(t,e){tt.call(this,t);this.feature=e}g(Eu,tt);function Tu(t){or.call(this,{handleDownEvent:Au,handleEvent:Iu,handleUpEvent:Pu});this.O=null;this.o=!1;this.gb=t.source?t.source:null;this.ta=t.features?t.features:null;this.Kc=t.snapTolerance?t.snapTolerance:12;this.D=t.type;this.b=Ou(this.D);this.oa=t.minPoints?t.minPoints:this.b===Vu?3:2;this.na=t.maxPoints?t.maxPoints:Infinity;this.tb=t.finishCondition?t.finishCondition:Ht;var e=t.geometryFunction;if(!e)if("Circle"===this.D)e=function(t,e){var i=e?e:new gu([NaN,NaN]),n=t[0],s=t[1],o=n[0]-s[0],n=n[1]-s[1];mu(i,t[0],Math.sqrt(o*o+n*n));return i};else{var i,e=this.b;e===Nu?i=Oe:e===ju?i=hu:e===Vu&&(i=He);e=function(t,e){var n=e;n?n.U(t):n=new i(t);return n}}this.u=e;this.w=this.j=this.a=this.l=this.h=this.i=null;this.Lc=t.clickTolerance?t.clickTolerance*t.clickTolerance:36;this.S=new wa({source:new kh({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Cu()});this.Ja=t.geometryName;this.Hc=t.condition?t.condition:er;this.ma=t.freehandCondition?t.freehandCondition:ir;G(this,lt("active"),this.hb,this)}g(Tu,or);function Cu(){var t=ya();return function(e){return t[e.M().X()]}}Tu.prototype.setMap=function(t){Tu.R.setMap.call(this,t);this.hb()};function Iu(t){this.b!==ju&&this.b!==Vu||!this.ma(t)||(this.o=!0);var e=!this.o;this.o&&t.type===oo?(Ru(this,t),e=!1):t.type===ro?e=Fu(this,t):t.type===so&&(e=!1);return ar.call(this,t)&&e}function Au(t){return this.Hc(t)?(this.O=t.pixel,!0):this.o?(this.O=t.pixel,this.i||ku(this,t),!0):!1}function Pu(t){this.o=!1;var e=this.O,i=t.pixel,n=e[0]-i[0],e=e[1]-i[1],i=!0;n*n+e*e<=this.Lc&&(Fu(this,t),this.i?this.b===Wu?Lu(this):Du(this,t)?this.tb(t)&&Lu(this):Ru(this,t):(ku(this,t),this.b===Nu&&Lu(this)),i=!1);return i}function Fu(t,e){if(t.i){var i=e.coordinate,n=t.h.M(),s;t.b===Nu?s=t.a:t.b===Vu?(s=t.a[0],s=s[s.length-1],Du(t,e)&&(i=t.i.slice())):(s=t.a,s=s[s.length-1]);s[0]=i[0];s[1]=i[1];t.u(t.a,n);t.l&&t.l.M().U(i);n instanceof He&&t.b!==Vu?(t.j||(t.j=new wh(new hu(null))),0>=n.c.length?n=null:(i=new Ue(null),Ie(i,n.h,n.a.slice(0,n.c[0])),i.f(),n=i),i=t.j.M(),Ie(i,n.h,n.a),i.f()):t.w&&(i=t.j.M(),i.U(t.w));Uu(t)}else n=e.coordinate.slice(),t.l?t.l.M().U(n):(t.l=new wh(new Oe(n)),Uu(t));return!0}function Du(t,e){var i=!1;if(t.h){var n=!1,s=[t.i];t.b===ju?n=t.a.length>t.oa:t.b===Vu&&(n=t.a[0].length>t.oa,s=[t.a[0][0],t.a[0][t.a[0].length-2]]);if(n)for(var n=e.map,o=0,r=s.length;o<r;o++){var a=s[o],h=Zl(n,a),l=e.pixel,i=l[0]-h[0],h=l[1]-h[1],l=t.o&&t.ma(e)?1:t.Kc;if(i=Math.sqrt(i*i+h*h)<=l){t.i=a;break}}}return i}function ku(t,e){var i=e.coordinate;t.i=i;t.b===Nu?t.a=i.slice():t.b===Vu?(t.a=[[i.slice(),i.slice()]],t.w=t.a[0]):(t.a=[i.slice(),i.slice()],t.b===Wu&&(t.w=t.a));t.w&&(t.j=new wh(new hu(t.w)));i=t.u(t.a);t.h=new wh;t.Ja&&_h(t.h,t.Ja);t.h.Fa(i);Uu(t);nt(t,new Eu("drawstart",t.h))}function Ru(t,e){var i=e.coordinate,n=t.h.M(),s,o;if(t.b===ju)t.i=i.slice(),o=t.a,o.push(i.slice()),s=o.length>t.na,t.u(o,n);else if(t.b===Vu){o=t.a[0];o.push(i.slice());if(s=o.length>t.na)t.i=o[0];t.u(t.a,n)}Uu(t);s&&Lu(t)}function Lu(t){var e=zu(t),i=t.a,n=e.M();t.b===ju?(i.pop(),t.u(i,n)):t.b===Vu&&(i[0].pop(),i[0].push(i[0][0]),t.u(i,n));"MultiPoint"===t.D?e.Fa(new fu([i])):"MultiLineString"===t.D?e.Fa(new uu([i])):"MultiPolygon"===t.D&&e.Fa(new du([i]));nt(t,new Eu("drawend",e));t.ta&&t.ta.push(e);t.gb&&t.gb.yb(e)}function zu(t){t.i=null;var e=t.h;e&&(t.h=null,t.l=null,t.j=null,t.S.T().clear(!0));return e}Tu.prototype.v=Xt;function Uu(t){var e=[];t.h&&e.push(t.h);t.j&&e.push(t.j);t.l&&e.push(t.l);t=t.S.T();t.clear(!0);t.zb(e)}Tu.prototype.hb=function(){var t=this.P,e=this.get("active");t&&e||zu(this);this.S.setMap(e?t:null)};function Ou(t){var e;"Point"===t||"MultiPoint"===t?e=Nu:"LineString"===t||"MultiLineString"===t?e=ju:"Polygon"===t||"MultiPolygon"===t?e=Vu:"Circle"===t&&(e=Wu);return e}var Nu="Point",ju="LineString",Vu="Polygon",Wu="Circle";function Bu(t,e,i,n,s,o,r,a,h,l,u){xn.call(this,s,0);this.F=void 0!==u?u:!1;this.s=r;this.o=a;this.g=null;this.f={};this.c=e;this.i=n;this.j=o?o:s;this.b=[];this.Qa=null;this.h=0;o=Dn(n,this.j);a=this.i.B();s=this.c.B();o=a?Nt(o,a):o;if(0===Rt(o))this.state=4;else if((a=t.B())&&(s?s=Nt(s,a):s=a),n=n.G(this.j[0]),n=ah(t,i,zt(o),n),!isFinite(n)||0>=n)this.state=4;else if(this.l=new uh(t,i,o,s,n*(void 0!==l?l:.5)),0===this.l.g.length)this.state=4;else if(this.h=zn(e,n),i=fh(this.l),s&&(t.b?(i[1]=F(i[1],s[1],s[3]),i[3]=F(i[3],s[1],s[3])):i=Nt(i,s)),Rt(i))if(t=Pn(e,i,this.h),100>t.ga()*(t.g-t.b+1)){for(e=t.a;e<=t.f;e++)for(i=t.b;i<=t.g;i++)(l=h(this.h,e,i,r))&&this.b.push(l);0===this.b.length&&(this.state=4)}else this.state=3;else this.state=4}g(Bu,xn);Bu.prototype.L=function(){1==this.state&&(this.Qa.forEach(Z),this.Qa=null);Bu.R.L.call(this)};Bu.prototype.ra=function(t){if(void 0!==t){var e=l(t);if(e in this.f)return this.f[e];t=j(this.f)?this.g:this.g.cloneNode(!1);return this.f[e]=t}return this.g};Bu.prototype.cb=function(){var t=[];this.b.forEach((function(e){e&&2==e.I()&&t.push({extent:Dn(this.c,e.V),image:e.ra()})}),this);this.b.length=0;if(0===t.length)this.state=3;else{var e=this.j[0],i=Ln(this.i,e),n=r(i)?i:i[0],i=r(i)?i:i[1],e=this.i.G(e),s=this.c.G(this.h),o=Dn(this.i,this.j);this.g=lh(n,i,this.s,s,this.c.B(),e,o,this.l,t,this.o,this.F);this.state=2}wn(this)};Bu.prototype.load=function(){if(0==this.state){this.state=1;wn(this);var t=0;this.Qa=[];this.b.forEach((function(e){var i=e.I();if(0==i||1==i){t++;var n;n=G(e,"change",(function(){var i=e.I();if(2==i||3==i||4==i)Z(n),t--,0===t&&(this.Qa.forEach(Z),this.Qa=null,this.cb())}),this);this.Qa.push(n)}}),this);this.b.forEach((function(t){0==t.I()&&t.load()}));0===t&&y.setTimeout(this.cb.bind(this),0)}};function $u(t){qh.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Yu,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX});this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null;this.tileClass=void 0!==t.tileClass?t.tileClass:yu;this.b={};this.i={};this.w=t.reprojectionErrorThreshold}g($u,qh);t=$u.prototype;t.sc=function(){if(yn(this.a))return!0;for(var t in this.b)if(yn(this.b[t]))return!0;return!1};t.Ka=function(t,e){var i=this.ab(t);this.a.Ka(this.a==i?e:{});for(var n in this.b){var s=this.b[n];s.Ka(s==i?e:{})}};t.Fb=function(){return 0};t.Hb=function(t){return this.c&&t&&!ae(this.c,t)?!1:$u.R.Hb.call(this,t)};t.qa=function(t){var e=this.c;return!this.tileGrid||e&&!ae(e,t)?(e=l(t).toString(),e in this.i||(this.i[e]=On(t)),this.i[e]):this.tileGrid};t.ab=function(t){var e=this.c;if(!e||ae(e,t))return this.a;t=l(t).toString();t in this.b||(this.b[t]=new bn);return this.b[t]};function Hu(t,e,i,n,s,o,r){e=[e,i,n];s=(i=Bn(t,e,o))?t.tileUrlFunction(i,s,o):void 0;s=new t.tileClass(e,void 0!==s?0:4,void 0!==s?s:"",t.crossOrigin,t.tileLoadFunction);s.key=r;G(s,"change",t.u,t);return s}function Xu(t,e,i,n,s,o){if(t.c&&o&&!ae(t.c,o)){s=t.ab(o);i=[e,i,n];e=t.jb.apply(t,i);if(gn(s,e))return s.get(e);var r=t.c;n=t.qa(r);var a=t.qa(o),h=Bn(t,i,o);t=new Bu(r,n,o,a,i,h,t.j,0,function(t,e,i,n){return Gu(this,t,e,i,n,r)}.bind(t),t.w,!1);s.set(e,t);return t}return Gu(t,e,i,n,s,o)}function Gu(t,e,i,n,s,o){var r,a=t.jb(e,i,n),h=t.getKey();if(gn(t.a,a)){if(r=t.a.get(a),r.key!=h){var l=r;r.a&&r.a.key==h?(r=r.a,2==l.I()&&(r.a=l)):(r=Hu(t,e,i,n,s,o,h),2==l.I()?r.a=l:l.a&&2==l.a.I()&&(r.a=l.a,l.a=null));r.a&&(r.a.a=null);t.a.replace(a,r)}}else r=Hu(t,e,i,n,s,o,h),t.a.set(a,r);return r}function Yu(t,e){t.ra().src=e}function qu(t){var e=t.imageExtent,i=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:gh;ph.call(this,{attributions:t.attributions,logo:t.logo,projection:re(t.projection)});this.b=new bu(e,void 0,1,this.o,t.url,i,n);this.i=t.imageSize?t.imageSize:null;G(this.b,"change",this.h,this)}g(qu,ph);function Zu(t,e){return Wt(e,t.b.B())?t.b:null}qu.prototype.h=function(t){if(2==this.b.I()){var e=this.b.B(),i=this.b.b(),n,s;this.i?(n=this.i[0],s=this.i[1]):(n=i.width,s=i.height);e=Math.ceil(Vt(e)/(Ot(e)/s));if(e!=n){var e=os(e,s),o=e.canvas;e.drawImage(i,0,0,n,s,0,0,o.width,o.height);this.b.a=o}}qu.R.h.call(this,t)};function Ju(t){t=t||{};var e=t.size,i=e[0],n=e[1],s=[],o=256;switch(void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default"){case"default":for(;i>o||n>o;)s.push([Math.ceil(i/o),Math.ceil(n/o)]),o+=o;break;case"truncated":for(;i>o||n>o;)s.push([Math.ceil(i/o),Math.ceil(n/o)]),i>>=1,n>>=1}s.push([1,1]);s.reverse();for(var o=[1],r=[0],n=1,i=s.length;n<i;n++)o.push(1<<n),r.push(s[n-1][0]*s[n-1][1]+r[n-1]);o.reverse();var n=void 0!==t.offset?t.offset:[0,0],e=[n[0],n[1]+-e[1],n[0]+e[0],n[1]],e=new En({extent:e,origin:jt(e),resolutions:o}),a=t.url;$u.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:Ku,tileGrid:e,tileUrlFunction:function(t){if(t){var e=t[0],i=t[1];t=-t[2]-1;return a+"TileGroup"+((i+t*s[e][0]+r[e])/256|0)+"/"+e+"-"+i+"-"+t+".jpg"}}})}g(Ju,$u);function Ku(t,e,i,n,s){yu.call(this,t,e,i,n,s);this.g={}}g(Ku,yu);Ku.prototype.ra=function(t){var e=void 0!==t?l(t).toString():"";if(e in this.g)return this.g[e];t=Ku.R.ra.call(this,t);if(2==this.state){if(256==t.width&&256==t.height)return this.g[e]=t;var i=os(256,256);i.drawImage(t,0,0);return this.g[e]=i.canvas}return t};v("ol.animation.rotate",si);v("ol.animation.zoom",oi);v("ol.Collection",fi);fi.prototype.getArray=fi.prototype.Hd;v("ol.control.Control",pn);pn.prototype.changed=pn.prototype.f;v("ol.control.Zoom",qn);v("ol.control.MousePosition",Zn);v("ol.control.OverviewMap",iu);v("ol.coordinate.createStringXY",(function(t){return function(e){return e?"{x}, {y}".replace("{x}",e[0].toFixed(t)).replace("{y}",e[1].toFixed(t)):""}}));v("ol.events.condition.noModifierKeys",er);v("ol.extent.getCenter",zt);v("ol.extent.getIntersection",Nt);v("ol.extent.getTopLeft",jt);v("ol.Feature",wh);wh.prototype.clone=wh.prototype.clone;wh.prototype.get=wh.prototype.get;wh.prototype.getId=wh.prototype.ya;wh.prototype.getGeometry=wh.prototype.M;wh.prototype.setGeometry=wh.prototype.Fa;wh.prototype.setId=wh.prototype.ge;wh.prototype.setProperties=wh.prototype.F;v("ol.geom.Polygon",He);He.prototype.getCoordinates=He.prototype.xa;He.prototype.getExtent=He.prototype.B;He.prototype.setCoordinates=He.prototype.U;v("ol.has.CANVAS",vs);v("ol.inherits",g);v("ol.interaction.DragBox",xr);v("ol.interaction.DragPan",hr);v("ol.interaction.DragRotate",fr);v("ol.interaction.DragRotateAndZoom",wu);v("ol.interaction.DragZoom",Er);v("ol.interaction.Draw",Tu);Tu.prototype.on=Tu.prototype.$;v("ol.interaction.KeyboardPan",Tr);v("ol.interaction.KeyboardZoom",Ir);v("ol.interaction.MouseWheelZoom",Pr);v("ol.interaction.PinchRotate",Dr);v("ol.interaction.PinchZoom",zr);yu.prototype.getImage=yu.prototype.ra;v("ol.layer.Image",ta);v("ol.layer.Layer",go);go.prototype.changed=go.prototype.f;go.prototype.getSource=go.prototype.T;go.prototype.on=go.prototype.$;go.prototype.un=go.prototype.da;v("ol.layer.Tile",ea);v("ol.layer.Vector",wa);wa.prototype.getSource=wa.prototype.T;v("ol.proj.Projection",Jt);Jt.prototype.getExtent=Jt.prototype.B;v("ol.Map",Gl);Gl.prototype.addControl=Gl.prototype.Ic;Gl.prototype.addInteraction=Gl.prototype.Jc;Gl.prototype.addLayer=Gl.prototype.Tb;Gl.prototype.beforeRender=Gl.prototype.ea;Gl.prototype.forEachFeatureAtPixel=Gl.prototype.Nc;Gl.prototype.getEventCoordinate=Gl.prototype.Oc;Gl.prototype.getLayers=Gl.prototype.pc;Gl.prototype.getSize=Gl.prototype.ba;Gl.prototype.getTargetElement=Gl.prototype.$a;Gl.prototype.getView=Gl.prototype.C;Gl.prototype.on=Gl.prototype.$;Gl.prototype.render=Gl.prototype.render;Gl.prototype.renderSync=Gl.prototype.ee;Gl.prototype.removeInteraction=Gl.prototype.ae;Gl.prototype.removeLayer=Gl.prototype.be;Gl.prototype.un=Gl.prototype.da;Gl.prototype.updateSize=Gl.prototype.fb;v("ol.proj.Projection",Jt);v("ol.source.ImageStatic",qu);Mn.prototype.getProjection=Mn.prototype.O;v("ol.source.TileImage",$u);v("ol.source.Vector",kh);kh.prototype.addFeature=kh.prototype.yb;kh.prototype.addFeatures=kh.prototype.zb;kh.prototype.clear=kh.prototype.clear;kh.prototype.getFeatures=kh.prototype.Od;kh.prototype.removeFeature=kh.prototype.vc;v("ol.source.Zoomify",Ju);v("ol.style.Fill",aa);v("ol.style.Style",pa);v("ol.style.Stroke",fa);v("ol.tilegrid.TileGrid",En);v("ol.View",qe);qe.prototype.fit=qe.prototype.ic;qe.prototype.getCenter=qe.prototype.aa;qe.prototype.getRotation=qe.prototype.N;qe.prototype.getResolution=qe.prototype.G;qe.prototype.getZoom=qe.prototype.Vc;qe.prototype.on=qe.prototype.$;qe.prototype.rotate=qe.prototype.rotate;qe.prototype.setCenter=qe.prototype.la;qe.prototype.setResolution=qe.prototype.Pa;qe.prototype.setZoom=qe.prototype.he;qe.prototype.un=qe.prototype.da;rl.prototype.getGL=rl.prototype.Pd;rl.prototype.useProgram=rl.prototype.pb})();"use strict";
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */if(String.prototype.endsWith===undefined){String.prototype.endsWith=function(t,e){if(t===null||t===""||e!==null&&t.length>e||t.length>this.length){return false}e=e===null||e>this.length||e<=0?this.length:e;var i=this.substr(0,e);return i.lastIndexOf(t)===e-t.length}}var dlfUtils;dlfUtils=dlfUtils||{};dlfUtils.CUSTOM_MIMETYPE={IIIF:"application/vnd.kitodo.iiif",IIP:"application/vnd.netfpx",ZOOMIFY:"application/vnd.kitodo.zoomify"};dlfUtils.RUNNING_INDEX=99999999;dlfUtils.createOl3Layers=function(t,e){var i=e!==undefined?e:null,n=0,s=0,o=[];t.forEach((function(t){var e=void 0;if(n>0){s=n}var r=[s,-t.height,t.width+s,0],a=void 0;if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.ZOOMIFY){a=new ol.layer.Tile({source:new ol.source.Zoomify({url:t.src,size:[t.width,t.height],crossOrigin:i,offset:[s,0]}),zDirection:-1})}else if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.IIIF){var h=t.qualities!==undefined&&t.qualities.length>0?$.inArray("color",t.qualities)>=0?"color":$.inArray("native",t.qualities)>=0?"native":"default":"default";a=new ol.layer.Tile({source:new dlfViewerSource.IIIF({url:t.src,version:t.version,size:[t.width,t.height],crossOrigin:i,resolutions:t.resolutions,tileSize:t.tilesize,sizes:t.sizes,format:"jpg",quality:h,supports:t.supports,offset:[s,0],projection:new ol.proj.Projection({code:"kitodo-image",units:"pixels",extent:r})}),zDirection:-1})}else if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.IIP){e=t.tilesize!==undefined&&t.tilesize.length>0?t.tilesize[0]:256;a=new ol.layer.Tile({source:new dlfViewerSource.IIP({url:t.src,size:[t.width,t.height],crossOrigin:i,tileSize:e,offset:[s,0]}),zDirection:-1})}else{a=new ol.layer.Image({source:new ol.source.ImageStatic({url:t.src,projection:new ol.proj.Projection({code:"kitodo-image",units:"pixels",extent:r}),imageExtent:r,crossOrigin:i})})}o.push(a);n+=t.width}));return o};dlfUtils.createOl3View=function(t){var e=t.reduce((function(t,e){return t+e.width}),0),i=t.reduce((function(t,e){return Math.max(t,e.height)}),0),n=[0,-i,e,0];window.OL3_MAX_ZOOM=8;var s=new ol.proj.Projection({code:"kitodo-image",units:"pixels",extent:n});var o={projection:s,center:ol.extent.getCenter(n),zoom:1,maxZoom:window.OL3_MAX_ZOOM,extent:n};return new ol.View(o)};dlfUtils.exists=function(t){return t!==undefined};dlfUtils.fetchImageData=function(t){var e=new $.Deferred;var i=[],n=0,s=function s(){n+=1;if(n===t.length){e.resolve(i)}};t.forEach((function(t,e){if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.ZOOMIFY){dlfUtils.fetchZoomifyData(t).done((function(t){i[e]=t;s()}))}else if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.IIIF){dlfUtils.getIIIFResource(t).done((function(t){i[e]=t;s()}))}else if(t.mimetype===dlfUtils.CUSTOM_MIMETYPE.IIP){dlfUtils.fetchIIPData(t).done((function(t){i[e]=t;s()}))}else{dlfUtils.fetchStaticImageData(t).done((function(t){i[e]=t;s()}))}}));return e};dlfUtils.fetchStaticImageData=function(t){var e=new $.Deferred;var i=new Image;i.onload=function(){var i={src:this.src,mimetype:t.mimetype,width:this.width,height:this.height};e.resolve(i)};i.src=t.url;return e};dlfUtils.getIIIFResource=function t(e){var i=new $.Deferred;var n="GET";$.ajax({url:dlfViewerSource.IIIF.getMetdadataURL(e.url),type:n,dataType:"json"}).done(s);function s(t){var n=e.mimetype,s,o;if(dlfUtils.supportsIIIF(t)){if(t["@context"]&&t["@context"]==="http://iiif.io/api/image/2/context.json"){s=decodeURI(t["@id"]);s=dlfUtils.removeInfoJson(s);o=dlfUtils.buildImageV2(n,s,t);i.resolve(o)}else if(t["@context"]&&(t["@context"]==="http://iiif.io/api/image/3/context.json"||Array.isArray(t["@context"])&&t["@context"].includes("http://iiif.io/api/image/3/context.json"))){s=decodeURI(t["id"]);s=dlfUtils.removeInfoJson(s);o=dlfUtils.buildImageV3(n,s,t);i.resolve(o)}else{s=e.url;s=dlfUtils.removeInfoJson(s);o=dlfUtils.buildImageV1(n,s,t);i.resolve(o)}}}return i};dlfUtils.removeInfoJson=function t(e){if(e.endsWith("/info.json")){e=e.substr(0,e.lastIndexOf("/"))}return e};dlfUtils.supportsIIIF=function t(e){if(e.protocol&&e.protocol==="http://iiif.io/api/image"||e["@context"]&&e["@context"]==="http://iiif.io/api/image/2/context.json"){return true}else if(e["@context"]&&(e["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||e["@context"]==="http://iiif.io/api/image/1/context.json")){return true}else if(e.profile&&e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0){return true}else if(e.identifier&&e.width&&e.height){return true}else return e.documentElement&&"info"===e.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"===e.documentElement.namespaceURI};dlfUtils.iiifProfiles={version1:{level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},version2:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},version3:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg"],qualities:["default","bitonal"]}},none:{none:{supports:[],formats:[],qualities:[]}}};dlfUtils.buildImageV3=function t(e,i,n){var s=this.getIiifComplianceLevelProfile(n,"version3");return{src:i,version:"version3",width:n.width,height:n.height,tilesize:n.tiles!==undefined?[n.tiles.map((function(t){return t.width}))[0],n.tiles.map((function(t){return t.height===undefined?t.width:t.height}))[0]]:undefined,sizes:n.sizes===undefined?undefined:n.sizes.map((function(t){return[t.width,t.height]})),qualities:["default"].concat(s.qualities).concat(n.extraQualities===undefined?[]:n.extraQualities),formats:["jpg"].concat(s.formats).concat(n.extraFormats===undefined?[]:n.extraFormats),supports:s.supports.concat(n.extraFeatures===undefined?[]:n.extraFeatures),resolutions:n.tiles!==undefined?n.tiles.map((function(t){return t.scaleFactors}))[0]:[],mimetype:e}};dlfUtils.buildImageV2=function t(e,i,n){if(typeof n.profile==="string"){n.profile=[n.profile,{}]}if(n.profile!==undefined&&n.profile.length<2){n.profile.push({})}var s=this.getIiifComplianceLevelProfile(n,"version2");return{src:i,version:"version2",width:n.width,height:n.height,tilesize:n.tiles!==undefined?[n.tiles.map((function(t){return t.width}))[0],n.tiles.map((function(t){return t.height===undefined?t.width:t.height}))[0]]:undefined,sizes:n.sizes===undefined?undefined:n.sizes.map((function(t){return[t.width,t.height]})),qualities:["default"].concat(s.qualities).concat(n.profile[1].qualities===undefined?[]:n.profile[1].qualities),formats:["jpg"].concat(s.formats).concat(n.profile[1].formats===undefined?[]:n.profile[1].formats),supports:s.supports.concat(n.profile[1].supports===undefined?[]:n.profile[1].supports),resolutions:n.tiles!==undefined?n.tiles.map((function(t){return t.scaleFactors}))[0]:[],mimetype:e}};dlfUtils.buildImageV1=function t(e,i,n){var s=this.getIiifComplianceLevelProfile(n,"version1");return{src:i,version:"version1",width:n.width,height:n.height,tilesize:n.tile_width===undefined?n.tile_height===undefined?undefined:n.tile_height:n.tile_height===undefined?n.tile_width:[n.tile_width,n.tile_height],qualities:["native"].concat(s.qualities).concat(n.qualities===undefined?[]:n.qualities),formats:["jpg"].concat(s.formats).concat(n.formats===undefined?[]:n.formats),supports:s.supports,resolutions:n.scale_factors,mimetype:e}};dlfUtils.getIiifComplianceLevelProfile=function(t,e){var i=new RegExp("^https?\\:\\/\\/library\\.stanford\\.edu\\/iiif\\/image-api\\/(1\\.1\\/)?compliance\\.html#level[0-2]$"),n=new RegExp("^https?\\:\\/\\/iiif\\.io\\/api\\/image\\/2\\/level[0-2](\\.json)?$"),s=new RegExp("(^https?\\:\\/\\/iiif\\.io\\/api\\/image\\/3\\/level[0-2](\\.json)?$)|(^level[0-2]$)"),o;if(t.profile===undefined){return dlfUtils.iiifProfiles.none.none}switch(e){case"version1":if(i.test(t.profile)){o=t.profile}break;case"version2":if(typeof t.profile==="string"&&n.test(t.profile)){o=t.profile}if(Array.isArray(t.profile)&&t.profile.length>=1&&typeof t.profile[0]==="string"&&n.test(t.profile[0])){o=t.profile[0]}break;case"version3":if(s.test(t.profile)){o=t.profile}break;default:}if(o!==undefined){o=o.match(/level[0-2](\.json)?$/);o=Array.isArray(o)?o[0].replace(".json",""):undefined;if(o!==undefined){return dlfUtils.iiifProfiles[e][o]}}return dlfUtils.iiifProfiles.none.none};dlfUtils.fetchIIPData=function(t){var e=new $.Deferred;$.ajax({url:dlfViewerSource.IIP.getMetdadataURL(t.url)}).done(i);function i(i,n){if(n!=="success")throw new Error("Problems while fetching ImageProperties.xml");var s=$.extend({src:t.url,mimetype:t.mimetype},dlfViewerSource.IIP.parseMetadata(i));e.resolve(s)}return e};dlfUtils.fetchZoomifyData=function(t){var e=new $.Deferred;$.ajax({url:t.url}).done(i);function i(i,n){if(n!=="success"){throw new Error("Problems while fetching ImageProperties.xml")}var s=$(i).find("IMAGE_PROPERTIES");var o={src:t.url.substring(0,t.url.lastIndexOf("/")+1),width:parseInt(s.attr("WIDTH")),height:parseInt(s.attr("HEIGHT")),tilesize:parseInt(s.attr("TILESIZE")),mimetype:t.mimetype};e.resolve(o)}return e};dlfUtils.getCookie=function(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");if(e){return decodeURI(e[2])}else{return null}};dlfUtils.getUrlParams=function(){if(Object.prototype.hasOwnProperty.call(location,"search")){var t=decodeURIComponent(location.search).slice(1).split("&"),e={};t.forEach((function(t){var i=t.split("=");e[i[0]]=i[1]}));return e}return undefined};dlfUtils.isNull=function(t){return t===null};dlfUtils.isNullEmptyUndefinedOrNoNumber=function(t){return t===null||t===undefined||t===""||isNaN(t)};dlfUtils.isFulltextDescriptor=function(t){return typeof t==="object"&&t!==null&&"url"in t&&t.url!==""};dlfUtils.parseDataDic=function(t){var e=$(t).attr("data-dic"),i=e.split(";"),n={};for(var s=0,o=i.length;s<o;s++){var r=i[s].split(":")[0],a=i[s].split(":")[1];n[r]=a}return n};dlfUtils.setCookie=function(t,e){document.cookie=t+"="+decodeURI(e)+"; path=/"};dlfUtils.scaleToImageSize=function(t,e,i,n,s){var o=void 0;if(i&&n){o={width:i,height:n,scale:e.width/i}}if(o===undefined)return[];var r=o.scale,a=s!==undefined?s:0;for(var h in t){var l=t[h].getGeometry().getCoordinates()[0],u=[];for(var c=0;c<l.length;c++){u.push([a+r*l[c][0],0-r*l[c][1]])}t[h].setGeometry(new ol.geom.Polygon([u]));dlfUtils.RUNNING_INDEX+=1;t[h].setId(""+dlfUtils.RUNNING_INDEX)}return t};dlfUtils.searchFeatureCollectionForCoordinates=function(t,e){var i=[];t.forEach((function(t){if(t.get("fulltext")!==undefined){if(t.getId()===e){i.push(t)}}}));return i.length>0?i:undefined};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
ol.Map.prototype.getZoom=function(){return this.getView().getZoom()};ol.Map.prototype.getZoomRange=function(){var t=window.OL3_MAX_ZOOM!==undefined&&!isNaN(window.OL3_MAX_ZOOM)?window.OL3_MAX_ZOOM:18;return[0,t]};ol.Map.prototype.zoom=function(t){var e=this.getView(),i=e.getResolution();this.beforeRender(ol.animation.zoom({resolution:i,duration:500}));e.setZoom(t)};ol.Map.prototype.zoomIn=function(){var t=this.getView(),e=t.getZoom()+1,i=t.getResolution();this.beforeRender(ol.animation.zoom({resolution:i,duration:500}));t.setZoom(e)};ol.Map.prototype.zoomOut=function(){var t=this.getView(),e=t.getZoom()-1,i=t.getResolution();this.beforeRender(ol.animation.zoom({resolution:i,duration:500}));t.setZoom(e)};ol.Map.prototype.zoomTo=function(t,e,i){var n=this.getView(),s=n.getResolution(),o=i!==undefined?i:500;this.beforeRender(ol.animation.zoom({resolution:s,duration:o}));n.setCenter(t);n.setZoom(e)};ol.Map.prototype.rotate=function(t){var e=this.getView(),i=e.getRotation()+t*Math.PI/180,n=e.getCenter();this.beforeRender(ol.animation.rotate({rotation:e.getRotation(),anchor:n,duration:200}));e.rotate(i,n);if(this.ov_view!==null&&this.ov_view!==undefined){this.ov_view.rotate(i)}};ol.Map.prototype.rotateLeft=function(){this.rotate(-5);if(this.ov_view!==null&&this.ov_view!==undefined){this.ov_view.rotate(-5)}};ol.Map.prototype.rotateRight=function(){this.rotate(5);if(this.ov_view!==null&&this.ov_view!==undefined){this.ov_view.rotate(5)}};ol.Map.prototype.resetRotation=function(){this.getView().rotate(0,this.getView().getCenter());if(this.ov_view!==null&&this.ov_view!==undefined){this.ov_view.rotate(0)}};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
dlfViewerOL3Styles={};dlfViewerOL3Styles.defaultStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(204,204,204,0.8)",width:3}),fill:new ol.style.Fill({color:"rgba(170,0,0,0.1)"})})};dlfViewerOL3Styles.hoverStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(204,204,204,0.8)",width:1}),fill:new ol.style.Fill({color:"rgba(238,153,0,0.2)"})})};dlfViewerOL3Styles.invisibleStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(170,0,0,0)",width:1})})};dlfViewerOL3Styles.selectStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(170,0,0,0.8)",width:1}),fill:new ol.style.Fill({color:"rgba(238,153,0,0.2)"})})};dlfViewerOL3Styles.textlineStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0,59,80,1)",width:1})})};dlfViewerOL3Styles.wordStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0,59,80,0.8)",width:1}),fill:new ol.style.Fill({color:"rgba(0,59,80,0.25)"})})};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
var dlfViewerSource=dlfViewerSource||{};dlfViewerSource.findKey=function(t,e,i){for(var n in t){if(e.call(i,t[n],n,t)){return n}}return undefined};Number.isInteger=Number.isInteger||function(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};Number.isNaN=Number.isNaN||function(t){return t!==null&&(t!==t||+t!==t)};Array.prototype.includes=Array.prototype.includes||function(t){return this.indexOf(t)>-1};dlfViewerSource.tileLoadFunction=function(t,e,i){var n=e.getImage(),s=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:t;$(n).on("load",(function(){if(n.naturalWidth>0&&(n.naturalWidth!==s||n.naturalHeight!==o)){var t=document.createElement("canvas");t.width=s;t.height=o;var i=t.getContext("2d");i.drawImage(n,0,0);var r=dlfViewerSource.findKey(e,(function(t){return t===n}));if(r){e[r]=t}}}));n.src=i};dlfViewerSource.IIIF=function(t){var e=t.url.replace(/info.json$/,""),i=t.version||"version2",n=t.format!==undefined?t.format:"jpg",s=t.quality!==undefined?t.quality:t.version==="version1"?"native":"default",o=t.size[0],r=t.size[1],a=t.tileSize,h=t.crossOrigin!==undefined?t.crossOrigin:"*",l=t.offset!==undefined?t.offset:[0,0],u=$.extend([],t.resolutions),c=t.sizes===undefined?[]:t.sizes,f=t.supports===undefined?[]:t.supports,d=c!==undefined&&Array.isArray(c)&&c.length>0,p=a!==undefined&&(Number.isInteger(a)&&a>0||Array.isArray(a)&&a.length>0),v=f!==undefined&&Array.isArray(f)&&(f.includes("regionByPx")||f.includes("regionByPct"))&&(f.includes("sizeByWh")||f.includes("sizeByH")||f.includes("sizeByW")||f.includes("sizeByPct")),g=t.projection,m,b,y;e+=e.lastIndexOf("/")===e.length-1?"":"/";u.sort((function(t,e){return e-t}));if(p||v){if(a!==undefined){if(Number.isInteger(a)&&a>0){m=a;b=a}else if(Array.isArray(a)&&a.length>0){if(a.length===1||a[1]===undefined&&Number.isInteger(a[0])){m=a[0];b=a[0]}if(a.length===2){if(Number.isInteger(a[0])&&Number.isInteger(a[1])){m=a[0];b=a[1]}else if(a[0]===undefined&&Number.isInteger(a[1])){m=a[1];b=a[1]}}}}if(m===undefined||b===undefined){m=256;b=256}if(u.length===0){y=Math.max(Math.ceil(Math.log(o/m)/Math.LN2),Math.ceil(Math.log(r/b)/Math.LN2));for(var x=y;x>=0;x--){u.push(Math.pow(2,x))}}else{var w=Math.max.apply(null,u);y=Math.round(Math.log(w)/Math.LN2)}}else{m=o;b=r;u=[];if(d){c.sort((function(t,e){return t[0]-e[0]}));y=-1;var _=[];for(var x=0;x<c.length;x++){var M=o/c[x][0];if(u.length>0&&u[u.length-1]===M){_.push(x);continue}u.push(M);y++}if(_.length>0){for(var S=0;S<_.length;S++){c.splice(_[S]-S,1)}}}else{u.push(1);c.push([o,r]);y=0}}var E=[l[0],l[1]-r,l[0]+o,l[1]];var T=new ol.tilegrid.TileGrid({extent:E,resolutions:u,origin:ol.extent.getTopLeft(E),tileSize:[m,b]});var C=function(t,a,h){var l,g,x=t[0];if(x>y){return}var w=t[1],_=-t[2]-1,M=u[x];if(w===undefined||Number.isNaN(_)||M===undefined||w<0||Math.ceil(o/M/m)<=w||_<0||Math.ceil(r/M/b)<=_){return}if(v||p){var S=w*m*M,E=_*b*M;var T=m*M,C=b*M,I=m,A=b;if(S+T>o){T=o-S}if(E+C>r){C=r-E}if(S+m*M>o){I=Math.floor((o-S+M-1)/M)}if(E+b*M>r){A=Math.floor((r-E+M-1)/M)}if(S===0&&T===o&&E===0&&C===r){l="full"}else if(!v||f.includes("regionByPx")){l=S+","+E+","+T+","+C}else if(f.includes("regionByPct")){var P=formatPercentage(S/o*100),F=formatPercentage(E/r*100),D=formatPercentage(T/o*100),k=formatPercentage(C/r*100);l="pct:"+P+","+F+","+D+","+k}if(i==="version3"&&(!v||f.includes("sizeByWh"))){g=I+","+A}else if(!v||f.includes("sizeByW")){g=I+","}else if(f.includes("sizeByH")){g=","+A}else if(f.includes("sizeByWh")){g=I+","+A}else if(f.includes("sizeByPct")){g="pct:"+formatPercentage(100/M)}}else{l="full";if(d){var R=c[x][0],L=c[x][1];if(i==="version3"){if(R===o&&L===r){g="max"}else{g=R+","+L}}else{if(R===o){g="full"}else{g=R+","}}}else{g=i==="version3"?"max":"full"}}return e+l+"/"+g+"/0/"+s+"."+n};var I={crossOrigin:h,projection:g,tileGrid:T,tileUrlFunction:C};if(ol.has.CANVAS){I.tileLoadFunction=dlfViewerSource.tileLoadFunction.bind(this,[m,b])}return new ol.source.TileImage(I)};dlfViewerSource.IIIF.getMetdadataURL=function(t){var e=t.lastIndexOf("/")+1===t.length?"info.json":"/info.json";return t+e};dlfViewerSource.IIP=function(t){var e=t.url.indexOf("?")>-1?t.url:t.url+"?",i=t.size[0],n=t.size[1],s=t.tileSize!==undefined?t.tileSize:256,o=t.crossOrigin!==undefined?t.crossOrigin:"*",r=t.offset!==undefined?t.offset:[0,0],a=[],h=t.projection;var l=[],u=i,c=n,f=1;while(u>s||c>s){l.push([Math.ceil(u/s),Math.ceil(c/s)]);a.push(f);u>>=1;c>>=1;f+=f}a.push(f);l.push([1,1]);l.reverse();var d=[r[0],r[1]-n,r[0]+i,r[1]];var p=new ol.tilegrid.TileGrid({extent:d,resolutions:a.reverse(),origin:ol.extent.getTopLeft(d),tileSize:s});var v=function(t,i,n){if(t===undefined||t===null){return undefined}else{var s=t[0],o=t[1],r=-t[2]-1,a=r*l[s][0]+o;return e+"&JTL="+s+","+a}};var g={crossOrigin:o,projection:h,tileGrid:p,tileUrlFunction:v};if(ol.has.CANVAS){g.tileLoadFunction=dlfViewerSource.tileLoadFunction.bind(this,s)}return new ol.source.TileImage(g)};dlfViewerSource.IIP.getMetdadataURL=function(t){var e="&obj=IIP,1.0&obj=Max-size&obj=Tile-size&obj=Resolution-number",i=t.indexOf("?")>-1?t:t+"?";return i+e};dlfViewerSource.IIP.parseMetadata=function(t){var e=t.split("Max-size");if(!e[1]){return null}var i=e[1].split(" ");var n=t.split("Tile-size");if(!n[1]){return null}var s=n[1].split(" ");var o=t.split("Resolution-number"),r=parseInt(o[1].substring(1,o[1].length)),a=1,h=[];for(var l=0;l<r;l++){h.push(a);a+=a}var u={width:parseInt(i[0].substring(1,i[0].length)),height:parseInt(i[1]),tilesize:[parseInt(s[0].substring(1,s[0].length)),parseInt(s[1])],resolutions:h};return u};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
var dlfAltoParser=function(t,e,i,n){this.image_=dlfUtils.exists(t)?t:undefined;this.width_=dlfUtils.exists(e)?e:undefined;this.height_=dlfUtils.exists(i)?i:undefined;this.offset_=dlfUtils.exists(n)?n:undefined};dlfAltoParser.prototype.generateId_=function(t,e){return""+t+"_"+e};dlfAltoParser.prototype.parseAltoFeature_=function(t){var e=t.nodeName.toLowerCase(),i;if(e==="printspace"||e==="textblock"||e==="textline"||t.hasAttribute("WIDTH")){i=this.parseFeatureWithGeometry_(t)}else{var i=new ol.Feature;i.setProperties({type:t.nodeName.toLowerCase()})}if(e==="page"){var n=i.get("width"),s=i.get("height");if(dlfUtils.exists(n)&&dlfUtils.exists(s)&&!dlfUtils.exists(this.width_)&&!dlfUtils.exists(this.height_)){this.width_=n;this.height_=s}i.setProperties({printspace:this.parsePrintSpaceFeature_(t)})}else if(e==="printspace"){var n=i.get("width"),s=i.get("height");if(dlfUtils.exists(n)&&dlfUtils.exists(s)&&!dlfUtils.exists(this.width_)&&!dlfUtils.exists(this.height_)){this.width_=n;this.height_=s}i.setProperties({textblocks:this.parseTextBlockFeatures_(t)})}else if(e==="textblock"){i.setProperties({textlines:this.parseTextLineFeatures_(t)})}else if(e==="textline"){i.setProperties({content:this.parseContentFeatures_(t)})}return i};dlfAltoParser.prototype.parseFeatures=function(t){var e=this.parseXML_(t),i=[],n=$(e).find("Page");for(var s=0;s<n.length;s++){var o=this.parseAltoFeature_(n[s]);o.getStringFeatures=function(){var t=this.get("printspace").get("textblocks"),e=[];t.forEach((function(t){if(t!==undefined&&t.get("textlines").length>0){t.get("textlines").forEach((function(t){if(t!==undefined&&t.get("content").length>0){t.get("content").forEach((function(t){if(t!==undefined&&t.get("type")==="string"){e.push(t)}}))}}))}}));return e};o.getTextblocks=function(){if(this.get("printspace")!==undefined&&this.get("printspace").get("textblocks"))return this.get("printspace").get("textblocks");return[]};o.getTextlines=function(){var t=[];this.getTextblocks().forEach((function(e){t=t.concat(e.get("textlines"))}));return t};i.push(o)}return i};dlfAltoParser.prototype.parseFeatureWithGeometry_=function(t){var e=this.parseGeometry_(t),i=parseInt(t.getAttribute("WIDTH")),n=parseInt(t.getAttribute("HEIGHT")),s=parseInt(t.getAttribute("HPOS")),o=parseInt(t.getAttribute("VPOS")),r=t.nodeName.toLowerCase(),a=this.generateId_(s,o),h=new ol.Feature(e);h.setId(a);h.setProperties({type:r,width:i,height:n,hpos:s,vpos:o});return h};dlfAltoParser.prototype.parseGeometry_=function(t){var e=parseInt(t.getAttribute("WIDTH")),i=parseInt(t.getAttribute("HEIGHT")),n=parseInt(t.getAttribute("HPOS")),s=parseInt(t.getAttribute("VPOS")),o=n+e,r=s+i,a=[[[n,s],[o,s],[o,r],[n,r],[n,s]]];if(isNaN(e)||isNaN(i))return undefined;if(!dlfUtils.exists(this.image_)||!dlfUtils.exists(this.width_))return new ol.geom.Polygon(a);var h=this.image_.width/this.width_,l=dlfUtils.exists(this.offset_)?this.offset_:0,u=[];for(var c=0;c<a[0].length;c++){u.push([l+h*a[0][c][0],0-h*a[0][c][1]])}return new ol.geom.Polygon([u])};dlfAltoParser.prototype.parsePrintSpaceFeature_=function(t){var e=$(t).find("PrintSpace");if(e.length===0)return;return this.parseAltoFeature_(e[0])};dlfAltoParser.prototype.parseTextBlockFeatures_=function(t){var e=$(t).find("TextBlock"),i=[];for(var n=0;n<e.length;n++){var s=this.parseAltoFeature_(e[n]),o=s.get("textlines"),r="";for(var a=0;a<o.length;a++){r+=o[a].get("fulltext")+"\n"}s.setProperties({fulltext:r});i.push(s)}return i};dlfAltoParser.prototype.parseTextLineFeatures_=function(t){var e=$(t).find("TextLine"),i=[];for(var n=0;n<e.length;n++){var s=this.parseAltoFeature_(e[n]),o=s.get("content"),r="";for(var a=0;a<o.length;a++){r+=o[a].get("fulltext")}s.setProperties({fulltext:r});i.push(s)}return i};dlfAltoParser.prototype.parseContentFeatures_=function(t){var e=$(t).children(),i=[];for(var n=0;n<e.length;n++){var s=this.parseFeatureWithGeometry_(e[n]),o="";switch(e[n].nodeName.toLowerCase()){case"string":o=e[n].getAttribute("CONTENT");break;case"sp":o=" ";break;case"hyp":o="-";break;default:o=""}s.setProperties({fulltext:o});i.push(s)}return i};dlfAltoParser.prototype.parseXML_=function(t){if(typeof t==="string"||t instanceof String){return $.parseXML(t)}return t};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
var DlfIiifAnnotationParser=function(t,e,i,n){this.image_=dlfUtils.exists(t)?t:undefined;this.width_=dlfUtils.exists(e)?e:undefined;this.height_=dlfUtils.exists(i)?i:undefined;this.offset_=dlfUtils.exists(n)?n:undefined};DlfIiifAnnotationParser.prototype.generateId_=function(t,e,i,n){var s=isNaN(e)?"0":e;return"anno_"+t+"_"+s+"_"+i+"_"+n};DlfIiifAnnotationParser.prototype.parseAnnotation=function(t){var e=this.parseGeometry(t),i=this.getXYWHForAnnotation(t),n=this.generateId_(i.width,i.height,i.x1,i.y1),s=new ol.Feature(e);s.setId(n);s.setProperties({type:"annotation",width:i.width,height:i.height,x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,content:t.resource.chars});return s};DlfIiifAnnotationParser.prototype.parseAnnotationList=function(t,e){var i,n,s,o,r=[];for(var a=0;a<t.resources.length;a++){var h=t.resources[a];var l=DlfIiifAnnotationParser.getTargetIdentifierWithoutFragment(h.on);if(e!==l){continue}var u=this.parseAnnotation(h);i=i===undefined?u.get("x1"):i>u.get("x1")?u.get("x1"):i;n=n===undefined?u.get("x2"):n<u.get("x2")?u.get("x2"):n;s=s===undefined?u.get("y1"):s>u.get("y1")?u.get("y1"):s;o=o===undefined?u.get("y2"):o<u.get("y2")?u.get("y2"):o;r.push(u)}var c=n-i,f=o-s,d=[[[i,s],[n,s],[n,o],[i,o],[i,s]]],p=this.generateId_(c,f,i,s),v=this.image_.width/this.width_,g=[];for(var a=0;a<d[0].length;a++){g.push([v*d[0][a][0],0-v*d[0][a][1]])}var m=new ol.geom.Polygon([g]),b=new ol.Feature(m);b.setId(p);b.setProperties({type:"annotationList",label:t.label!==null?t.label:"",width:n-i+1,height:o-s+1,x1:i,y1:s,x2:n,y2:o,annotations:r});b.getAnnotations=function(){return r};return b};DlfIiifAnnotationParser.prototype.parseGeometry=function(t){var e=this.getXYWHForAnnotation(t),i=[[[e.x1,e.y1],[e.x2,e.y1],[e.x2,e.y2],[e.x1,e.y2],[e.x1,e.y1]]];if(isNaN(e.width)||isNaN(e.height))return undefined;if(!dlfUtils.exists(this.image_)||!dlfUtils.exists(this.width_))return new ol.geom.Polygon(i);var n=this.image_.width/this.width_,s=dlfUtils.exists(this.offset_)?this.offset_:0,o=[];for(var r=0;r<i[0].length;r++){o.push([s+n*i[0][r][0],0-n*i[0][r][1]])}return new ol.geom.Polygon([o])};DlfIiifAnnotationParser.prototype.getXYWHForAnnotation=function(t){var e=t.on.indexOf("#xywh="),i=e>-1?t.on.substr(e+6).split(","):undefined;if(i===undefined)return{x1:0,y1:0,width:this.width,height:this.height,x2:this.width-1,y2:this.height-1};return{x1:parseInt(i[0]),y1:parseInt(i[1]),width:parseInt(i[2]),height:parseInt(i[3]),x2:parseInt(i[0])+parseInt(i[2])-1,y2:parseInt(i[1])+parseInt(i[3])-1}};DlfIiifAnnotationParser.getTargetIdentifierWithoutFragment=function(t){if(t===null){return null}return t.split("#")[0]};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
if(jQuery.fn.scrollTo===undefined){jQuery.fn.scrollTo=function(t,e){var i=$(t).parent().height()/2;$(this).animate({scrollTop:$(this).scrollTop()-$(this).offset().top+$(t).offset().top-i},e===undefined?1e3:e);return this}}function DlfAnnotationControl(t,e,i){this.map=t;this.image=e;this.annotationContainers=i.annotationContainers;this.canvas=i.canvas;this.annotationData=undefined;this.dic=$("#tx-dlf-tools-annotations").length>0&&$("#tx-dlf-tools-annotations").attr("data-dic")?dlfUtils.parseDataDic($("#tx-dlf-tools-annotations")):{"annotations-on":"Display Annotations","annotations-off":"Hide Annotations"};this.layers_={annotationList:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.defaultStyle()}),annotation:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.invisibleStyle()}),select:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.selectStyle()}),hoverAnnotationList:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.hoverStyle()}),hoverAnnotation:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.textlineStyle()})};this.handlers={mapClick:$.proxy((function(t){var e=this.map.forEachFeatureAtPixel(t["pixel"],(function(t,e){if(t.get("type")==="annotationList"){return t}}));if(e===undefined){this.layers_.select.getSource().clear();this.selectedFeature_=undefined;this.showAnnotationText(undefined);return}if(this.selectedFeature_){this.layers_.select.getSource().removeFeature(this.selectedFeature_)}if(e){this.layers_.hoverAnnotationList.getSource().clear();this.layers_.select.getSource().addFeature(e)}this.selectedFeature_=e;if(dlfUtils.exists(e)){this.showAnnotationText([e])}}),this),mapHover:$.proxy((function(t){if(t["dragging"]){return}var e=this.layers_.hoverAnnotation.getSource(),i=this.layers_.hoverAnnotationList.getSource(),n=this.layers_.select.getSource(),s=this.map,o,r;s.forEachFeatureAtPixel(t["pixel"],(function(t,e){if(t.get("type")==="annotationList"){o=t}if(t.get("type")==="annotation"){r=t}}));var a=n.getFeatures().length>0?n.getFeatures()[0]:undefined,h=i.getFeatures().length>0?i.getFeatures()[0]:undefined,l=a!==undefined&&o!==undefined&&a.getId()===o.getId()?true:false,u=h!==undefined&&o!==undefined&&h.getId()===o.getId()?true:false;if(!u&&!l){i.clear();if(o){i.addFeature(o)}}var h=e.getFeatures().length>0?e.getFeatures()[0]:undefined,u=h!==undefined&&r!==undefined&&h.getId()===r.getId()?true:false;if(!u){if(h){var c=$("#"+h.getId());if(c.hasClass("highlight")){c.removeClass("highlight")}e.clear()}if(r){var f=$("#"+r.getId());if(f.length>0&&!f.hasClass("highlight")){f.addClass("highlight");$("#tx-dlf-annotationselection").scrollTo(f,50);e.addFeature(r)}}}}),this)};var n=$("#tx-dlf-tools-annotations");if(n.length>0){var s=$.proxy((function(t){t.preventDefault();if($(t.target).hasClass("active")){this.deactivate();return}this.activate()}),this);n.on("click",s);n.on("touchstart",s)}this.selectedFeature_=undefined;$("#tx-dlf-tools-annotations").text(this.dic["annotations-on"]).attr("title",this.dic["annotations-on"]);if(dlfUtils.getCookie("tx-dlf-pageview-annotation-select")==="enabled"){this.activate(n)}}DlfAnnotationControl.prototype.showAnnotationText=function(t){var e=t===undefined?this.annotationData:t;if(e!==undefined){$("#tx-dlf-annotationselection").children().remove();for(var i=0;i<e.length;i++){var n=e[i],s=n.get("annotations"),o;if(n.get("label")!==""){o=$('<span class="annotation-list-label"/>');o.text(n.get("label"));$("#tx-dlf-annotationselection").append(o)}for(var r=0;r<s.length;r++){var a=$('<span class="annotation" id="'+s[r].getId()+'"/>');a.text(s[r].get("content"));$("#tx-dlf-annotationselection").append(a);$("#tx-dlf-annotationselection").append(" ")}$("#tx-dlf-annotationselection").append("<br /><br />")}}};DlfAnnotationControl.prototype.activate=function(){var t=$("#tx-dlf-tools-annotations");if(this.annotationData===undefined){this.annotationData=this.fetchAnnotationContainersFromServer(this.annotationContainers,this.image,this.canvas);if(this.annotationData!==undefined){this.layers_.annotationList.getSource().addFeatures(this.annotationData);for(var e=0;e<this.annotationData.length;e++){this.layers_.annotation.getSource().addFeatures(this.annotationData[e].getAnnotations())}if(this.annotationData.length>0){this.showAnnotationText(this.annotationData)}}}this.enableAnnotationSelect();dlfUtils.setCookie("tx-dlf-pageview-annotation-select","enabled");$(t).addClass("active");$(this).trigger("activate-annotations",this)};DlfAnnotationControl.prototype.deactivate=function(){var t=$("#tx-dlf-tools-annotations");this.disableAnnotationSelect();dlfUtils.setCookie("tx-dlf-pageview-annotation-select","disabled");$(t).removeClass("active");$(this).trigger("deactivate-annotations",this)};DlfAnnotationControl.prototype.disableAnnotationSelect=function(){this.map.un("click",this.handlers.mapClick);this.map.un("pointermove",this.handlers.mapHover);for(var t in this.layers_){if(this.layers_.hasOwnProperty(t)){this.map.removeLayer(this.layers_[String(t)])}}var e="fulltext-visible";$("#tx-dlf-tools-annotations").removeClass(e).text(this.dic["annotations-on"]).attr("title",this.dic["annotations-on"]);$("#tx-dlf-annotationselection").removeClass(e);$("#tx-dlf-annotationselection").hide();$("body").removeClass(e)};DlfAnnotationControl.prototype.enableAnnotationSelect=function(t,e){this.map.on("click",this.handlers.mapClick);this.map.on("pointermove",this.handlers.mapHover);for(var i in this.layers_){if(this.layers_.hasOwnProperty(i)){this.map.addLayer(this.layers_[String(i)])}}var n="fulltext-visible";$("#tx-dlf-tools-annotations").addClass(n).text(this.dic["annotations-off"]).attr("title",this.dic["annotations-off"]);$("#tx-dlf-annotationselection").addClass(n);$("#tx-dlf-annotationselection").show();$("body").addClass(n)};DlfAnnotationControl.prototype.fetchAnnotationContainersFromServer=function(t,e,i,n){var s=[],o;o=new DlfIiifAnnotationParser(e,i.width,i.height,n);t.forEach((function(t){var e;var n=$.ajax({url:t.uri,async:false});e=n.responseJSON!==null?n.responseJSON:n.responseText!==null?$.parseJSON(n.responseText):null;if(e.label===undefined){e.label=t.label}s.push(o.parseAnnotationList(e,i.id))}));return s};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
dlfViewerImageManipulationControl=function(t){this.dic=$("#tx-dlf-tools-imagetools").length>0&&$("#tx-dlf-tools-imagetools").attr("data-dic")?dlfUtils.parseDataDic($("#tx-dlf-tools-imagetools")):{"imagemanipulation-on":"Activate image manipulation","imagemanipulation-off":"Deactivate image manipulation",saturation:"Saturation",hue:"Hue",brightness:"Brightness",contrast:"Contrast",reset:"Reset",invert:"Color inverting",parentContainer:".tx-dlf-imagemanipulationtool"};this.baseMap_=t.map;this.anchor_=$("<a/>",{href:"#image-manipulation",text:this.dic["imagemanipulation-on"],title:this.dic["imagemanipulation-on"]});$(t.controlTarget).append(this.anchor_);this.toolContainerEl_=dlfUtils.exists(t.toolContainer)?t.toolContainer:$(this.dic["parentContainer"])[0];this.canvas_=this.baseMap_.getTargetElement().querySelector("canvas");var e=$.proxy((function(t){t.preventDefault();if($(t.target).hasClass("active")){this.deactivate();return}this.activate()}),this);$(this.anchor_).on("click",e);$(this.anchor_).on("touchstart",e);var i={brightness:1,contrast:1,"hue-rotate":0,saturate:0};this.filters_=$.extend({},i);this.handler_={resetFilter:$.proxy((function(){if(this.filters_["invert"]){$("#invert-filter").click()}var t=$(".slider.slider-imagemanipulation");for(var e=0;e<t.length;e++){var n=t[e],s=n.getAttribute("data-type"),o=i[String(s)];$(n).slider("value",o)}}),this)}};dlfViewerImageManipulationControl.prototype.setCssFilter_=function(t){this.canvas_.style.filter=t;this.canvas_.style.webkitFilter=t};dlfViewerImageManipulationControl.prototype.applyFilters_=function(){var t="";for(var e in this.filters_){if(!this.filters_.hasOwnProperty(e)){continue}var i=this.valueToCss_(e,this.filters_[e]);if(i===undefined){continue}t+=e+"("+i+") "}this.setCssFilter_(t)};dlfViewerImageManipulationControl.prototype.activate=function(){this.applyFilters_();$(this).trigger("activate-imagemanipulation",this.baseMap_);$(this.anchor_).addClass("active").text(this.dic["imagemanipulation-off"]).attr("title",this.dic["imagemanipulation-off"]);if(!dlfUtils.exists(this.sliderContainer_)){this.createFilters_()}$(this.sliderContainer_).show().addClass("open")};dlfViewerImageManipulationControl.prototype.createFilters_=function(){var t=$('<div class="image-manipulation ol-unselectable"></div>');$(this.toolContainerEl_).append(t);this.sliderContainer_=$('<div class="slider-container"></div>');$(t).append(this.sliderContainer_);var e=this.createSlider_("slider-contrast","horizontal","contrast",[1,0,2,.01],this.dic["contrast"],(function(t){return parseInt(t*100-100)})),i=this.createSlider_("slider-saturation","horizontal","saturate",[0,-1,1,.01],this.dic["saturation"],(function(t){return parseInt(t*100)})),n=this.createSlider_("slider-brightness","horizontal","brightness",[1,0,2,.1],this.dic["brightness"],(function(t){return parseInt(t*100-100)})),s=this.createSlider_("slider-hue","horizontal","hue-rotate",[0,-180,180,5],this.dic["hue"],(function(t){return parseInt(t)}));$(this.sliderContainer_).append(e);$(this.sliderContainer_).append(i);$(this.sliderContainer_).append(n);$(this.sliderContainer_).append(s);var o="invert-filter";$(this.sliderContainer_).append($('<div class="checkbox"><label><input type="checkbox" id="'+o+'">'+this.dic["invert"]+"</label></div>"));$("#"+o).on("click",$.proxy((function(t){var e=t.target.checked;this.setFilter_("invert",e)}),this));var r=$('<button class="reset-btn" title="'+this.dic["reset"]+'">'+this.dic["reset"]+"</button>");$(this.sliderContainer_).append(r);$(r).on("click",this.handler_.resetFilter)};dlfViewerImageManipulationControl.prototype.createSlider_=function(t,e,i,n,s,o){var r=dlfUtils.exists("opt_title")?s:"",a=$('<div class="slider slider-imagemanipulation '+t+'" title="'+r+'" data-type="'+i+'"></div>'),h=dlfUtils.exists(n)?n[1]:0,l=dlfUtils.exists(n)?n[2]:100,u=dlfUtils.exists(n)?n[3]:1,c=dlfUtils.exists(n)?n[0]:100;var f=$.proxy((function(t,n){var s=n["value"],r=p[0],a=dlfUtils.exists(o)?o(s):s+"%";if(e==="vertical"){var u=100-(s-h)/(l-h)*100;r.style.top=u+"%";r.innerHTML=a;return}var c=(s-h)/(l-h)*100;r.style.left=c+"%";r.innerHTML=a;this.setFilter_(i,s)}),this);$(a).slider({min:h,max:l,value:c,animate:"slow",orientation:e,step:u,slide:f,change:f});var d=dlfUtils.exists(o)&&dlfUtils.exists(n)?o(n[0]):"100%",p=$('<div class="tooltip value '+t+'">'+d+"</div>");$(a).append(p);return a};dlfViewerImageManipulationControl.prototype.deactivate=function(){this.setCssFilter_("");$(this.anchor_).removeClass("active").text(this.dic["imagemanipulation-on"]).attr("title",this.dic["imagemanipulation-on"]);$(this.sliderContainer_).hide().removeClass("open");$(this).trigger("deactivate-imagemanipulation")};dlfViewerImageManipulationControl.prototype.isActive=function(){return $(this.anchor_).hasClass("active")};dlfViewerImageManipulationControl.prototype.setFilter_=function(t,e){this.filters_[t]=e;this.applyFilters_()};dlfViewerImageManipulationControl.prototype.valueToCss_=function(t,e){switch(t){case"contrast":case"brightness":return(e*100).toString()+"%";case"saturate":return((e+1)*100).toString()+"%";case"hue-rotate":return e+"deg";case"invert":return e?"100%":"0%"}};var dlfViewerFullTextDownloadControl=function(t,e,i){this.map=t;this.image=e;this.url=i;var n=$("#tx-dlf-tools-fulltextdownload");if(n.length>0){var s=$.proxy((function(t){t.preventDefault();this.downloadFullTextFile()}),this);n.on("click",s);n.on("touchstart",s)}};dlfViewerFullTextDownloadControl.prototype.downloadFullTextFile=function(){var t=$("#tx-dlf-tools-fulltextdownload");var e=$("<a/>");e.attr("id","downloadFile");e.attr("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.createFullTextFile()));e.attr("download","fulltext.txt");e.insertAfter(t);$("#downloadFile").get(0).click();$("#downloadFile").remove()};dlfViewerFullTextDownloadControl.prototype.createFullTextFile=function(){var t=dlfFullTextUtils.fetchFullTextDataFromServer(this.url,this.image);var e=t.getTextblocks();var i="";if(e!==undefined){for(var n of e){var s=n.get("textlines");for(var o of s){i=i.concat(this.appendTextLine(o))}i=i.concat("\n\n")}}return i};dlfViewerFullTextDownloadControl.prototype.appendTextLine=function(t){var e="";var i=t.get("content");for(var n of i){var s=n.get("fulltext");var o=s.split(/\n/g);for(const[t,i]of o.entries()){e=e.concat(i);if(t<o.length-1){e=e.concat("\n")}}}return e};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
jQuery.fn.scrollTo=function(t,e){var i=$(t).parent().height()/2;$(this).animate({scrollTop:$(this).scrollTop()-$(this).offset().top+$(t).offset().top-i},e===undefined?1e3:e);return this};var dlfViewerFullTextControl=function(t,e,i){this.map=t;this.image=e;this.url=i;this.dic=$("#tx-dlf-tools-fulltext").length>0&&$("#tx-dlf-tools-fulltext").attr("data-dic")?dlfUtils.parseDataDic($("#tx-dlf-tools-fulltext")):{fulltext:"Fulltext","fulltext-on":"Activate Fulltext","fulltext-off":"Deactivate Fulltext","activate-full-text-initially":"0","full-text-scroll-element":"html, body"};this.activateFullTextInitially=this.dic["activate-full-text-initially"]==="1"?1:0;this.fullTextScrollElement=this.dic["full-text-scroll-element"];this.fulltextData_=undefined;this.layers_={textblock:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.defaultStyle()}),textline:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.invisibleStyle()}),select:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.selectStyle()}),hoverTextblock:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.hoverStyle()}),hoverTextline:new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.textlineStyle()})};this.selectedFeature_=undefined;this.positions={};this.element=undefined;this.lastHeight;this.handlers_={mapClick:$.proxy((function(t){var e=this.map.forEachFeatureAtPixel(t["pixel"],(function(t,e){if(t.get("type")==="textblock"){return t}}));if(e===undefined){this.layers_.select.getSource().clear();this.selectedFeature_=undefined;this.showFulltext(undefined);return}this.handleLayersForClick(e);this.selectedFeature_=e;if(dlfUtils.exists(e)){this.showFulltext([e])}}),this),mapHover:$.proxy((function(t){if(t["dragging"]){return}var e=this.layers_.hoverTextblock.getSource(),i=this.layers_.hoverTextline.getSource(),n=this.layers_.select.getSource(),s=this.map,o,r;s.forEachFeatureAtPixel(t["pixel"],(function(t,e){if(t.get("type")==="textblock"){o=t}if(t.get("type")==="textline"){r=t}}));this.handleTextBlockElements(o,n,e);this.handleTextLineElements(r,i)}),this)};this.changeActiveBehaviour()};dlfViewerFullTextControl.prototype.changeActiveBehaviour=function(){if(this.activateFullTextInitially===1){this.addActiveBehaviourForSwitchOn()}else{this.addActiveBehaviourForSwitchOff()}};dlfViewerFullTextControl.prototype.addActiveBehaviourForSwitchOn=function(){var t=$("#tx-dlf-tools-fulltext");if(t.length>0){var e=$.proxy((function(t){t.preventDefault();this.activateFullTextInitially=0;if($(t.target).hasClass("active")){this.deactivate();return}this.activate()}),this);t.on("click",e);t.on("touchstart",e)}$("#tx-dlf-tools-fulltext").text(this.dic["fulltext"]).attr("title",this.dic["fulltext"]);this.activate()};dlfViewerFullTextControl.prototype.addActiveBehaviourForSwitchOff=function(){var t=$("#tx-dlf-tools-fulltext");if(t.length>0){var e=$.proxy((function(t){t.preventDefault();if($(t.target).hasClass("active")){this.deactivate();return}this.activate()}),this);t.on("click",e);t.on("touchstart",e)}$("#tx-dlf-tools-fulltext").text(this.dic["fulltext-on"]).attr("title",this.dic["fulltext-on"]);if(dlfUtils.getCookie("tx-dlf-pageview-fulltext-select")==="enabled"){this.activate()}};dlfViewerFullTextControl.prototype.onResize=function(){if(this.element!=undefined&&this.element.css("width")!=this.lastHeight){this.lastHeight=this.element.css("width");this.calculatePositions()}};dlfViewerFullTextControl.prototype.calculatePositions=function(){this.positions.length=0;let t=$("#tx-dlf-fulltextselection").children("span.textline");let e=$("#"+t[0].id).position().top;for(let i of t){let t=$("#"+i.id).position().top;this.positions[i.id]=t-e}};dlfViewerFullTextControl.prototype.handleLayersForClick=function(t){if(this.selectedFeature_){this.layers_.select.getSource().removeFeature(this.selectedFeature_)}if(t){this.layers_.hoverTextblock.getSource().clear();this.layers_.select.getSource().addFeature(t)}};dlfViewerFullTextControl.prototype.handleTextBlockElements=function(t,e,i){var n=dlfFullTextUtils.getFeature(e),s=dlfFullTextUtils.getFeature(i),o=dlfFullTextUtils.isFeatureEqual(n,t),r=dlfFullTextUtils.isFeatureEqual(s);if(!r&&!o){i.clear();if(t){i.addFeature(t)}}};dlfViewerFullTextControl.prototype.handleTextLineElements=function(t,e){var i=dlfFullTextUtils.getFeature(e),n=dlfFullTextUtils.isFeatureEqual(i,t);if(!n){this.removeHighlightEffect(i,e);this.addHighlightEffect(t,e)}};dlfViewerFullTextControl.prototype.removeHighlightEffect=function(t,e){if(t){var i=$("#"+t.getId());if(i.hasClass("highlight")){i.removeClass("highlight")}e.clear()}};dlfViewerFullTextControl.prototype.addHighlightEffect=function(t,e){if(t){var i=$("#"+t.getId());if(i.length>0&&!i.hasClass("highlight")){i.addClass("highlight");this.onResize();setTimeout(this.scrollToText,1e3,i,this.fullTextScrollElement,this.positions);e.addFeature(t)}}};dlfViewerFullTextControl.prototype.scrollToText=function(t,e,i){if(t.hasClass("highlight")){$(e).animate({scrollTop:i[t[0].id]},500)}};dlfViewerFullTextControl.prototype.activate=function(){var t=$("#tx-dlf-tools-fulltext");if(this.fulltextData_===undefined){this.fulltextData_=dlfFullTextUtils.fetchFullTextDataFromServer(this.url,this.image);if(this.fulltextData_!==undefined){this.layers_.textblock.getSource().addFeatures(this.fulltextData_.getTextblocks());this.layers_.textline.getSource().addFeatures(this.fulltextData_.getTextlines());if(this.fulltextData_.getTextblocks().length>0){this.layers_.select.getSource().addFeature(this.fulltextData_.getTextblocks()[0]);this.selectedFeature_=this.fulltextData_.getTextblocks()[0];this.showFulltext(this.fulltextData_.getTextblocks())}}}this.enableFulltextSelect();dlfUtils.setCookie("tx-dlf-pageview-fulltext-select","enabled");$(t).addClass("active");$(this).trigger("activate-fulltext",this);if(this.element===undefined){this.element=$("#tx-dlf-fulltextselection")}};dlfViewerFullTextControl.prototype.deactivate=function(){var t=$("#tx-dlf-tools-fulltext");this.disableFulltextSelect();dlfUtils.setCookie("tx-dlf-pageview-fulltext-select","disabled");$(t).removeClass("active");$(this).trigger("deactivate-fulltext",this)};dlfViewerFullTextControl.prototype.disableFulltextSelect=function(){this.map.un("click",this.handlers_.mapClick);this.map.un("pointermove",this.handlers_.mapHover);for(var t in this.layers_){if(this.layers_.hasOwnProperty(t)){this.map.removeLayer(this.layers_[String(t)])}}var e="fulltext-visible";$("#tx-dlf-tools-fulltext").removeClass(e);if(this.activateFullTextInitially===0){$("#tx-dlf-tools-fulltext").text(this.dic["fulltext-on"]).attr("title",this.dic["fulltext-on"])}$("#tx-dlf-fulltextselection").removeClass(e);$("#tx-dlf-fulltextselection").hide();$("body").removeClass(e)};dlfViewerFullTextControl.prototype.enableFulltextSelect=function(){this.map.on("click",this.handlers_.mapClick);this.map.on("pointermove",this.handlers_.mapHover);for(var t in this.layers_){if(this.layers_.hasOwnProperty(t)){this.map.addLayer(this.layers_[String(t)])}}var e="fulltext-visible";$("#tx-dlf-tools-fulltext").addClass(e);if(this.activateFullTextInitially===0){$("#tx-dlf-tools-fulltext").text(this.dic["fulltext-off"]).attr("title",this.dic["fulltext-off"])}$("#tx-dlf-fulltextselection").addClass(e);$("#tx-dlf-fulltextselection").show();$("body").addClass(e)};dlfViewerFullTextControl.prototype.showFulltext=function(t){if(t!==undefined){$("#tx-dlf-fulltextselection").children().remove();for(var e of t){var i=e.get("textlines");for(var n of i){this.appendTextLineSpan(n)}$("#tx-dlf-fulltextselection").append("<br /><br />")}this.calculatePositions()}};dlfViewerFullTextControl.prototype.appendTextLineSpan=function(t){var e=$('<span class="textline" id="'+t.getId()+'">');var i=t.get("content");for(var n of i){e.append(this.getItemForTextLineSpan(n))}e.append('<span class="sp"> </span>');$("#tx-dlf-fulltextselection").append(e)};dlfViewerFullTextControl.prototype.getItemForTextLineSpan=function(t){var e="";if(t.get("type")==="string"){e=$('<span class="'+t.get("type")+'" id="'+t.getId()+'"/>')}else{e=$('<span class="'+t.get("type")+'"/>')}var i=t.get("fulltext");var n=i.split(/\n/g);for(const[t,i]of n.entries()){e.append(document.createTextNode(i));if(t<n.length-1){e.append($("<br />"))}}return e};"use strict";
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */var dlfFullTextUtils;dlfFullTextUtils=dlfFullTextUtils||{};dlfFullTextUtils.getFeature=function(t){return t.getFeatures().length>0?t.getFeatures()[0]:undefined};dlfFullTextUtils.isFeatureEqual=function(t,e){return t!==undefined&&e!==undefined&&t.getId()===e.getId()};dlfFullTextUtils.fetchFullTextDataFromServer=function(t,e,i){var n=$.ajax({url:t,async:false});var s=dlfUtils.exists(i)?i:undefined;return dlfFullTextUtils.parseAltoData(e,s,n)};dlfFullTextUtils.parseAltoData=function(t,e,i){var n=new dlfAltoParser(t,undefined,undefined,e),s=i.responseXML?n.parseFeatures(i.responseXML):i.responseText?n.parseFeatures(i.responseText):[];return s.length>0?s[0]:undefined};
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
function nextResultPage(){var t=$("#tx-dlf-search-in-document-form input[id='tx-dlf-search-in-document-start']").val();var e=parseInt(t)+20;$("#tx-dlf-search-in-document-form input[id='tx-dlf-search-in-document-start']").val(e);$("#tx-dlf-search-in-document-form").submit()}function previousResultPage(){var t=$("#tx-dlf-search-in-document-form input[id='tx-dlf-search-in-document-start']").val();var e=parseInt(t)>20?parseInt(t)-20:0;$("#tx-dlf-search-in-document-form input[id='tx-dlf-search-in-document-start']").val(e);$("#tx-dlf-search-in-document-form").submit()}function resetStart(){$("#tx-dlf-search-in-document-form input[id='tx-dlf-search-in-document-start']").val(0)}function addHighlightEffect(t){if(t.length>0){t.forEach((function(t){var e=$("#"+t);if(e.length>0&&!e.hasClass("highlight")){e.addClass("highlight")}}))}}function getBaseUrl(t){var e=$("form#tx-dlf-search-in-document-form").attr("action");if(e===undefined||e.split("?")[0].indexOf(t)===-1){e=$(location).attr("href")}return e}function getCurrentQueryParams(t){if(t.indexOf("?")>0){return t.slice(t.indexOf("?")+1).split("&")}return[]}function getAllQueryParams(t,e){var i=getCurrentQueryParams(t);var n;for(var s=0;s<i.length;s++){n=i[s].split("=");if(e.indexOf(decodeURIComponent(n[0]))===-1){e.push(decodeURIComponent(n[0]));e[decodeURIComponent(n[0])]=n[1]}}return e}function isUrlConfiguredAsSlug(t){var e=getBaseUrl(t["uid"]).split("?")[0];return e.indexOf(t["uid"])>-1}function getNeededQueryParams(t){var e=$("input[id='tx-dlf-search-in-document-id']").attr("name");var i=$("input[id='tx-dlf-search-in-document-highlight-word']").attr("name");var n=$("input[id='tx-dlf-search-in-document-page']").attr("name");var s=[];if(e&&!isUrlConfiguredAsSlug(t)){s.push(e);s[e]=t["uid"]}if(i){s.push(i);s[i]=encodeURIComponent($("input[id='tx-dlf-search-in-document-query']").val())}if(n&&!isUrlConfiguredAsSlug(t)){s.push(n);s[n]=t["page"]}return s}function getHighlights(t){var e="";for(var i=0;i<t.length;i++){if(e===""){e+=t[i]}else{if(e.indexOf(t[i])===-1){e+=";"+t[i]}}}return e}function getLink(t){var e=getBaseUrl(t["uid"]);var i=getNeededQueryParams(t);if(e.indexOf("?")>0){i=getAllQueryParams(e,i);e=e.split("?")[0]}var n=e+"?";for(var s=0;s<i.length;s++){n+=i[s]+"="+i[i[s]]+"&"}n=n.slice(0,-1);return n}function getNavigationButtons(t,e){var i="";if(t>0){i+='<input type="button" id="tx-dlf-search-in-document-button-previous" class="button-previous" onclick="previousResultPage();" value="'+$("#tx-dlf-search-in-document-label-previous").text()+'" />'}if(e>t+20){i+='<input type="button" id="tx-dlf-search-in-document-button-next" class="button-next" onclick="nextResultPage();" value="'+$("#tx-dlf-search-in-document-label-next").text()+'" />'}return i}function search(){resetStart();$("#tx-dlf-search-in-document-loading").show();$("#tx-dlf-search-in-document-clearing").hide();$("#tx-dlf-search-in-document-button-next").hide();$("#tx-dlf-search-in-document-button-previous").hide();var t="/";if(typeof viewerUrl!=="undefined"){t=viewerUrl}else if($("#localJsVariables").attr("viewer-url")){t=$("#localJsVariables").attr("viewer-url")}$.post(t,{eID:"tx_dlf_search_in_document",q:$("input[id='tx-dlf-search-in-document-query']").val(),uid:$("input[id='tx-dlf-search-in-document-id']").val(),start:$("input[id='tx-dlf-search-in-document-start']").val(),encrypted:$("input[id='tx-dlf-search-in-document-encrypted']").val()},(function(t){var e=[];var i='<div class="results-active-indicator"></div><ul>';var n=$("input[id='tx-dlf-search-in-document-start']").val();if(t["numFound"]>0){t["documents"].forEach((function(t,i){if(n<0){n=i}if(t["snippet"].length>0){e[t["page"]]='<span class="structure">'+$("#tx-dlf-search-in-document-label-page").text()+" "+t["page"]+"</span><br />"+'<span class="textsnippet">'+'<a href="'+getLink(t)+'">'+t["snippet"]+"</a>"+"</span>"}}));e.sort((function(t,e){return t-e}));e.forEach((function(t,e){i+="<li>"+t+"</li>"}));addImageHighlight(t)}else{i+='<li class="noresult">'+$("#tx-dlf-search-in-document-label-noresult").text()+"</li>"}i+="</ul>";i+=getNavigationButtons(n,t["numFound"]);$("#tx-dlf-search-in-document-results").html(i)}),"json").done((function(t){$("#tx-dfgviewer-sru-results-loading").hide();$("#tx-dfgviewer-sru-results-clearing").show()}))}function getCurrentPage(){var t=1;var e=getBaseUrl(" ");var i=getCurrentQueryParams(e);var n=false;for(var s=0;s<i.length;s++){var o=i[s].split("=");if(decodeURIComponent(o[0])===$("input[id='tx-dlf-search-in-document-page']").attr("name")){t=parseInt(o[1],10);n=true}}if(!n){var r=e.split("/");t=parseInt(r.pop(),10)}return t}function addImageHighlight(t){var e=getCurrentPage();t["documents"].forEach((function(i,n){if(i["page"]===e){if(i["highlight"].length>0){if(typeof tx_dlf_viewer!=="undefined"&&tx_dlf_viewer.map!=null){tx_dlf_viewer.displayHighlightWord(encodeURIComponent(getHighlights(i["highlight"])))}else{setTimeout(addImageHighlight,500,t)}}addHighlightEffect(i["highlight"])}}))}function clearSearch(){$("#tx-dlf-search-in-document-results ul").remove();$(".results-active-indicator").remove();$("#tx-dlf-search-in-document-query").val("")}function triggerSearchAfterHitLoad(){var t=getCurrentQueryParams(getBaseUrl(" "));var e=$("input[id='tx-dlf-search-in-document-highlight-word']").attr("name");for(var i=0;i<t.length;i++){var n=t[i].split("=");if(e&&decodeURIComponent(n[0]).indexOf(e)!==-1){$("input[id='tx-dlf-search-in-document-query']").val(decodeURIComponent(n[1]));search();break}else if(decodeURIComponent(n[0]).indexOf("query")!=-1){$("input[id='tx-dlf-search-in-document-query']").val(decodeURIComponent(n[1]));search();break}}}$(document).ready((function(){if(document.getElementById("tx-dlf-search-in-document-query")){document.getElementById("tx-dlf-search-in-document-query").addEventListener("keydown",(function(t){if(t.key==="Enter"){t.preventDefault();search()}}));triggerSearchAfterHitLoad()}}));
/**
 * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo and TYPO3 projects.
 *
 * @license GNU General Public License version 3 or later.
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 */
var dlfViewer=function(t){this.div=dlfUtils.exists(t.div)?t.div:"tx-dlf-map";this.map=null;this.imageUrls=dlfUtils.exists(t.images)?t.images:[];this.images=[];this.fulltexts=dlfUtils.exists(t.fulltexts)?t.fulltexts:[];this.annotationContainers=dlfUtils.exists(t.annotationContainers)?t.annotationContainers:[];this.highlightFields=[];this.highlightFieldParams=undefined;this.highlightWords=null;this.imageManipulationControl=undefined;this.selection=undefined;this.source=undefined;this.selectionLayer=undefined;this.draw=undefined;this.source=null;this.view=null;this.ov_view=null;this.magnifierEnabled=false;this.initMagnifier=false;this.useInternalProxy=dlfUtils.exists(t.useInternalProxy)?t.useInternalProxy:false;this.init(dlfUtils.exists(t.controls)?t.controls:[])};dlfViewer.prototype.addCustomControls=function(){var t=undefined,e=undefined,i=undefined,n=undefined,s=this.images;if(dlfUtils.isFulltextDescriptor(this.fulltexts[0])&&this.images.length===1){t=new dlfViewerFullTextControl(this.map,this.images[0],this.fulltexts[0].url);e=new dlfViewerFullTextDownloadControl(this.map,this.images[0],this.fulltexts[0].url)}else{$("#tx-dlf-tools-fulltext").remove()}if(this.annotationContainers[0]!==undefined&&this.annotationContainers[0].annotationContainers!==undefined&&this.annotationContainers[0].annotationContainers.length>0&&this.images.length===1){i=new DlfAnnotationControl(this.map,this.images[0],this.annotationContainers[0]);if(t!==undefined){$(t).on("activate-fulltext",$.proxy(i.deactivate,i));$(i).on("activate-annotations",$.proxy(t.deactivate,t))}}else{$("#tx-dlf-tools-annotations").remove()}if($("#tx-dlf-tools-imagetools").length>0){n=new dlfViewerImageManipulationControl({controlTarget:$(".tx-dlf-tools-imagetools")[0],map:this.map});if(t!==undefined){$(n).on("activate-imagemanipulation",$.proxy(t.deactivate,t));$(t).on("activate-fulltext",$.proxy(n.deactivate,n))}if(i!==undefined){$(n).on("activate-imagemanipulation",$.proxy(i.deactivate,i));$(i).on("activate-annotations",$.proxy(n.deactivate,n))}this.imageManipulationControl=n}};dlfViewer.prototype.addHighlightField=function(t,e,i,n){this.highlightFields.push(t);this.highlightFieldParams={index:e,width:i,height:n};if(this.map){this.displayHighlightWord()}};dlfViewer.prototype.createControls_=function(t,e){var i=[];for(var n in t){if(t[n]!==""){switch(t[n]){case"OverviewMap":i.push(new ol.control.OverviewMap({layers:e}));break;case"ZoomPanel":i.push(new ol.control.Zoom);break;default:break}}}return i};dlfViewer.prototype.displayHighlightWord=function(t=null){if(t!=null){this.highlightWords=t}if(!dlfUtils.exists(this.highlightLayer)){this.highlightLayer=new ol.layer.Vector({source:new ol.source.Vector,style:dlfViewerOL3Styles.wordStyle});this.map.addLayer(this.highlightLayer)}if(this.highlightFields.length>0){this.highlightLayer.getSource().clear();for(var e=0;e<this.highlightFields.length;e++){var i=this.highlightFields[e],n=[[[i[0],i[1]],[i[2],i[1]],[i[2],i[3]],[i[0],i[3]],[i[0],i[1]]]],s=this.highlightFieldParams.index===1?this.images[0].width:0;var o=dlfUtils.scaleToImageSize([new ol.Feature(new ol.geom.Polygon(n))],this.images[this.highlightFieldParams.index],this.highlightFieldParams.width,this.highlightFieldParams.height,s);this.highlightLayer.getSource().addFeatures(o)}}if(dlfUtils.isFulltextDescriptor(this.fulltexts[0])&&this.images.length>0){var r=[],a=dlfFullTextUtils.fetchFullTextDataFromServer(this.fulltexts[0].url,this.images[0]),h=undefined;if(this.highlightWords!=null){r=decodeURIComponent(this.highlightWords).split(";")}if(this.images.length===2&&dlfUtils.isFulltextDescriptor(this.fulltexts[1])){var l=$.extend({},this.images[1]);l.width=l.width+this.images[0].width;h=dlfFullTextUtils.fetchFullTextDataFromServer(this.fulltexts[1].url,this.images[1],this.images[0].width)}var u=h===undefined?a.getStringFeatures():a.getStringFeatures().concat(h.getStringFeatures());r.forEach($.proxy((function(t){var e=dlfUtils.searchFeatureCollectionForCoordinates(u,t);if(e!==undefined){for(var i=0;i<e.length;i++){this.highlightLayer.getSource().addFeatures([e[i]])}}}),this))}};dlfViewer.prototype.init=function(t){if(this.imageUrls.length<=0)throw new Error("Missing image source objects.");this.initLayer(this.imageUrls).done($.proxy((function(e){var i=t.length>0||t[0]===""?this.createControls_(t,e):[];this.map=new ol.Map({layers:e,target:this.div,controls:i,interactions:[new ol.interaction.DragRotate,new ol.interaction.DragPan,new ol.interaction.DragZoom,new ol.interaction.PinchRotate,new ol.interaction.PinchZoom,new ol.interaction.MouseWheelZoom,new ol.interaction.KeyboardPan,new ol.interaction.KeyboardZoom,new ol.interaction.DragRotateAndZoom],keyboardEventTarget:document,view:dlfUtils.createOl3View(this.images),renderer:"canvas"});var n=dlfUtils.getCookie("tx-dlf-pageview-centerLon"),s=dlfUtils.getCookie("tx-dlf-pageview-centerLat"),o=dlfUtils.getCookie("tx-dlf-pageview-zoomLevel");if(!dlfUtils.isNullEmptyUndefinedOrNoNumber(n)&&!dlfUtils.isNullEmptyUndefinedOrNoNumber(s)&&!dlfUtils.isNullEmptyUndefinedOrNoNumber(o)){var r=this.map.getView().getCenter();if(n<2.2*r[0]&&s<-.2*r[1]&&s>2.2*r[1]){this.map.zoomTo([n,s],o)}}this.addCustomControls();this.displayHighlightWord();$(window).trigger("map-loadend",window);$(window).on("unload",$.proxy((function(){if(this.imageManipulationControl!==undefined&&this.imageManipulationControl.isActive()){this.imageManipulationControl.deactivate()}var t=this.map.getZoom()!==undefined?this.map.getZoom():"",e=this.map.getView().getCenter()!==undefined?this.map.getView().getCenter():["",""];dlfUtils.setCookie("tx-dlf-pageview-zoomLevel",t);dlfUtils.setCookie("tx-dlf-pageview-centerLon",e[0]);dlfUtils.setCookie("tx-dlf-pageview-centerLat",e[1])}),this))}),this));this.source=new ol.source.Vector;this.selection=new ol.interaction.DragBox({condition:ol.events.condition.noModifierKeys,style:new ol.style.Style({stroke:new ol.style.Stroke({color:[0,0,255,1]})})});this.initCropping()};dlfViewer.prototype.initLayer=function(t){var e=new $.Deferred,i=$.proxy((function(t,i){this.images=t;e.resolve(i)}),this);dlfUtils.fetchImageData(t).done((function(t){i(t,dlfUtils.createOl3Layers(t))}));return e};dlfViewer.prototype.degreeToRadian=function(t){return t*(Math.PI/180)};dlfViewer.prototype.radianToDegree=function(t){return t*(180/Math.PI)};dlfViewer.prototype.activateSelection=function(){var t=this;t.resetCropSelection();this.map.addLayer(this.selectionLayer);this.map.addInteraction(this.draw)};dlfViewer.prototype.resetCropSelection=function(){this.map.removeLayer(this.selectionLayer);this.source.clear();this.setNewCropDrawer(this.source)};dlfViewer.prototype.initCropping=function(){var t=this;var e=new ol.source.Vector({wrapX:false});this.selectionLayer=new ol.layer.Vector({source:e});value="LineString";maxPoints=2;geometryFunction=function(e,i){if(!i){i=new ol.geom.Polygon(null)}var n=e[0];var s=e[1];i.setCoordinates([[n,[n[0],s[1]],s,[s[0],n[1]],n]]);var o=i.getExtent();var r=t.map.getLayers().item(0).getSource().getProjection().getExtent();var a=ol.extent.getIntersection(r,o);var h=t.map.getView().getRotation();$("#addToBasketForm #startX").val(Math.round(a[0]));$("#addToBasketForm #startY").val(Math.round(a[1]));$("#addToBasketForm #endX").val(Math.round(a[2]));$("#addToBasketForm #endY").val(Math.round(a[3]));$("#addToBasketForm #rotation").val(Math.round(t.radianToDegree(h)));return i};this.setNewCropDrawer(e)};dlfViewer.prototype.setNewCropDrawer=function(t){viewerObject=this;this.draw=new ol.interaction.Draw({source:t,type:value,geometryFunction:geometryFunction,maxPoints:maxPoints});this.draw.on("drawend",(function(t){viewerObject.map.removeInteraction(viewerObject.draw)}));this.selectionLayer=new ol.layer.Vector({source:t})};dlfViewer.prototype.addMagnifier=function(t){var e=[0,0,1e3,1e3];var i=new ol.proj.Projection({code:"kitodo-image",units:"pixels",extent:e});this.ov_view=new ol.View({projection:i,center:ol.extent.getCenter(e),zoom:3,rotation:t});this.ov_map=new ol.Map({target:"ov_map",view:this.ov_view,controls:[],interactions:[]});this.ov_map.addLayer(this.map.getLayers().getArray()[0]);var n=null;var s=this;var o=this.ov_map;this.map.on("pointermove",(function(t){n=s.map.getEventCoordinate(t.originalEvent);s.ov_view.setCenter(n)}));var r=function(t,e){var i=t.getRotation()!==e.getView().getRotation();var n=t.getCenter()!==e.getView().getCenter();if(i||n){e.getView().rotate(t.getRotation())}},a=function(t){r(t.target,o)};this.map.getView().on("change:rotation",a,this.map);r(this.map.getView(),this.ov_map);this.initMagnifier=true};dlfViewer.prototype.activateMagnifier=function(){if(!this.initMagnifier){var t=this.map.getView().getRotation();this.addMagnifier(t)}if(!this.magnifierEnabled){$("#ov_map").show();this.magnifierEnabled=true}else{$("#ov_map").hide();this.magnifierEnabled=false}};function Drag(){ol.interaction.Pointer.call(this,{handleDownEvent:Drag.prototype.handleDownEvent,handleDragEvent:Drag.prototype.handleDragEvent,handleMoveEvent:Drag.prototype.handleMoveEvent,handleUpEvent:Drag.prototype.handleUpEvent});this.coordinate_=null;this.cursor_="pointer";this.feature_=null;this.previousCursor_=undefined}